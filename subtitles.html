<div class="transcript-body" style="height: 206px;"><span class="transcription-time-part" data-time-start="4.12" data-time-end="7.14"><span>Okay. Last time we started on the issue of </span></span><span class="transcription-time-part" data-time-start="7.14" data-time-end="9.58"><span>resource management using it as an example, </span></span><span class="transcription-time-part" data-time-start="9.58" data-time-end="11.06"><span>designing a string class, </span></span><span class="transcription-time-part" data-time-start="11.06" data-time-end="12.32"><span>pretending we didn't already </span></span><span class="transcription-time-part" data-time-start="12.32" data-time-end="13.039"><span>have such a class </span></span><span class="transcription-time-part" data-time-start="13.039" data-time-end="14.1"><span>available in the standard </span></span><span class="transcription-time-part" data-time-start="14.1" data-time-end="15.399000000000001"><span>C plus plus library. </span></span><span class="transcription-time-part" data-time-start="15.399000000000001" data-time-end="17.16"><span>We decided that a string object will hold </span></span><span class="transcription-time-part" data-time-start="17.16" data-time-end="19.539"><span>a pointer to a dynamically allocated array. </span></span><span class="transcription-time-part" data-time-start="19.539" data-time-end="21.339"><span>We wrote a constructor that allocates </span></span><span class="transcription-time-part" data-time-start="21.339" data-time-end="22.84"><span>C array when a string is created, </span></span><span class="transcription-time-part" data-time-start="22.84" data-time-end="24.059"><span>and we realized that we needed to </span></span><span class="transcription-time-part" data-time-start="24.059" data-time-end="25.539"><span>write a destructor to ensure that </span></span><span class="transcription-time-part" data-time-start="25.539" data-time-end="27.019"><span>that array is deallocated </span></span><span class="transcription-time-part" data-time-start="27.019" data-time-end="28.679"><span>when the string object goes away. </span></span><span class="transcription-time-part" data-time-start="28.679" data-time-end="29.639"><span>If we didn't do that, </span></span><span class="transcription-time-part" data-time-start="29.639" data-time-end="30.98"><span>we'd have a memory leak. </span></span><span class="transcription-time-part" data-time-start="30.98" data-time-end="33.239"><span>Now, you might think, Okay, that was easy, </span></span><span class="transcription-time-part" data-time-start="33.239" data-time-end="34.54"><span>grab storage at creation, </span></span><span class="transcription-time-part" data-time-start="34.54" data-time-end="35.72"><span>give it back when the string </span></span><span class="transcription-time-part" data-time-start="35.72" data-time-end="37.219"><span>goes away. We're done, right? </span></span><span class="transcription-time-part" data-time-start="37.219" data-time-end="39.504"><span>If so, you'd be very wrong. </span></span><span class="transcription-time-part" data-time-start="39.504" data-time-end="42.669"><span>So let me pose a new problem now and </span></span><span class="transcription-time-part" data-time-start="42.669" data-time-end="44.97"><span>see where we fall flat </span></span><span class="transcription-time-part" data-time-start="44.97" data-time-end="46.109"><span>on our faces with the </span></span><span class="transcription-time-part" data-time-start="46.109" data-time-end="47.749"><span>string type as we defined it. </span></span><span class="transcription-time-part" data-time-start="47.749" data-time-end="49.27"><span>What we've written is correct </span></span><span class="transcription-time-part" data-time-start="49.27" data-time-end="51.409"><span>so far but not complete. </span></span><span class="transcription-time-part" data-time-start="51.409" data-time-end="54.929"><span>So here's the new situation I want to set up. </span></span><span class="transcription-time-part" data-time-start="54.929" data-time-end="59.39"><span>We have this function H. H creates a string, </span></span><span class="transcription-time-part" data-time-start="59.39" data-time-end="61.35"><span>initializes it with hello. </span></span><span class="transcription-time-part" data-time-start="61.35" data-time-end="63.249"><span>It calls the function F, </span></span><span class="transcription-time-part" data-time-start="63.249" data-time-end="64.99"><span>passing it the string S, </span></span><span class="transcription-time-part" data-time-start="64.99" data-time-end="66.83"><span>F receives the string </span></span><span class="transcription-time-part" data-time-start="66.83" data-time-end="68.77"><span>and then does its thing. </span></span><span class="transcription-time-part" data-time-start="68.77" data-time-end="73.489"><span>So let's see what is happening. </span></span><span class="transcription-time-part" data-time-start="73.489" data-time-end="77.029"><span>So you've got this constructor code </span></span><span class="transcription-time-part" data-time-start="77.029" data-time-end="78.19"><span>here and the destructor there. </span></span><span class="transcription-time-part" data-time-start="78.19" data-time-end="80.389"><span>So remember, the destructor is basically </span></span><span class="transcription-time-part" data-time-start="80.389" data-time-end="81.59"><span>setting up constructor is </span></span><span class="transcription-time-part" data-time-start="81.59" data-time-end="82.69"><span>setting up the string, </span></span><span class="transcription-time-part" data-time-start="82.69" data-time-end="84.449"><span>dynamically allocating the array </span></span><span class="transcription-time-part" data-time-start="84.449" data-time-end="85.97"><span>of characters, putting the text in there. </span></span><span class="transcription-time-part" data-time-start="85.97" data-time-end="88.029"><span>The destructor is deleting the storage. </span></span><span class="transcription-time-part" data-time-start="88.029" data-time-end="90.669"><span>And so let's see what happens here. </span></span><span class="transcription-time-part" data-time-start="90.669" data-time-end="93.569"><span>So let me go to the board on this again. </span></span><span class="transcription-time-part" data-time-start="93.569" data-time-end="96.73"><span>All right. So if we enter the function H, </span></span><span class="transcription-time-part" data-time-start="96.73" data-time-end="97.93"><span>H creates a string </span></span><span class="transcription-time-part" data-time-start="97.93" data-time-end="100.03"><span>S. We know what that's going to do. </span></span><span class="transcription-time-part" data-time-start="100.03" data-time-end="101.59"><span>The string length is five. </span></span><span class="transcription-time-part" data-time-start="101.59" data-time-end="102.85"><span>We'll get a pointer to </span></span><span class="transcription-time-part" data-time-start="102.85" data-time-end="104.389"><span>the dynamic storage before </span></span><span class="transcription-time-part" data-time-start="104.389" data-time-end="108.01"><span>the hilo. Right there. </span></span><span class="transcription-time-part" data-time-start="108.01" data-time-end="110.19"><span>Now we're going to call the function F </span></span><span class="transcription-time-part" data-time-start="110.19" data-time-end="112.71"><span>passing at S. Now, </span></span><span class="transcription-time-part" data-time-start="112.71" data-time-end="115.09"><span>look at the declaration of F. </span></span><span class="transcription-time-part" data-time-start="115.09" data-time-end="119.34"><span>F's argument T is a type string. </span></span><span class="transcription-time-part" data-time-start="119.34" data-time-end="121.529"><span>Not pointed to string, </span></span><span class="transcription-time-part" data-time-start="121.529" data-time-end="124.509"><span>not reference to string, but string. </span></span><span class="transcription-time-part" data-time-start="124.509" data-time-end="127.59"><span>So what are we doing here? </span></span><span class="transcription-time-part" data-time-start="127.59" data-time-end="129.23"><span>We're not passing by reference. </span></span><span class="transcription-time-part" data-time-start="129.23" data-time-end="131.03"><span>We're passing by value. </span></span><span class="transcription-time-part" data-time-start="131.03" data-time-end="133.21"><span>Passing by value means copying. </span></span><span class="transcription-time-part" data-time-start="133.21" data-time-end="135.729"><span>It means that T will be a copy of </span></span><span class="transcription-time-part" data-time-start="135.729" data-time-end="137.649"><span>S. If you pass </span></span><span class="transcription-time-part" data-time-start="137.649" data-time-end="139.169"><span>something to a function by value, </span></span><span class="transcription-time-part" data-time-start="139.169" data-time-end="140.99"><span>the original object is copied </span></span><span class="transcription-time-part" data-time-start="140.99" data-time-end="142.71"><span>into the parameter for the function, </span></span><span class="transcription-time-part" data-time-start="142.71" data-time-end="143.79"><span>and then the function </span></span><span class="transcription-time-part" data-time-start="143.79" data-time-end="144.669"><span>can do whatever it wants with </span></span><span class="transcription-time-part" data-time-start="144.669" data-time-end="147.09"><span>that parameter has no effect on the original. </span></span><span class="transcription-time-part" data-time-start="147.09" data-time-end="150.474"><span>That's what passing by value should be. </span></span><span class="transcription-time-part" data-time-start="150.474" data-time-end="152.68"><span>Alright, so that means </span></span><span class="transcription-time-part" data-time-start="152.68" data-time-end="155.399"><span>that here we are in the environment of H. </span></span><span class="transcription-time-part" data-time-start="155.399" data-time-end="156.079"><span>We have this thing </span></span><span class="transcription-time-part" data-time-start="156.079" data-time-end="157.58"><span>S. We're going to be entering </span></span><span class="transcription-time-part" data-time-start="157.58" data-time-end="161.459"><span>the environment of T. I'm sorry, of F, </span></span><span class="transcription-time-part" data-time-start="161.459" data-time-end="164.66"><span>and F has its own local variable </span></span><span class="transcription-time-part" data-time-start="164.66" data-time-end="166.38"><span>T. It's a brand new object, </span></span><span class="transcription-time-part" data-time-start="166.38" data-time-end="169.259"><span>and it's going to be constructed as a copy of </span></span><span class="transcription-time-part" data-time-start="169.259" data-time-end="174.849"><span>S. So how's that going to work? </span></span><span class="transcription-time-part" data-time-start="174.849" data-time-end="180.15"><span>Well, we didn't say how strings get copied. </span></span><span class="transcription-time-part" data-time-start="180.15" data-time-end="182.029"><span>So the compiler says, </span></span><span class="transcription-time-part" data-time-start="182.029" data-time-end="185.27"><span>If you don't tell me how to copy a type, </span></span><span class="transcription-time-part" data-time-start="185.27" data-time-end="189.81"><span>I will just simply copy each member. </span></span><span class="transcription-time-part" data-time-start="189.81" data-time-end="192.709"><span>So the compiler says, </span></span><span class="transcription-time-part" data-time-start="192.709" data-time-end="194.769"><span>You didn't tell me how to copy strings. </span></span><span class="transcription-time-part" data-time-start="194.769" data-time-end="197.109"><span>So to initialize T as a copy of S, </span></span><span class="transcription-time-part" data-time-start="197.109" data-time-end="198.809"><span>I will just copy </span></span><span class="transcription-time-part" data-time-start="198.809" data-time-end="204.65"><span>this pointer and copy this integer. </span></span><span class="transcription-time-part" data-time-start="205.21" data-time-end="207.71"><span>Okay, so the pointer and the integer </span></span><span class="transcription-time-part" data-time-start="207.71" data-time-end="210.149"><span>get copied, and T looks like that. </span></span><span class="transcription-time-part" data-time-start="210.149" data-time-end="211.429"><span>So now, </span></span><span class="transcription-time-part" data-time-start="211.429" data-time-end="213.845"><span>from the point of view of the function, </span></span><span class="transcription-time-part" data-time-start="213.845" data-time-end="216.419"><span>Ts, it's got the text, hello. </span></span><span class="transcription-time-part" data-time-start="216.419" data-time-end="218.06"><span>It's a five character string. </span></span><span class="transcription-time-part" data-time-start="218.06" data-time-end="221"><span>Looks good. If the function </span></span><span class="transcription-time-part" data-time-start="221" data-time-end="222.779"><span>does things like, Hey, </span></span><span class="transcription-time-part" data-time-start="222.779" data-time-end="223.559"><span>I want to take a look </span></span><span class="transcription-time-part" data-time-start="223.559" data-time-end="225.239"><span>at the third character in the string, </span></span><span class="transcription-time-part" data-time-start="225.239" data-time-end="225.619"><span>maybe you have </span></span><span class="transcription-time-part" data-time-start="225.619" data-time-end="226.619"><span>some member function to let you </span></span><span class="transcription-time-part" data-time-start="226.619" data-time-end="228.199"><span>look at particular characters in the string. </span></span><span class="transcription-time-part" data-time-start="228.199" data-time-end="229.62"><span>I'll find the right character. </span></span><span class="transcription-time-part" data-time-start="229.62" data-time-end="232.279"><span>Okay looks great. But look </span></span><span class="transcription-time-part" data-time-start="232.279" data-time-end="235.12"><span>at the weird things that could happen. </span></span><span class="transcription-time-part" data-time-start="235.12" data-time-end="237.44"><span>If the function does something </span></span><span class="transcription-time-part" data-time-start="237.44" data-time-end="239.78"><span>to modify the string, </span></span><span class="transcription-time-part" data-time-start="239.78" data-time-end="242.479"><span>for example, let's say there's </span></span><span class="transcription-time-part" data-time-start="242.479" data-time-end="244.019"><span>a member function of string that </span></span><span class="transcription-time-part" data-time-start="244.019" data-time-end="245.039"><span>lets you modify some </span></span><span class="transcription-time-part" data-time-start="245.039" data-time-end="246.379"><span>of the characters in the string. </span></span><span class="transcription-time-part" data-time-start="246.379" data-time-end="248.16"><span>Maybe the function F decides </span></span><span class="transcription-time-part" data-time-start="248.16" data-time-end="249.939"><span>to change the character, </span></span><span class="transcription-time-part" data-time-start="249.939" data-time-end="252.985"><span>the beginning of the string from an H to a J. </span></span><span class="transcription-time-part" data-time-start="252.985" data-time-end="256.97"><span>So hello becomes jello, right? </span></span><span class="transcription-time-part" data-time-start="256.97" data-time-end="258.749"><span>It's taking T, it's saying, </span></span><span class="transcription-time-part" data-time-start="258.749" data-time-end="260.849"><span>I'm going to modify the character </span></span><span class="transcription-time-part" data-time-start="260.849" data-time-end="262.73"><span>beginning to a J, so it does. </span></span><span class="transcription-time-part" data-time-start="262.73" data-time-end="265.45"><span>Well, that's a little weird, right? </span></span><span class="transcription-time-part" data-time-start="265.45" data-time-end="267.01"><span>Cause that means the string </span></span><span class="transcription-time-part" data-time-start="267.01" data-time-end="269.509"><span>S, the original object, </span></span><span class="transcription-time-part" data-time-start="269.509" data-time-end="272.57"><span>now the text is different than it was before, </span></span><span class="transcription-time-part" data-time-start="272.57" data-time-end="275.03"><span>but I thought passing by value means, </span></span><span class="transcription-time-part" data-time-start="275.03" data-time-end="276.49"><span>the original object is </span></span><span class="transcription-time-part" data-time-start="276.49" data-time-end="277.469"><span>not going to get modified, </span></span><span class="transcription-time-part" data-time-start="277.469" data-time-end="279.429"><span>and yet it has been. </span></span><span class="transcription-time-part" data-time-start="279.429" data-time-end="281.11"><span>So that's a little weird, </span></span><span class="transcription-time-part" data-time-start="281.11" data-time-end="282.73"><span>but that's not the real problem. </span></span><span class="transcription-time-part" data-time-start="282.73" data-time-end="284.589"><span>The real problem comes </span></span><span class="transcription-time-part" data-time-start="284.589" data-time-end="287.31"><span>when we leave the function F, </span></span><span class="transcription-time-part" data-time-start="287.31" data-time-end="290.07"><span>when we return from the function F, </span></span><span class="transcription-time-part" data-time-start="290.07" data-time-end="293.229"><span>any local variables of F go away. </span></span><span class="transcription-time-part" data-time-start="293.229" data-time-end="297.51"><span>T, the parameter T is a local variable of F. </span></span><span class="transcription-time-part" data-time-start="297.51" data-time-end="300.775"><span>So this string is going to go away. </span></span><span class="transcription-time-part" data-time-start="300.775" data-time-end="302.9"><span>Now, when a string goes away, </span></span><span class="transcription-time-part" data-time-start="302.9" data-time-end="304.68"><span>the destructor is called. </span></span><span class="transcription-time-part" data-time-start="304.68" data-time-end="308.34"><span>So the destructor is called on T. </span></span><span class="transcription-time-part" data-time-start="308.34" data-time-end="310.779"><span>The destructor is told </span></span><span class="transcription-time-part" data-time-start="310.779" data-time-end="313.78"><span>to delete the array this points to. </span></span><span class="transcription-time-part" data-time-start="313.98" data-time-end="318.7"><span>So it goes away. And now </span></span><span class="transcription-time-part" data-time-start="318.7" data-time-end="321.06"><span>that the destructors done his job, </span></span><span class="transcription-time-part" data-time-start="321.06" data-time-end="323.12"><span>these are both built in types, </span></span><span class="transcription-time-part" data-time-start="323.12" data-time-end="325.74"><span>nothing else happens, so T's gone. </span></span><span class="transcription-time-part" data-time-start="326.24" data-time-end="330.079"><span>And so we return to the function, </span></span><span class="transcription-time-part" data-time-start="330.079" data-time-end="333.499"><span>and S has been radically changed. </span></span><span class="transcription-time-part" data-time-start="333.499" data-time-end="335.74"><span>Here, we thought that passing by </span></span><span class="transcription-time-part" data-time-start="335.74" data-time-end="336.32"><span>value means </span></span><span class="transcription-time-part" data-time-start="336.32" data-time-end="337.98"><span>our original object won't get modified. </span></span><span class="transcription-time-part" data-time-start="337.98" data-time-end="341.739"><span>In fact, S is now in a horrible state. </span></span><span class="transcription-time-part" data-time-start="341.739" data-time-end="345.299"><span>The array's gone. S has a dangling pointer. </span></span><span class="transcription-time-part" data-time-start="345.299" data-time-end="346.66"><span>It's got a pointer to storage that </span></span><span class="transcription-time-part" data-time-start="346.66" data-time-end="348.56"><span>no longer belongs to your program. </span></span><span class="transcription-time-part" data-time-start="348.56" data-time-end="351.899"><span>So any attempt to follow </span></span><span class="transcription-time-part" data-time-start="351.899" data-time-end="354.299"><span>that pointer in the rest </span></span><span class="transcription-time-part" data-time-start="354.299" data-time-end="357.2"><span>of this code is undefined behavior. </span></span><span class="transcription-time-part" data-time-start="357.2" data-time-end="359.479"><span>Now, maybe the rest of the code </span></span><span class="transcription-time-part" data-time-start="359.479" data-time-end="361.36"><span>doesn't ever try to follow that plan. </span></span><span class="transcription-time-part" data-time-start="361.36" data-time-end="362.86"><span>Maybe the only thing we do with </span></span><span class="transcription-time-part" data-time-start="362.86" data-time-end="365.98"><span>F with S after this point is maybe say, </span></span><span class="transcription-time-part" data-time-start="365.98" data-time-end="368.28"><span>Hey, S, how long is the string? </span></span><span class="transcription-time-part" data-time-start="368.28" data-time-end="370.28"><span>And maybe our member function </span></span><span class="transcription-time-part" data-time-start="370.28" data-time-end="371.9"><span>of string that tells you how long </span></span><span class="transcription-time-part" data-time-start="371.9" data-time-end="373.64"><span>the string is simply looks at </span></span><span class="transcription-time-part" data-time-start="373.64" data-time-end="374.46"><span>this number and gives it </span></span><span class="transcription-time-part" data-time-start="374.46" data-time-end="375.64"><span>back to you and says, </span></span><span class="transcription-time-part" data-time-start="375.64" data-time-end="378.259"><span>Oh, it's five characters. Okay, thank you. </span></span><span class="transcription-time-part" data-time-start="378.259" data-time-end="379.88"><span>But we're going to run </span></span><span class="transcription-time-part" data-time-start="379.88" data-time-end="381.504"><span>into trouble at some point. </span></span><span class="transcription-time-part" data-time-start="381.504" data-time-end="383.75"><span>When we leave the function, </span></span><span class="transcription-time-part" data-time-start="383.75" data-time-end="385.99"><span>when we leave the function H, </span></span><span class="transcription-time-part" data-time-start="385.99" data-time-end="387.09"><span>the string is going to </span></span><span class="transcription-time-part" data-time-start="387.09" data-time-end="388.449"><span>go S is going to go away, </span></span><span class="transcription-time-part" data-time-start="388.449" data-time-end="390.529"><span>so the destructor is called, </span></span><span class="transcription-time-part" data-time-start="390.529" data-time-end="395.29"><span>and the destructors going to </span></span><span class="transcription-time-part" data-time-start="395.29" data-time-end="397.71"><span>call delete on a pointer </span></span><span class="transcription-time-part" data-time-start="397.71" data-time-end="400.109"><span>to storage that's already been deleted. </span></span><span class="transcription-time-part" data-time-start="400.109" data-time-end="402.33"><span>That's always undefined behavior. </span></span><span class="transcription-time-part" data-time-start="402.33" data-time-end="404.31"><span>If you call delete with a pointer to </span></span><span class="transcription-time-part" data-time-start="404.31" data-time-end="405.51"><span>storage that no longer </span></span><span class="transcription-time-part" data-time-start="405.51" data-time-end="406.409"><span>belongs to your program, </span></span><span class="transcription-time-part" data-time-start="406.409" data-time-end="408.489"><span>it's been given back to the operating system, </span></span><span class="transcription-time-part" data-time-start="408.489" data-time-end="410.349"><span>that's undefined behavior, </span></span><span class="transcription-time-part" data-time-start="410.349" data-time-end="413.469"><span>and on most systems will cause a crash. </span></span><span class="transcription-time-part" data-time-start="414.07" data-time-end="418.21"><span>So we're totally messed up here. </span></span><span class="transcription-time-part" data-time-start="418.21" data-time-end="420.13"><span>So again, the problem was </span></span><span class="transcription-time-part" data-time-start="420.13" data-time-end="427.69"><span>that letting the compiler say how strings </span></span><span class="transcription-time-part" data-time-start="427.69" data-time-end="431.07"><span>get copied is going to turn into simply copy </span></span><span class="transcription-time-part" data-time-start="431.07" data-time-end="437.61"><span>the members and the essence </span></span><span class="transcription-time-part" data-time-start="437.61" data-time-end="439.59"><span>of the problem is T </span></span><span class="transcription-time-part" data-time-start="439.59" data-time-end="443.109"><span>and S are sharing the same array, </span></span><span class="transcription-time-part" data-time-start="443.109" data-time-end="445.71"><span>and that's where the problem lies. </span></span><span class="transcription-time-part" data-time-start="445.71" data-time-end="448.57"><span>Any changes through T to </span></span><span class="transcription-time-part" data-time-start="448.57" data-time-end="452.49"><span>the array is going to be reflected in S. But, </span></span><span class="transcription-time-part" data-time-start="452.49" data-time-end="453.729"><span>the real problem is going to </span></span><span class="transcription-time-part" data-time-start="453.729" data-time-end="454.849"><span>be when T goes away, </span></span><span class="transcription-time-part" data-time-start="454.849" data-time-end="456.269"><span>the array that's shared </span></span><span class="transcription-time-part" data-time-start="456.269" data-time-end="457.89"><span>by both of them goes away. </span></span><span class="transcription-time-part" data-time-start="457.89" data-time-end="460.269"><span>And so now S has a dangling pointer, </span></span><span class="transcription-time-part" data-time-start="460.269" data-time-end="461.71"><span>and even if we don't come </span></span><span class="transcription-time-part" data-time-start="461.71" data-time-end="463.549"><span>into run into trouble earlier, </span></span><span class="transcription-time-part" data-time-start="463.549" data-time-end="465.669"><span>by the time the instructors called, </span></span><span class="transcription-time-part" data-time-start="465.669" data-time-end="468.33"><span>we're going to be in bad shape. </span></span><span class="transcription-time-part" data-time-start="468.33" data-time-end="471.03"><span>So that's the source of </span></span><span class="transcription-time-part" data-time-start="471.03" data-time-end="472.37"><span>the problem that T is </span></span><span class="transcription-time-part" data-time-start="472.37" data-time-end="474.61"><span>sharing the same array from S. </span></span><span class="transcription-time-part" data-time-start="474.61" data-time-end="478.39"><span>Now, when I think of copying, uh you know, </span></span><span class="transcription-time-part" data-time-start="478.39" data-time-end="480.47"><span>if I pass a copy of </span></span><span class="transcription-time-part" data-time-start="480.47" data-time-end="483.569"><span>an integer parameter of </span></span><span class="transcription-time-part" data-time-start="483.569" data-time-end="485.09"><span>a function, that'll be an integer. </span></span><span class="transcription-time-part" data-time-start="485.09" data-time-end="487.87"><span>Then this gets copied here. </span></span><span class="transcription-time-part" data-time-start="487.87" data-time-end="491.43"><span>This is entirely independent </span></span><span class="transcription-time-part" data-time-start="491.43" data-time-end="493.13"><span>of this guy. There's nothing shared here. </span></span><span class="transcription-time-part" data-time-start="493.13" data-time-end="494.65"><span>The copy of this integer is </span></span><span class="transcription-time-part" data-time-start="494.65" data-time-end="496.67"><span>totally distinct from this integer here. </span></span><span class="transcription-time-part" data-time-start="496.67" data-time-end="498.73"><span>That's what I want copying to do. </span></span><span class="transcription-time-part" data-time-start="498.73" data-time-end="501.189"><span>I want the newly created object as </span></span><span class="transcription-time-part" data-time-start="501.189" data-time-end="502.57"><span>a copy of the original to </span></span><span class="transcription-time-part" data-time-start="502.57" data-time-end="504.629"><span>be totally independent of the original. </span></span><span class="transcription-time-part" data-time-start="504.629" data-time-end="506.89"><span>So that means T should </span></span><span class="transcription-time-part" data-time-start="506.89" data-time-end="509.609"><span>probably have its own array of characters, </span></span><span class="transcription-time-part" data-time-start="509.609" data-time-end="511.15"><span>not share it with S, get </span></span><span class="transcription-time-part" data-time-start="511.15" data-time-end="513.29"><span>its own array of character. </span></span><span class="transcription-time-part" data-time-start="513.48" data-time-end="515.76"><span>So to make that happen, </span></span><span class="transcription-time-part" data-time-start="515.76" data-time-end="517.559"><span>we have to tell the compiler, </span></span><span class="transcription-time-part" data-time-start="517.559" data-time-end="519.339"><span>I don't want you to </span></span><span class="transcription-time-part" data-time-start="519.339" data-time-end="520.78"><span>say how to copy something. </span></span><span class="transcription-time-part" data-time-start="520.78" data-time-end="522.56"><span>I'm going to tell you how to copy. </span></span><span class="transcription-time-part" data-time-start="522.56" data-time-end="526.1"><span>So to do that, we have to declare </span></span><span class="transcription-time-part" data-time-start="526.1" data-time-end="528.299"><span>an appropriate way of </span></span><span class="transcription-time-part" data-time-start="528.299" data-time-end="530.08"><span>creating a string from another string. </span></span><span class="transcription-time-part" data-time-start="530.08" data-time-end="530.559"><span>Well, </span></span><span class="transcription-time-part" data-time-start="530.559" data-time-end="532.44"><span>creating a string, that's a constructor. </span></span><span class="transcription-time-part" data-time-start="532.44" data-time-end="535.279"><span>So let me provide a constructor for </span></span><span class="transcription-time-part" data-time-start="535.279" data-time-end="536.96"><span>string that takes as </span></span><span class="transcription-time-part" data-time-start="536.96" data-time-end="538.92"><span>its argument, another string. </span></span><span class="transcription-time-part" data-time-start="538.92" data-time-end="540.7"><span>I'll pass it by constant reference. </span></span><span class="transcription-time-part" data-time-start="540.7" data-time-end="542.8"><span>So I'm </span></span><span class="transcription-time-part" data-time-start="542.8" data-time-end="544.42"><span>creating another constructor for string. </span></span><span class="transcription-time-part" data-time-start="544.42" data-time-end="545.379"><span>It says, how to create </span></span><span class="transcription-time-part" data-time-start="545.379" data-time-end="547.695"><span>a string from another string. </span></span><span class="transcription-time-part" data-time-start="547.695" data-time-end="550.009"><span>And I'm passing it by constant reference for </span></span><span class="transcription-time-part" data-time-start="550.009" data-time-end="552.929"><span>reasons that I'll get to later. So let's see. </span></span><span class="transcription-time-part" data-time-start="552.929" data-time-end="555.149"><span>How do I create a string? </span></span><span class="transcription-time-part" data-time-start="555.149" data-time-end="556.869"><span>How do I create a string from </span></span><span class="transcription-time-part" data-time-start="556.869" data-time-end="558.869"><span>another string? Well, let's see. </span></span><span class="transcription-time-part" data-time-start="558.869" data-time-end="560.869"><span>So I've got to make sure that </span></span><span class="transcription-time-part" data-time-start="560.869" data-time-end="564.389"><span>I am properly initialized. </span></span><span class="transcription-time-part" data-time-start="564.389" data-time-end="566.509"><span>So that means my LN </span></span><span class="transcription-time-part" data-time-start="566.509" data-time-end="569.03"><span>and my text have to be properly set. </span></span><span class="transcription-time-part" data-time-start="569.03" data-time-end="571.79"><span>So my MLN well, </span></span><span class="transcription-time-part" data-time-start="571.79" data-time-end="573.289"><span>that'll just be the other guy's MLN. </span></span><span class="transcription-time-part" data-time-start="573.289" data-time-end="575.029"><span>Okay, so if the other guys a </span></span><span class="transcription-time-part" data-time-start="575.029" data-time-end="577.07"><span>five character string with the text hello, </span></span><span class="transcription-time-part" data-time-start="577.07" data-time-end="579.77"><span>then I'll set my length to five. </span></span><span class="transcription-time-part" data-time-start="579.77" data-time-end="583.769"><span>Now, my text should </span></span><span class="transcription-time-part" data-time-start="583.769" data-time-end="586.339"><span>not just be a pointer </span></span><span class="transcription-time-part" data-time-start="586.339" data-time-end="587.44"><span>to the other guy's storage. </span></span><span class="transcription-time-part" data-time-start="587.44" data-time-end="590.1"><span>I need my own array of characters. </span></span><span class="transcription-time-part" data-time-start="590.1" data-time-end="591.78"><span>So I will allocate </span></span><span class="transcription-time-part" data-time-start="591.78" data-time-end="592.819"><span>my own array of </span></span><span class="transcription-time-part" data-time-start="592.819" data-time-end="594.12"><span>characters of the right length. </span></span><span class="transcription-time-part" data-time-start="594.12" data-time-end="596.94"><span>So now I have a dynamically allocated array </span></span><span class="transcription-time-part" data-time-start="596.94" data-time-end="598.499"><span>of the right number of characters, </span></span><span class="transcription-time-part" data-time-start="598.499" data-time-end="599.979"><span>but they're uninitialized. </span></span><span class="transcription-time-part" data-time-start="599.979" data-time-end="601.759"><span>So let's copy </span></span><span class="transcription-time-part" data-time-start="601.759" data-time-end="604.29"><span>the other guy's text into my text. </span></span><span class="transcription-time-part" data-time-start="604.29" data-time-end="606.299"><span>Let's copy the C string from </span></span><span class="transcription-time-part" data-time-start="606.299" data-time-end="609.079"><span>the other guy into me. And there we have it. </span></span><span class="transcription-time-part" data-time-start="609.079" data-time-end="610.54"><span>There is a correct </span></span><span class="transcription-time-part" data-time-start="610.54" data-time-end="612.539"><span>implementation of the constructor for </span></span><span class="transcription-time-part" data-time-start="612.539" data-time-end="614.84"><span>a string that takes </span></span><span class="transcription-time-part" data-time-start="614.84" data-time-end="617.7"><span>a string another string as its argument. </span></span><span class="transcription-time-part" data-time-start="618.14" data-time-end="620.8"><span>And I know there's </span></span><span class="transcription-time-part" data-time-start="620.8" data-time-end="622.119"><span>going to be people raising objections. </span></span><span class="transcription-time-part" data-time-start="622.119" data-time-end="623.16"><span>I haven't seen if they already </span></span><span class="transcription-time-part" data-time-start="623.16" data-time-end="624.899"><span>have raising some objections. </span></span><span class="transcription-time-part" data-time-start="624.899" data-time-end="627.34"><span>Will this even compile? Yes, it will compile. </span></span><span class="transcription-time-part" data-time-start="627.34" data-time-end="629.9"><span>I'll explain why. But let's </span></span><span class="transcription-time-part" data-time-start="629.9" data-time-end="631.099"><span>see what it does to </span></span><span class="transcription-time-part" data-time-start="631.099" data-time-end="632.999"><span>see how it solves the problem. </span></span><span class="transcription-time-part" data-time-start="632.999" data-time-end="634.939"><span>So remember that code, </span></span><span class="transcription-time-part" data-time-start="634.939" data-time-end="637.26"><span>and let me go back to the picture. </span></span><span class="transcription-time-part" data-time-start="637.26" data-time-end="638.66"><span>So now we're saying, </span></span><span class="transcription-time-part" data-time-start="638.66" data-time-end="640.28"><span>Okay, let's do the following. </span></span><span class="transcription-time-part" data-time-start="640.28" data-time-end="641.894"><span>As is going to be copied into. </span></span><span class="transcription-time-part" data-time-start="641.894" data-time-end="643.73"><span>So the compiler says, </span></span><span class="transcription-time-part" data-time-start="643.73" data-time-end="646.17"><span>Oh, okay, we got to copy a string. </span></span><span class="transcription-time-part" data-time-start="646.17" data-time-end="648.169"><span>Did you tell me how to do that? </span></span><span class="transcription-time-part" data-time-start="648.169" data-time-end="649.69"><span>Did you tell me how to create </span></span><span class="transcription-time-part" data-time-start="649.69" data-time-end="651.73"><span>a string from another string? </span></span><span class="transcription-time-part" data-time-start="651.73" data-time-end="654.09"><span>And we did. We have a constructor </span></span><span class="transcription-time-part" data-time-start="654.09" data-time-end="655.19"><span>that says how to construct </span></span><span class="transcription-time-part" data-time-start="655.19" data-time-end="656.61"><span>a string from another string. </span></span><span class="transcription-time-part" data-time-start="656.61" data-time-end="657.97"><span>Qu says, Oh, okay. </span></span><span class="transcription-time-part" data-time-start="657.97" data-time-end="659.349"><span>Then instead of following what I would do, </span></span><span class="transcription-time-part" data-time-start="659.349" data-time-end="660.71"><span>which is copy the data members, </span></span><span class="transcription-time-part" data-time-start="660.71" data-time-end="661.909"><span>I'll do what you tell me. </span></span><span class="transcription-time-part" data-time-start="661.909" data-time-end="663.769"><span>So what I told you to do was to </span></span><span class="transcription-time-part" data-time-start="663.769" data-time-end="666.669"><span>take now now in the copy constructor, </span></span><span class="transcription-time-part" data-time-start="666.669" data-time-end="668.329"><span>that's what that constructors called. </span></span><span class="transcription-time-part" data-time-start="668.329" data-time-end="669.49"><span>In the constructor, it says, </span></span><span class="transcription-time-part" data-time-start="669.49" data-time-end="671.169"><span>how to copy one string, how </span></span><span class="transcription-time-part" data-time-start="671.169" data-time-end="673.09"><span>to create a string from another string, </span></span><span class="transcription-time-part" data-time-start="673.09" data-time-end="676.15"><span>the object being constructed </span></span><span class="transcription-time-part" data-time-start="676.15" data-time-end="680.939"><span>is the one that this pointer points to. </span></span><span class="transcription-time-part" data-time-start="680.939" data-time-end="682.74"><span>Remember, </span></span><span class="transcription-time-part" data-time-start="682.74" data-time-end="685.92"><span>every member function has a this pointer </span></span><span class="transcription-time-part" data-time-start="685.92" data-time-end="689.67"><span>that points to the </span></span><span class="transcription-time-part" data-time-start="689.67" data-time-end="690.909"><span>object the function is called on. </span></span><span class="transcription-time-part" data-time-start="690.909" data-time-end="692.469"><span>So in this case, T is </span></span><span class="transcription-time-part" data-time-start="692.469" data-time-end="694.51"><span>the one that's being constructed, </span></span><span class="transcription-time-part" data-time-start="694.51" data-time-end="696.889"><span>so that this pointer is pointing to </span></span><span class="transcription-time-part" data-time-start="696.889" data-time-end="699.949"><span>T. And the parameter, </span></span><span class="transcription-time-part" data-time-start="699.949" data-time-end="701.829"><span>the thing we're copying from </span></span><span class="transcription-time-part" data-time-start="701.829" data-time-end="703.769"><span>other let's go to be </span></span><span class="transcription-time-part" data-time-start="703.769" data-time-end="705.49"><span>F. So other is a reference to a strain. </span></span><span class="transcription-time-part" data-time-start="705.49" data-time-end="707.449"><span>So other will be another name for S. </span></span><span class="transcription-time-part" data-time-start="707.449" data-time-end="709.669"><span>So copy in </span></span><span class="transcription-time-part" data-time-start="709.669" data-time-end="710.889"><span>the constructor that I just written, </span></span><span class="transcription-time-part" data-time-start="710.889" data-time-end="712.61"><span>that copy constructor, </span></span><span class="transcription-time-part" data-time-start="712.61" data-time-end="715.029"><span>S plays the role of other. </span></span><span class="transcription-time-part" data-time-start="715.029" data-time-end="716.989"><span>So what did we say to do? We said, </span></span><span class="transcription-time-part" data-time-start="716.989" data-time-end="718.929"><span>set my own length to </span></span><span class="transcription-time-part" data-time-start="718.929" data-time-end="723.639"><span>the other guy's length. Okay. </span></span><span class="transcription-time-part" data-time-start="723.639" data-time-end="726.919"><span>Then I said, dynamically </span></span><span class="transcription-time-part" data-time-start="726.919" data-time-end="730.4"><span>allocate an array of N plus one characters. </span></span><span class="transcription-time-part" data-time-start="730.4" data-time-end="732.52"><span>So five plus one is six, </span></span><span class="transcription-time-part" data-time-start="732.52" data-time-end="734.039"><span>dynamically allocate an array of </span></span><span class="transcription-time-part" data-time-start="734.039" data-time-end="736.24"><span>six characters and store </span></span><span class="transcription-time-part" data-time-start="736.24" data-time-end="740.999"><span>a position store the pointer into my text. </span></span><span class="transcription-time-part" data-time-start="741.64" data-time-end="745.939"><span>Okay. Then the last thing I said was </span></span><span class="transcription-time-part" data-time-start="745.939" data-time-end="749.12"><span>string copy into my text </span></span><span class="transcription-time-part" data-time-start="749.12" data-time-end="751.299"><span>the other guy's text. </span></span><span class="transcription-time-part" data-time-start="751.299" data-time-end="753.639"><span>And that'll copy the characters </span></span><span class="transcription-time-part" data-time-start="753.639" data-time-end="756.299"><span>up to and including Zerobte. </span></span><span class="transcription-time-part" data-time-start="756.299" data-time-end="759.84"><span>And so when that constructor finishes, </span></span><span class="transcription-time-part" data-time-start="761.19" data-time-end="764.549"><span>when that constructor finishes, </span></span><span class="transcription-time-part" data-time-start="764.67" data-time-end="769.089"><span>here's T. It looks like a copy of S, </span></span><span class="transcription-time-part" data-time-start="769.089" data-time-end="770.369"><span>and in fact, it's totally </span></span><span class="transcription-time-part" data-time-start="770.369" data-time-end="771.85"><span>independent of S now. </span></span><span class="transcription-time-part" data-time-start="771.85" data-time-end="774.029"><span>So whatever we do to T has </span></span><span class="transcription-time-part" data-time-start="774.029" data-time-end="776.25"><span>no effect on S. Perfect. </span></span><span class="transcription-time-part" data-time-start="776.25" data-time-end="778.369"><span>That's exactly what copying should do. </span></span><span class="transcription-time-part" data-time-start="778.369" data-time-end="781.53"><span>So now the function </span></span><span class="transcription-time-part" data-time-start="781.53" data-time-end="782.949"><span>can do whatever it wants to T. </span></span><span class="transcription-time-part" data-time-start="782.949" data-time-end="784.389"><span>If it wants to call some </span></span><span class="transcription-time-part" data-time-start="784.389" data-time-end="785.51"><span>member function of string </span></span><span class="transcription-time-part" data-time-start="785.51" data-time-end="788.889"><span>that'll let us change into a J, that's fine. </span></span><span class="transcription-time-part" data-time-start="788.889" data-time-end="792.689"><span>Has no effect on S. Eventually, </span></span><span class="transcription-time-part" data-time-start="792.689" data-time-end="794.984"><span>when we leave the function F, </span></span><span class="transcription-time-part" data-time-start="794.984" data-time-end="797.04"><span>T will be destroyed. </span></span><span class="transcription-time-part" data-time-start="797.04" data-time-end="798.639"><span>The destructor will be called on </span></span><span class="transcription-time-part" data-time-start="798.639" data-time-end="799.799"><span>T. The destructor will </span></span><span class="transcription-time-part" data-time-start="799.799" data-time-end="801.6"><span>get rid of that storage. </span></span><span class="transcription-time-part" data-time-start="801.6" data-time-end="804.14"><span>So the body of the destructor for strength, </span></span><span class="transcription-time-part" data-time-start="804.14" data-time-end="805.859"><span>gets rid of that storage, and </span></span><span class="transcription-time-part" data-time-start="805.859" data-time-end="808.26"><span>then step two of destruction. </span></span><span class="transcription-time-part" data-time-start="808.26" data-time-end="809.379"><span>Well, these are built in </span></span><span class="transcription-time-part" data-time-start="809.379" data-time-end="810.9"><span>types, so nothing happens. </span></span><span class="transcription-time-part" data-time-start="810.9" data-time-end="813.46"><span>And so then T can go away safely. </span></span><span class="transcription-time-part" data-time-start="813.46" data-time-end="815.119"><span>And we're back here, and </span></span><span class="transcription-time-part" data-time-start="815.119" data-time-end="816.959"><span>S is in perfectly good shape, </span></span><span class="transcription-time-part" data-time-start="816.959" data-time-end="819.979"><span>unchanged, exactly what we want. </span></span><span class="transcription-time-part" data-time-start="820.18" data-time-end="823.979"><span>So we have solved the problem of, </span></span><span class="transcription-time-part" data-time-start="823.979" data-time-end="826.839"><span>you know, the undefined behavior that </span></span><span class="transcription-time-part" data-time-start="826.839" data-time-end="828.08"><span>will happen if we don't </span></span><span class="transcription-time-part" data-time-start="828.08" data-time-end="830.34"><span>properly copy the string. </span></span><span class="transcription-time-part" data-time-start="830.34" data-time-end="832.56"><span>So let me go back and look at </span></span><span class="transcription-time-part" data-time-start="832.56" data-time-end="833.9"><span>some terminology and address </span></span><span class="transcription-time-part" data-time-start="833.9" data-time-end="834.58"><span>some of the issues </span></span><span class="transcription-time-part" data-time-start="834.58" data-time-end="836.819"><span>that people </span></span><span class="transcription-time-part" data-time-start="836.819" data-time-end="840.58"><span>are some people are no doubt thinking. </span></span><span class="transcription-time-part" data-time-start="840.58" data-time-end="842.46"><span>So first of all, terminology, </span></span><span class="transcription-time-part" data-time-start="842.46" data-time-end="844.359"><span>this constructor is </span></span><span class="transcription-time-part" data-time-start="844.359" data-time-end="847.32"><span>called the copy constructor. </span></span><span class="transcription-time-part" data-time-start="847.32" data-time-end="850.52"><span>So this is the copy constructor. </span></span><span class="transcription-time-part" data-time-start="850.52" data-time-end="852.639"><span>The copy constructor is </span></span><span class="transcription-time-part" data-time-start="852.639" data-time-end="855.76"><span>called whenever a string </span></span><span class="transcription-time-part" data-time-start="855.76" data-time-end="857.9"><span>is being created from another string. </span></span><span class="transcription-time-part" data-time-start="857.9" data-time-end="863.879"><span>So there's a a number </span></span><span class="transcription-time-part" data-time-start="863.879" data-time-end="866.06"><span>of contexts where that happens. </span></span><span class="transcription-time-part" data-time-start="866.42" data-time-end="874.219"><span>So if I create a string, X from S, </span></span><span class="transcription-time-part" data-time-start="874.219" data-time-end="875.76"><span>there is creating </span></span><span class="transcription-time-part" data-time-start="875.76" data-time-end="877.16"><span>a string from another string. </span></span><span class="transcription-time-part" data-time-start="877.16" data-time-end="879.58"><span>That would call the copy constructor. </span></span><span class="transcription-time-part" data-time-start="879.94" data-time-end="881.879"><span>Here's another way to create </span></span><span class="transcription-time-part" data-time-start="881.879" data-time-end="884.14"><span>a string from another string. </span></span><span class="transcription-time-part" data-time-start="884.14" data-time-end="885.499"><span>I'm creating a string X, </span></span><span class="transcription-time-part" data-time-start="885.499" data-time-end="886.42"><span>and it's a copy </span></span><span class="transcription-time-part" data-time-start="886.42" data-time-end="888.2"><span>of it's going to come from that string </span></span><span class="transcription-time-part" data-time-start="888.2" data-time-end="892.12"><span>S. Also, passing by value. </span></span><span class="transcription-time-part" data-time-start="892.12" data-time-end="893.46"><span>In this case, if we pass </span></span><span class="transcription-time-part" data-time-start="893.46" data-time-end="895.48"><span>a string by value to a function, </span></span><span class="transcription-time-part" data-time-start="895.48" data-time-end="898.579"><span>that will call the copying instructor. </span></span><span class="transcription-time-part" data-time-start="899.15" data-time-end="902.27"><span>So that's built into the language. </span></span><span class="transcription-time-part" data-time-start="902.27" data-time-end="905.33"><span>The language recognizes passing by value. </span></span><span class="transcription-time-part" data-time-start="905.33" data-time-end="906.669"><span>If your parameter is </span></span><span class="transcription-time-part" data-time-start="906.669" data-time-end="908.49"><span>a string, not a pointer to a string, </span></span><span class="transcription-time-part" data-time-start="908.49" data-time-end="909.809"><span>not a reference to a string, if </span></span><span class="transcription-time-part" data-time-start="909.809" data-time-end="910.99"><span>your parameter is a string </span></span><span class="transcription-time-part" data-time-start="910.99" data-time-end="912.45"><span>and you're passing a string, </span></span><span class="transcription-time-part" data-time-start="912.45" data-time-end="914.049"><span>call the copy constructor. </span></span><span class="transcription-time-part" data-time-start="914.049" data-time-end="916.53"><span>Also, if you're returning </span></span><span class="transcription-time-part" data-time-start="916.53" data-time-end="917.63"><span>a value from a function, </span></span><span class="transcription-time-part" data-time-start="917.63" data-time-end="919.63"><span>a value, not a pointer or a reference. </span></span><span class="transcription-time-part" data-time-start="919.63" data-time-end="923.129"><span>So in other words, I I I have </span></span><span class="transcription-time-part" data-time-start="923.129" data-time-end="925.379"><span>some function blah if </span></span><span class="transcription-time-part" data-time-start="925.379" data-time-end="926.719"><span>I have some function blah </span></span><span class="transcription-time-part" data-time-start="926.719" data-time-end="929.259"><span>that declares a local variable </span></span><span class="transcription-time-part" data-time-start="929.259" data-time-end="931.019"><span>for some string and builds </span></span><span class="transcription-time-part" data-time-start="931.019" data-time-end="932.639"><span>up some answer in there and </span></span><span class="transcription-time-part" data-time-start="932.639" data-time-end="933.839"><span>ultimately decides to </span></span><span class="transcription-time-part" data-time-start="933.839" data-time-end="935.44"><span>return the value of that string. </span></span><span class="transcription-time-part" data-time-start="935.44" data-time-end="940.58"><span>So notice blah is returning a string, </span></span><span class="transcription-time-part" data-time-start="940.58" data-time-end="941.9"><span>not a pointer to a string, </span></span><span class="transcription-time-part" data-time-start="941.9" data-time-end="944.16"><span>not a reference to a string, but a string. </span></span><span class="transcription-time-part" data-time-start="944.16" data-time-end="947.359"><span>That means the expression here is value </span></span><span class="transcription-time-part" data-time-start="947.359" data-time-end="949.139"><span>will be copied back </span></span><span class="transcription-time-part" data-time-start="949.139" data-time-end="950.78"><span>to the caller of the function. </span></span><span class="transcription-time-part" data-time-start="950.78" data-time-end="953.4"><span>So whoever calls the function blah gets </span></span><span class="transcription-time-part" data-time-start="953.4" data-time-end="954.659"><span>a copy of the </span></span><span class="transcription-time-part" data-time-start="954.659" data-time-end="956.719"><span>final value of this local variable. </span></span><span class="transcription-time-part" data-time-start="956.719" data-time-end="959.38"><span>How is that copied from the function </span></span><span class="transcription-time-part" data-time-start="959.38" data-time-end="960.54"><span>back to the caller </span></span><span class="transcription-time-part" data-time-start="960.54" data-time-end="962.399"><span>through the copy constructor? </span></span><span class="transcription-time-part" data-time-start="962.399" data-time-end="964.539"><span>So those are the circumstances </span></span><span class="transcription-time-part" data-time-start="964.539" data-time-end="966.9"><span>where the copy constructor gets called. </span></span><span class="transcription-time-part" data-time-start="966.9" data-time-end="970.259"><span>And whenever you have </span></span><span class="transcription-time-part" data-time-start="970.259" data-time-end="972.239"><span>an object that has </span></span><span class="transcription-time-part" data-time-start="972.239" data-time-end="974.56"><span>some resource that it holds, </span></span><span class="transcription-time-part" data-time-start="974.56" data-time-end="975.159"><span>you got to think </span></span><span class="transcription-time-part" data-time-start="975.159" data-time-end="977.359"><span>about the copying behavior there. </span></span><span class="transcription-time-part" data-time-start="977.359" data-time-end="979.019"><span>You got to think, What do I want to </span></span><span class="transcription-time-part" data-time-start="979.019" data-time-end="981.22"><span>do if one of these things gets copied? </span></span><span class="transcription-time-part" data-time-start="981.22" data-time-end="983.36"><span>What do I do about the resource? </span></span><span class="transcription-time-part" data-time-start="983.36" data-time-end="985.38"><span>Do I have both objects </span></span><span class="transcription-time-part" data-time-start="985.38" data-time-end="986.82"><span>share the same resource? </span></span><span class="transcription-time-part" data-time-start="986.82" data-time-end="989.22"><span>That usually leads to problems. </span></span><span class="transcription-time-part" data-time-start="989.22" data-time-end="991.419"><span>So, you know, </span></span><span class="transcription-time-part" data-time-start="991.419" data-time-end="992.999"><span>maybe somehow figuring out </span></span><span class="transcription-time-part" data-time-start="992.999" data-time-end="994.239"><span>making a copy of the resource. </span></span><span class="transcription-time-part" data-time-start="994.239" data-time-end="995.42"><span>Or if it doesn't make sense </span></span><span class="transcription-time-part" data-time-start="995.42" data-time-end="996.62"><span>to make a copy of the resource, </span></span><span class="transcription-time-part" data-time-start="996.62" data-time-end="999.259"><span>then maybe preventing copying entirely, </span></span><span class="transcription-time-part" data-time-start="999.259" data-time-end="1001.079"><span>which is something we're </span></span><span class="transcription-time-part" data-time-start="1001.079" data-time-end="1001.8"><span>not going to do right now. </span></span><span class="transcription-time-part" data-time-start="1001.8" data-time-end="1003.72"><span>We'll see how to do that later. </span></span><span class="transcription-time-part" data-time-start="1004.24" data-time-end="1006.079"><span>Okay. </span></span><span class="transcription-time-part" data-time-start="1006.079" data-time-end="1008.419"><span>Another question </span></span><span class="transcription-time-part" data-time-start="1008.419" data-time-end="1010.22"><span>that often comes up at this point. </span></span><span class="transcription-time-part" data-time-start="1010.22" data-time-end="1011.28"><span>I haven't been looking </span></span><span class="transcription-time-part" data-time-start="1011.28" data-time-end="1012.06"><span>at the questions right now, </span></span><span class="transcription-time-part" data-time-start="1012.06" data-time-end="1014.539"><span>but I'm sure it's been asked already is, </span></span><span class="transcription-time-part" data-time-start="1014.539" data-time-end="1017.9"><span>you know, why am I passing this by reference? </span></span><span class="transcription-time-part" data-time-start="1017.9" data-time-end="1021.14"><span>Could I also pass it by value? </span></span><span class="transcription-time-part" data-time-start="1021.14" data-time-end="1023.44"><span>Well, let's see the variations. </span></span><span class="transcription-time-part" data-time-start="1023.88" data-time-end="1030.13"><span>We could, if we want, declare </span></span><span class="transcription-time-part" data-time-start="1030.13" data-time-end="1034.05"><span>the copy constructor this way. </span></span><span class="transcription-time-part" data-time-start="1034.05" data-time-end="1036.509"><span>It's pretty rare, but you can do this </span></span><span class="transcription-time-part" data-time-start="1036.509" data-time-end="1037.769"><span>where I'm creating </span></span><span class="transcription-time-part" data-time-start="1037.769" data-time-end="1039.63"><span>a string from another string, </span></span><span class="transcription-time-part" data-time-start="1039.63" data-time-end="1041.929"><span>but the copy constructor itself is </span></span><span class="transcription-time-part" data-time-start="1041.929" data-time-end="1043.51"><span>allowed to modify the string </span></span><span class="transcription-time-part" data-time-start="1043.51" data-time-end="1045.349"><span>that's being copied from. </span></span><span class="transcription-time-part" data-time-start="1045.349" data-time-end="1046.97"><span>Well, it's kind of weird </span></span><span class="transcription-time-part" data-time-start="1046.97" data-time-end="1048.169"><span>because usually when you think </span></span><span class="transcription-time-part" data-time-start="1048.169" data-time-end="1049.409"><span>about making copies of </span></span><span class="transcription-time-part" data-time-start="1049.409" data-time-end="1051.009"><span>something, you say, Well, </span></span><span class="transcription-time-part" data-time-start="1051.009" data-time-end="1052.589"><span>the process of making a copy of </span></span><span class="transcription-time-part" data-time-start="1052.589" data-time-end="1054.829"><span>something should not modify the original, </span></span><span class="transcription-time-part" data-time-start="1054.829" data-time-end="1056.31"><span>and that's why it's usually </span></span><span class="transcription-time-part" data-time-start="1056.31" data-time-end="1057.809"><span>passed by constant reference. </span></span><span class="transcription-time-part" data-time-start="1057.809" data-time-end="1060.349"><span>But here's a circumstance where it might be. </span></span><span class="transcription-time-part" data-time-start="1060.349" data-time-end="1062.689"><span>Suppose that string for </span></span><span class="transcription-time-part" data-time-start="1062.689" data-time-end="1064.989"><span>some performance monitoring reasons or </span></span><span class="transcription-time-part" data-time-start="1064.989" data-time-end="1066.949"><span>something is keeping track </span></span><span class="transcription-time-part" data-time-start="1066.949" data-time-end="1070.95"><span>of the number of copies made from the string. </span></span><span class="transcription-time-part" data-time-start="1070.95" data-time-end="1072.889"><span>So maybe we have some kind of </span></span><span class="transcription-time-part" data-time-start="1072.889" data-time-end="1076.29"><span>variable member function data member </span></span><span class="transcription-time-part" data-time-start="1076.29" data-time-end="1077.289"><span>that's going to be the number of </span></span><span class="transcription-time-part" data-time-start="1077.289" data-time-end="1078.789"><span>copies that have been made from me. </span></span><span class="transcription-time-part" data-time-start="1078.789" data-time-end="1080.289"><span>So when I'm first created, </span></span><span class="transcription-time-part" data-time-start="1080.289" data-time-end="1082.369"><span>we'll initialize that to zero, let's say. </span></span><span class="transcription-time-part" data-time-start="1082.369" data-time-end="1087.289"><span>And then anytime the string is copied. </span></span><span class="transcription-time-part" data-time-start="1087.289" data-time-end="1089.469"><span>The copy constructor, in addition to </span></span><span class="transcription-time-part" data-time-start="1089.469" data-time-end="1091.95"><span>copying what it's doing </span></span><span class="transcription-time-part" data-time-start="1091.95" data-time-end="1093.109"><span>with the mtext, et cetera, </span></span><span class="transcription-time-part" data-time-start="1093.109" data-time-end="1096.669"><span>is also adding one to the number of copies </span></span><span class="transcription-time-part" data-time-start="1096.669" data-time-end="1100.789"><span>made from the object being copied from. </span></span><span class="transcription-time-part" data-time-start="1100.789" data-time-end="1102.489"><span>So it is modifying </span></span><span class="transcription-time-part" data-time-start="1102.489" data-time-end="1104.35"><span>the original object by saying, </span></span><span class="transcription-time-part" data-time-start="1104.35" data-time-end="1105.809"><span>Hey, one more copy of you has </span></span><span class="transcription-time-part" data-time-start="1105.809" data-time-end="1108.349"><span>been made. Record that for yourself. </span></span><span class="transcription-time-part" data-time-start="1108.38" data-time-end="1112.82"><span>That's okay. It's uncommon, but it's okay. </span></span><span class="transcription-time-part" data-time-start="1112.82" data-time-end="1114.28"><span>Usually, it's one of these things </span></span><span class="transcription-time-part" data-time-start="1114.28" data-time-end="1116.239"><span>where notice that doesn't really </span></span><span class="transcription-time-part" data-time-start="1116.239" data-time-end="1118.099"><span>conceptually modify </span></span><span class="transcription-time-part" data-time-start="1118.099" data-time-end="1120.219"><span>the strings value in any significant way. </span></span><span class="transcription-time-part" data-time-start="1120.219" data-time-end="1121.519"><span>The original guy still has </span></span><span class="transcription-time-part" data-time-start="1121.519" data-time-end="1123.38"><span>the same text and the same length. </span></span><span class="transcription-time-part" data-time-start="1123.38" data-time-end="1125.299"><span>It's just another little bit </span></span><span class="transcription-time-part" data-time-start="1125.299" data-time-end="1127.339"><span>of information about it that, </span></span><span class="transcription-time-part" data-time-start="1127.339" data-time-end="1130.659"><span>you know, we might want to keep track of. </span></span><span class="transcription-time-part" data-time-start="1131.46" data-time-end="1134"><span>So this is okay, </span></span><span class="transcription-time-part" data-time-start="1134" data-time-end="1136.4"><span>rather uncommon, but okay. </span></span><span class="transcription-time-part" data-time-start="1136.4" data-time-end="1139.38"><span>What definitely is not legal, </span></span><span class="transcription-time-part" data-time-start="1139.38" data-time-end="1142.999"><span>and I'll show you why is what </span></span><span class="transcription-time-part" data-time-start="1142.999" data-time-end="1144.64"><span>if we have the copy constructor </span></span><span class="transcription-time-part" data-time-start="1144.64" data-time-end="1147.435"><span>take its argument pass by value? </span></span><span class="transcription-time-part" data-time-start="1147.435" data-time-end="1149.949"><span>That is, we decide, </span></span><span class="transcription-time-part" data-time-start="1149.949" data-time-end="1151.21"><span>here's how you create a string </span></span><span class="transcription-time-part" data-time-start="1151.21" data-time-end="1152.53"><span>from another string, </span></span><span class="transcription-time-part" data-time-start="1152.53" data-time-end="1154.989"><span>and my copy instructor here or </span></span><span class="transcription-time-part" data-time-start="1154.989" data-time-end="1156.31"><span>my supposed copy constructor </span></span><span class="transcription-time-part" data-time-start="1156.31" data-time-end="1156.989"><span>here is going to take </span></span><span class="transcription-time-part" data-time-start="1156.989" data-time-end="1157.889"><span>us argument passed by </span></span><span class="transcription-time-part" data-time-start="1157.889" data-time-end="1159.989"><span>value, something like that. </span></span><span class="transcription-time-part" data-time-start="1159.989" data-time-end="1163.049"><span>Well, this is illegal </span></span><span class="transcription-time-part" data-time-start="1163.049" data-time-end="1165.81"><span>because it doesn't make sense. </span></span><span class="transcription-time-part" data-time-start="1165.81" data-time-end="1169.87"><span>And let me show you why. So suppose </span></span><span class="transcription-time-part" data-time-start="1169.87" data-time-end="1171.41"><span>that were my copy constructor. </span></span><span class="transcription-time-part" data-time-start="1171.41" data-time-end="1174.629"><span>Then here's what happens. We got S created. </span></span><span class="transcription-time-part" data-time-start="1174.629" data-time-end="1175.549"><span>We're calling the function </span></span><span class="transcription-time-part" data-time-start="1175.549" data-time-end="1177.789"><span>F. S is being passed </span></span><span class="transcription-time-part" data-time-start="1177.789" data-time-end="1179.27"><span>by value to create </span></span><span class="transcription-time-part" data-time-start="1179.27" data-time-end="1181.389"><span>T. So this brand new object T </span></span><span class="transcription-time-part" data-time-start="1181.389" data-time-end="1184.689"><span>is going to be created as a copy of S. </span></span><span class="transcription-time-part" data-time-start="1184.689" data-time-end="1187.359"><span>So to </span></span><span class="transcription-time-part" data-time-start="1187.359" data-time-end="1188.719"><span>create this brand new object </span></span><span class="transcription-time-part" data-time-start="1188.719" data-time-end="1189.979"><span>T as a copy of S, </span></span><span class="transcription-time-part" data-time-start="1189.979" data-time-end="1191.94"><span>we got to call the copy constructor. </span></span><span class="transcription-time-part" data-time-start="1191.94" data-time-end="1194.799"><span>Now, in the copy constructor, </span></span><span class="transcription-time-part" data-time-start="1194.799" data-time-end="1198.519"><span>the object being created is T, </span></span><span class="transcription-time-part" data-time-start="1198.519" data-time-end="1201.559"><span>so that this pointer points to T. </span></span><span class="transcription-time-part" data-time-start="1202.36" data-time-end="1206.319"><span>And the parameter </span></span><span class="transcription-time-part" data-time-start="1206.32" data-time-end="1209.779"><span>that is going to come from S, </span></span><span class="transcription-time-part" data-time-start="1209.779" data-time-end="1214.459"><span>the parameter is other passed by value. </span></span><span class="transcription-time-part" data-time-start="1214.459" data-time-end="1216.72"><span>So it's a brand new string. </span></span><span class="transcription-time-part" data-time-start="1216.72" data-time-end="1217.479"><span>So there's going to be </span></span><span class="transcription-time-part" data-time-start="1217.479" data-time-end="1219.959"><span>this brand new string called O </span></span><span class="transcription-time-part" data-time-start="1222.06" data-time-end="1223.619"><span>That's going to be </span></span><span class="transcription-time-part" data-time-start="1223.619" data-time-end="1226.419"><span>initialized as a copy of S. </span></span><span class="transcription-time-part" data-time-start="1226.74" data-time-end="1228.879"><span>Well, how is other going </span></span><span class="transcription-time-part" data-time-start="1228.879" data-time-end="1230.259"><span>to be initialized as a copy of </span></span><span class="transcription-time-part" data-time-start="1230.259" data-time-end="1233.36"><span>S by calling the copy constructor? </span></span><span class="transcription-time-part" data-time-start="1233.36" data-time-end="1235.499"><span>So in order to get S </span></span><span class="transcription-time-part" data-time-start="1235.499" data-time-end="1238.939"><span>passed to other so that then we can create T, </span></span><span class="transcription-time-part" data-time-start="1238.939" data-time-end="1241.28"><span>we've got to call the copy constructor, </span></span><span class="transcription-time-part" data-time-start="1241.28" data-time-end="1242.979"><span>which will say, Okay, </span></span><span class="transcription-time-part" data-time-start="1242.979" data-time-end="1246.959"><span>this pointer will point to other, </span></span><span class="transcription-time-part" data-time-start="1246.959" data-time-end="1249.499"><span>and S is going to be </span></span><span class="transcription-time-part" data-time-start="1249.499" data-time-end="1250.759"><span>passed to the parameter to </span></span><span class="transcription-time-part" data-time-start="1250.759" data-time-end="1252.16"><span>that call to the copy constructor, </span></span><span class="transcription-time-part" data-time-start="1252.16" data-time-end="1254.58"><span>which is passed by value, </span></span><span class="transcription-time-part" data-time-start="1254.58" data-time-end="1258.589"><span>which is a second instance of other, </span></span><span class="transcription-time-part" data-time-start="1258.589" data-time-end="1260.309"><span>which has to be initialized from </span></span><span class="transcription-time-part" data-time-start="1260.309" data-time-end="1262.409"><span>S. Once we have done that, </span></span><span class="transcription-time-part" data-time-start="1262.409" data-time-end="1264.129"><span>then we can go to </span></span><span class="transcription-time-part" data-time-start="1264.129" data-time-end="1265.41"><span>the copy constructor in order </span></span><span class="transcription-time-part" data-time-start="1265.41" data-time-end="1266.65"><span>to copy that into here, </span></span><span class="transcription-time-part" data-time-start="1266.65" data-time-end="1267.989"><span>and once that's done, we can go </span></span><span class="transcription-time-part" data-time-start="1267.989" data-time-end="1269.15"><span>to the copying instructor and finish </span></span><span class="transcription-time-part" data-time-start="1269.15" data-time-end="1270.75"><span>the copying instructive body to copy it into </span></span><span class="transcription-time-part" data-time-start="1270.75" data-time-end="1272.949"><span>T. So you see where this is going. </span></span><span class="transcription-time-part" data-time-start="1272.949" data-time-end="1275.19"><span>The copy constructor defines </span></span><span class="transcription-time-part" data-time-start="1275.19" data-time-end="1277.62"><span>what it means to pass by value. </span></span><span class="transcription-time-part" data-time-start="1277.62" data-time-end="1279.43"><span>How do you pass by value? </span></span><span class="transcription-time-part" data-time-start="1279.43" data-time-end="1280.449"><span>You make a copy by </span></span><span class="transcription-time-part" data-time-start="1280.449" data-time-end="1281.83"><span>calling the copy constructor. </span></span><span class="transcription-time-part" data-time-start="1281.83" data-time-end="1283.409"><span>So if the copy constructor </span></span><span class="transcription-time-part" data-time-start="1283.409" data-time-end="1286.189"><span>itself took its argument pass by value, </span></span><span class="transcription-time-part" data-time-start="1286.189" data-time-end="1288.71"><span>you've got this infinite circular definition. </span></span><span class="transcription-time-part" data-time-start="1288.71" data-time-end="1290.629"><span>Well, how do we get the argument to it by </span></span><span class="transcription-time-part" data-time-start="1290.629" data-time-end="1292.61"><span>calling the copy constructor? Oh, okay. </span></span><span class="transcription-time-part" data-time-start="1292.61" data-time-end="1294.049"><span>Well, how do we get the argument to </span></span><span class="transcription-time-part" data-time-start="1294.049" data-time-end="1295.53"><span>that copy constructors argument </span></span><span class="transcription-time-part" data-time-start="1295.53" data-time-end="1297.23"><span>by calling the copy constructor? </span></span><span class="transcription-time-part" data-time-start="1297.23" data-time-end="1300.749"><span>It makes no sense. So for </span></span><span class="transcription-time-part" data-time-start="1300.749" data-time-end="1303.729"><span>that reason, no, no, no, no, no. </span></span><span class="transcription-time-part" data-time-start="1303.89" data-time-end="1308.009"><span>The other parameter is passed by reference. </span></span><span class="transcription-time-part" data-time-start="1308.009" data-time-end="1309.67"><span>It's not going to be a brand new string </span></span><span class="transcription-time-part" data-time-start="1309.67" data-time-end="1311.549"><span>as a copy of the original. </span></span><span class="transcription-time-part" data-time-start="1311.549" data-time-end="1314.639"><span>It's another name for the original. </span></span><span class="transcription-time-part" data-time-start="1314.639" data-time-end="1317.569"><span>So is another name for S, </span></span><span class="transcription-time-part" data-time-start="1317.569" data-time-end="1319.609"><span>and that's why we don't go crazy here. </span></span><span class="transcription-time-part" data-time-start="1319.609" data-time-end="1321.069"><span>So let me put this back here. </span></span><span class="transcription-time-part" data-time-start="1321.069" data-time-end="1323.209"><span>We'll pass it by reference, </span></span><span class="transcription-time-part" data-time-start="1323.209" data-time-end="1324.89"><span>and in fact, of course, </span></span><span class="transcription-time-part" data-time-start="1324.89" data-time-end="1326.329"><span>it'll be constant reference </span></span><span class="transcription-time-part" data-time-start="1326.329" data-time-end="1328.889"><span>because we don't modify the original object. </span></span><span class="transcription-time-part" data-time-start="1328.889" data-time-end="1330.469"><span>So let's make that promise. </span></span><span class="transcription-time-part" data-time-start="1330.469" data-time-end="1332.129"><span>So now we're good. Back to </span></span><span class="transcription-time-part" data-time-start="1332.129" data-time-end="1333.59"><span>being a legal copy instructor. </span></span><span class="transcription-time-part" data-time-start="1333.59" data-time-end="1336.289"><span>Okay. Now, the other question </span></span><span class="transcription-time-part" data-time-start="1336.289" data-time-end="1338.029"><span>that people ask is, </span></span><span class="transcription-time-part" data-time-start="1338.029" data-time-end="1340.829"><span>well, wait a minute. </span></span><span class="transcription-time-part" data-time-start="1340.829" data-time-end="1347.409"><span>I'm talking about Men of O and </span></span><span class="transcription-time-part" data-time-start="1347.409" data-time-end="1354.169"><span>text of other Not Mamnin Mam text, </span></span><span class="transcription-time-part" data-time-start="1354.169" data-time-end="1357.769"><span>but the private members of the other string. </span></span><span class="transcription-time-part" data-time-start="1357.769" data-time-end="1360.33"><span>Is that allowed? </span></span><span class="transcription-time-part" data-time-start="1360.33" data-time-end="1361.849"><span>The answer is yes. </span></span><span class="transcription-time-part" data-time-start="1361.849" data-time-end="1363.57"><span>You might say, Well, wait a minute. </span></span><span class="transcription-time-part" data-time-start="1363.57" data-time-end="1366.029"><span>I thought that if </span></span><span class="transcription-time-part" data-time-start="1366.029" data-time-end="1368.129"><span>a member is declared private, </span></span><span class="transcription-time-part" data-time-start="1368.129" data-time-end="1371.629"><span>then the only place you can talk about them </span></span><span class="transcription-time-part" data-time-start="1371.629" data-time-end="1375.589"><span>are in the member functions </span></span><span class="transcription-time-part" data-time-start="1375.589" data-time-end="1378.649"><span>of the class they belong to. </span></span><span class="transcription-time-part" data-time-start="1378.649" data-time-end="1379.889"><span>I'll say, Yes, </span></span><span class="transcription-time-part" data-time-start="1379.889" data-time-end="1381.589"><span>that's exactly what's happening here. </span></span><span class="transcription-time-part" data-time-start="1381.589" data-time-end="1382.729"><span>You say, but I </span></span><span class="transcription-time-part" data-time-start="1382.729" data-time-end="1384.249"><span>thought you could only talk about </span></span><span class="transcription-time-part" data-time-start="1384.249" data-time-end="1385.469"><span>the private members of </span></span><span class="transcription-time-part" data-time-start="1385.469" data-time-end="1388.329"><span>the object that this pointer points to. </span></span><span class="transcription-time-part" data-time-start="1388.329" data-time-end="1392.91"><span>No, I never said that. I've never in 31, </span></span><span class="transcription-time-part" data-time-start="1392.91" data-time-end="1394.469"><span>never prior in 32. </span></span><span class="transcription-time-part" data-time-start="1394.469" data-time-end="1396.529"><span>That is, you know, talking about </span></span><span class="transcription-time-part" data-time-start="1396.529" data-time-end="1398.689"><span>MLN by itself is just shorthand for </span></span><span class="transcription-time-part" data-time-start="1398.689" data-time-end="1403.83"><span>saying this arrow LN and this arrow text. </span></span><span class="transcription-time-part" data-time-start="1403.83" data-time-end="1405.329"><span>So you know that </span></span><span class="transcription-time-part" data-time-start="1405.329" data-time-end="1406.289"><span>for the object you </span></span><span class="transcription-time-part" data-time-start="1406.289" data-time-end="1407.409"><span>called the member function on, </span></span><span class="transcription-time-part" data-time-start="1407.409" data-time-end="1408.689"><span>of course, you could talk about the </span></span><span class="transcription-time-part" data-time-start="1408.689" data-time-end="1410.969"><span>private members for that object. </span></span><span class="transcription-time-part" data-time-start="1410.969" data-time-end="1412.829"><span>But you can actually also </span></span><span class="transcription-time-part" data-time-start="1412.829" data-time-end="1414.649"><span>talk about the private members </span></span><span class="transcription-time-part" data-time-start="1414.649" data-time-end="1418.709"><span>of this one means Emlen. </span></span><span class="transcription-time-part" data-time-start="1418.709" data-time-end="1420.329"><span>You can also talk about </span></span><span class="transcription-time-part" data-time-start="1420.329" data-time-end="1422.889"><span>the private members of any string. </span></span><span class="transcription-time-part" data-time-start="1422.889" data-time-end="1424.61"><span>So it's not just the string </span></span><span class="transcription-time-part" data-time-start="1424.61" data-time-end="1426.129"><span>that this pointer points to, </span></span><span class="transcription-time-part" data-time-start="1426.129" data-time-end="1427.569"><span>but a member function </span></span><span class="transcription-time-part" data-time-start="1427.569" data-time-end="1428.709"><span>of string can talk about </span></span><span class="transcription-time-part" data-time-start="1428.709" data-time-end="1431.13"><span>the private members of any string. </span></span><span class="transcription-time-part" data-time-start="1431.13" data-time-end="1432.529"><span>Why is that? </span></span><span class="transcription-time-part" data-time-start="1432.529" data-time-end="1435.59"><span>Well, that wasn't Strostrp's original idea. </span></span><span class="transcription-time-part" data-time-start="1435.59" data-time-end="1437.749"><span>He thought the idea should be </span></span><span class="transcription-time-part" data-time-start="1437.749" data-time-end="1439.23"><span>that if I call </span></span><span class="transcription-time-part" data-time-start="1439.23" data-time-end="1440.949"><span>a member function on this object, </span></span><span class="transcription-time-part" data-time-start="1440.949" data-time-end="1443.229"><span>the member function can deal with </span></span><span class="transcription-time-part" data-time-start="1443.229" data-time-end="1446.129"><span>the private members only of this object, </span></span><span class="transcription-time-part" data-time-start="1446.129" data-time-end="1447.949"><span>not of other objects, not </span></span><span class="transcription-time-part" data-time-start="1447.949" data-time-end="1449.53"><span>even other objects of the same type. </span></span><span class="transcription-time-part" data-time-start="1449.53" data-time-end="1451.149"><span>That's what he originally planned to do. </span></span><span class="transcription-time-part" data-time-start="1451.149" data-time-end="1452.849"><span>And then he realized </span></span><span class="transcription-time-part" data-time-start="1452.849" data-time-end="1455.209"><span>the need for writing copy constructors, </span></span><span class="transcription-time-part" data-time-start="1455.209" data-time-end="1457.629"><span>and then he realized that, </span></span><span class="transcription-time-part" data-time-start="1457.629" data-time-end="1459.549"><span>oh, that can make </span></span><span class="transcription-time-part" data-time-start="1459.549" data-time-end="1461.85"><span>copy constructors very hard to write. </span></span><span class="transcription-time-part" data-time-start="1461.85" data-time-end="1463.429"><span>If I can't get at </span></span><span class="transcription-time-part" data-time-start="1463.429" data-time-end="1464.99"><span>the internals of the other guy, </span></span><span class="transcription-time-part" data-time-start="1464.99" data-time-end="1467.07"><span>then it might be hard </span></span><span class="transcription-time-part" data-time-start="1467.07" data-time-end="1468.269"><span>or even impossible for me </span></span><span class="transcription-time-part" data-time-start="1468.269" data-time-end="1469.72"><span>to write a copy constructor. </span></span><span class="transcription-time-part" data-time-start="1469.72" data-time-end="1472.069"><span>Now, depending on how </span></span><span class="transcription-time-part" data-time-start="1472.069" data-time-end="1474.41"><span>the string type is declared, </span></span><span class="transcription-time-part" data-time-start="1474.41" data-time-end="1476.49"><span>it may or may not be possible </span></span><span class="transcription-time-part" data-time-start="1476.49" data-time-end="1477.909"><span>to make a copy </span></span><span class="transcription-time-part" data-time-start="1477.909" data-time-end="1479.87"><span>from it using the public interface. </span></span><span class="transcription-time-part" data-time-start="1479.87" data-time-end="1481.969"><span>For example, if string has </span></span><span class="transcription-time-part" data-time-start="1481.969" data-time-end="1483.209"><span>a public function to </span></span><span class="transcription-time-part" data-time-start="1483.209" data-time-end="1485.05"><span>give you the length of the string, </span></span><span class="transcription-time-part" data-time-start="1485.05" data-time-end="1486.809"><span>you wouldn't need to talk about the </span></span><span class="transcription-time-part" data-time-start="1486.809" data-time-end="1488.51"><span>M Ln member or the other guy. </span></span><span class="transcription-time-part" data-time-start="1488.51" data-time-end="1490.21"><span>This could be a little harder. </span></span><span class="transcription-time-part" data-time-start="1490.21" data-time-end="1491.909"><span>How do you do a string copy from </span></span><span class="transcription-time-part" data-time-start="1491.909" data-time-end="1493.689"><span>the other If string does not have </span></span><span class="transcription-time-part" data-time-start="1493.689" data-time-end="1496.23"><span>a member function to give you back a pointer </span></span><span class="transcription-time-part" data-time-start="1496.23" data-time-end="1497.629"><span>to its own internal </span></span><span class="transcription-time-part" data-time-start="1497.629" data-time-end="1499.77"><span>representation, the character array, </span></span><span class="transcription-time-part" data-time-start="1499.77" data-time-end="1503.049"><span>then that could be a problem, but, </span></span><span class="transcription-time-part" data-time-start="1503.049" data-time-end="1504.869"><span>you know, maybe I could get </span></span><span class="transcription-time-part" data-time-start="1504.869" data-time-end="1507.449"><span>around that problem by I don't know, </span></span><span class="transcription-time-part" data-time-start="1507.449" data-time-end="1510.75"><span>maybe I could manually </span></span><span class="transcription-time-part" data-time-start="1510.75" data-time-end="1513.469"><span>write a loop that would I don't know, </span></span><span class="transcription-time-part" data-time-start="1513.469" data-time-end="1518.169"><span>my text is the other guys maybe I have </span></span><span class="transcription-time-part" data-time-start="1518.169" data-time-end="1520.189"><span>a member function called </span></span><span class="transcription-time-part" data-time-start="1520.189" data-time-end="1522.87"><span>give me the character at this position. </span></span><span class="transcription-time-part" data-time-start="1522.87" data-time-end="1524.41"><span>If that's a public function, </span></span><span class="transcription-time-part" data-time-start="1524.41" data-time-end="1525.43"><span>and then I got to make sure </span></span><span class="transcription-time-part" data-time-start="1525.43" data-time-end="1528.509"><span>my text with the zero byte there. </span></span><span class="transcription-time-part" data-time-start="1528.509" data-time-end="1531.89"><span>If there were public functions for the length </span></span><span class="transcription-time-part" data-time-start="1531.89" data-time-end="1534.15"><span>and how to get the value </span></span><span class="transcription-time-part" data-time-start="1534.15" data-time-end="1534.829"><span>of a character at </span></span><span class="transcription-time-part" data-time-start="1534.829" data-time-end="1536.37"><span>a certain position of the string, </span></span><span class="transcription-time-part" data-time-start="1536.37" data-time-end="1538.929"><span>then yeah, I could implement </span></span><span class="transcription-time-part" data-time-start="1538.929" data-time-end="1540.949"><span>the copying instructor using </span></span><span class="transcription-time-part" data-time-start="1540.949" data-time-end="1543.11"><span>only the public interface of the other guy. </span></span><span class="transcription-time-part" data-time-start="1543.11" data-time-end="1546.149"><span>The thing is, in this case, I could do it, </span></span><span class="transcription-time-part" data-time-start="1546.149" data-time-end="1547.609"><span>but look, it's more work for me </span></span><span class="transcription-time-part" data-time-start="1547.609" data-time-end="1549.99"><span>and maybe not as efficient. </span></span><span class="transcription-time-part" data-time-start="1549.99" data-time-end="1553.39"><span>Maybe the library string copy function </span></span><span class="transcription-time-part" data-time-start="1553.39" data-time-end="1555.369"><span>is optimized to do </span></span><span class="transcription-time-part" data-time-start="1555.369" data-time-end="1557.39"><span>all kinds of clever things very efficiently. </span></span><span class="transcription-time-part" data-time-start="1557.39" data-time-end="1559.389"><span>Maybe character at is </span></span><span class="transcription-time-part" data-time-start="1559.389" data-time-end="1560.93"><span>implemented to always check </span></span><span class="transcription-time-part" data-time-start="1560.93" data-time-end="1562.705"><span>the subscript for validity. </span></span><span class="transcription-time-part" data-time-start="1562.705" data-time-end="1565.36"><span>So if I write this myself, </span></span><span class="transcription-time-part" data-time-start="1565.36" data-time-end="1567.199"><span>I am paying the cost of </span></span><span class="transcription-time-part" data-time-start="1567.199" data-time-end="1569.76"><span>checking that K is always a valid subscript, </span></span><span class="transcription-time-part" data-time-start="1569.76" data-time-end="1571.159"><span>even though from the structure of </span></span><span class="transcription-time-part" data-time-start="1571.159" data-time-end="1572.779"><span>my loop, of course, it is. </span></span><span class="transcription-time-part" data-time-start="1572.779" data-time-end="1575.919"><span>So my implementation might </span></span><span class="transcription-time-part" data-time-start="1575.919" data-time-end="1577.099"><span>not be as efficient if I </span></span><span class="transcription-time-part" data-time-start="1577.099" data-time-end="1578.679"><span>have to go through the public interface. </span></span><span class="transcription-time-part" data-time-start="1578.679" data-time-end="1579.579"><span>And maybe there are </span></span><span class="transcription-time-part" data-time-start="1579.579" data-time-end="1581.079"><span>some data members that don't have </span></span><span class="transcription-time-part" data-time-start="1581.079" data-time-end="1583.2"><span>a direct public way </span></span><span class="transcription-time-part" data-time-start="1583.2" data-time-end="1584.539"><span>of accessing their values. </span></span><span class="transcription-time-part" data-time-start="1584.539" data-time-end="1586.739"><span>So, in general, he said, you know, </span></span><span class="transcription-time-part" data-time-start="1586.739" data-time-end="1589.67"><span>it's much easier to say, now, </span></span><span class="transcription-time-part" data-time-start="1589.67" data-time-end="1592.009"><span>now we will allow </span></span><span class="transcription-time-part" data-time-start="1592.009" data-time-end="1593.989"><span>a member function of a class to </span></span><span class="transcription-time-part" data-time-start="1593.989" data-time-end="1595.589"><span>access private members of </span></span><span class="transcription-time-part" data-time-start="1595.589" data-time-end="1599.109"><span>any other object of that type, </span></span><span class="transcription-time-part" data-time-start="1599.109" data-time-end="1600.789"><span>not just the one that this pointer points to. </span></span><span class="transcription-time-part" data-time-start="1600.789" data-time-end="1602.15"><span>I'll get rid of these redundant </span></span><span class="transcription-time-part" data-time-start="1602.15" data-time-end="1604.329"><span>this arrows that I don't need. </span></span><span class="transcription-time-part" data-time-start="1605.29" data-time-end="1609.28"><span>And so that's why, that's </span></span><span class="transcription-time-part" data-time-start="1609.28" data-time-end="1610.799"><span>why the copy constructor for </span></span><span class="transcription-time-part" data-time-start="1610.799" data-time-end="1614.079"><span>string can actually access and can </span></span><span class="transcription-time-part" data-time-start="1614.079" data-time-end="1616.179"><span>talk about and access the private members </span></span><span class="transcription-time-part" data-time-start="1616.179" data-time-end="1617.899"><span>of other string objects. </span></span><span class="transcription-time-part" data-time-start="1617.899" data-time-end="1621.399"><span>So let me write that. Okay. </span></span><span class="transcription-time-part" data-time-start="1621.399" data-time-end="1625.259"><span>So it looks like we're out of the woods. </span></span><span class="transcription-time-part" data-time-start="1625.259" data-time-end="1626.44"><span>We had a little issue </span></span><span class="transcription-time-part" data-time-start="1626.44" data-time-end="1627.68"><span>we hadn't thought about before, </span></span><span class="transcription-time-part" data-time-start="1627.68" data-time-end="1629.239"><span>and we fixed that. </span></span><span class="transcription-time-part" data-time-start="1629.239" data-time-end="1631.419"><span>So now our resource management </span></span><span class="transcription-time-part" data-time-start="1631.419" data-time-end="1632.859"><span>for string is perfect. </span></span><span class="transcription-time-part" data-time-start="1632.859" data-time-end="1635.959"><span>Everything's great. No, we </span></span><span class="transcription-time-part" data-time-start="1635.959" data-time-end="1637.639"><span>have yet another problem </span></span><span class="transcription-time-part" data-time-start="1637.639" data-time-end="1639.5"><span>that has a bunch of complications. </span></span><span class="transcription-time-part" data-time-start="1639.5" data-time-end="1642.82"><span>We're handling copying, creating </span></span><span class="transcription-time-part" data-time-start="1642.82" data-time-end="1644.379"><span>a brand new string as </span></span><span class="transcription-time-part" data-time-start="1644.379" data-time-end="1647.01"><span>a copy of an existing string. </span></span><span class="transcription-time-part" data-time-start="1647.01" data-time-end="1650.979"><span>What we have not handled is assignment, </span></span><span class="transcription-time-part" data-time-start="1650.979" data-time-end="1653.88"><span>taking an already existing string, </span></span><span class="transcription-time-part" data-time-start="1653.88" data-time-end="1656"><span>not a newly constructed string, </span></span><span class="transcription-time-part" data-time-start="1656" data-time-end="1658.36"><span>a string that we're constructing </span></span><span class="transcription-time-part" data-time-start="1658.36" data-time-end="1660.579"><span>an already existing string and </span></span><span class="transcription-time-part" data-time-start="1660.579" data-time-end="1661.82"><span>giving it a new value, </span></span><span class="transcription-time-part" data-time-start="1661.82" data-time-end="1663.38"><span>giving it a different value. </span></span><span class="transcription-time-part" data-time-start="1663.38" data-time-end="1665.44"><span>That's different </span></span><span class="transcription-time-part" data-time-start="1665.44" data-time-end="1668.06"><span>from creating a brand new string. </span></span><span class="transcription-time-part" data-time-start="1668.06" data-time-end="1669.719"><span>The main way it's different is </span></span><span class="transcription-time-part" data-time-start="1669.719" data-time-end="1671.219"><span>the starting conditions are different. </span></span><span class="transcription-time-part" data-time-start="1671.219" data-time-end="1673.54"><span>When you create a brand new string as </span></span><span class="transcription-time-part" data-time-start="1673.54" data-time-end="1677.26"><span>a when you create a brand new string, </span></span><span class="transcription-time-part" data-time-start="1677.26" data-time-end="1678.66"><span>you create a brand new string </span></span><span class="transcription-time-part" data-time-start="1678.66" data-time-end="1680.2"><span>as a copy of another string, </span></span><span class="transcription-time-part" data-time-start="1680.2" data-time-end="1682.079"><span>this storage has nothing in it. </span></span><span class="transcription-time-part" data-time-start="1682.079" data-time-end="1682.92"><span>You can do whatever </span></span><span class="transcription-time-part" data-time-start="1682.92" data-time-end="1683.639"><span>you want with the storage. </span></span><span class="transcription-time-part" data-time-start="1683.639" data-time-end="1684.819"><span>There's nothing in it, so we </span></span><span class="transcription-time-part" data-time-start="1684.819" data-time-end="1686.46"><span>can make our copy just fine. </span></span><span class="transcription-time-part" data-time-start="1686.46" data-time-end="1688.159"><span>If you're assigning to </span></span><span class="transcription-time-part" data-time-start="1688.159" data-time-end="1690.159"><span>this string this already created </span></span><span class="transcription-time-part" data-time-start="1690.159" data-time-end="1692.119"><span>already existing string from </span></span><span class="transcription-time-part" data-time-start="1692.119" data-time-end="1694.719"><span>another string, that's different. </span></span><span class="transcription-time-part" data-time-start="1694.719" data-time-end="1696.079"><span>This guys not starting out </span></span><span class="transcription-time-part" data-time-start="1696.079" data-time-end="1697.419"><span>with uninitialized storage. </span></span><span class="transcription-time-part" data-time-start="1697.419" data-time-end="1699.199"><span>This guy has, you know, a pointer dynamic </span></span><span class="transcription-time-part" data-time-start="1699.199" data-time-end="1701.46"><span>storage and already has a value. </span></span><span class="transcription-time-part" data-time-start="1701.46" data-time-end="1703.139"><span>And you can't just assume, </span></span><span class="transcription-time-part" data-time-start="1703.139" data-time-end="1704.959"><span>Oh, I can just put whatever I want in it. </span></span><span class="transcription-time-part" data-time-start="1704.959" data-time-end="1706.859"><span>Well, what about the old stuff it has? </span></span><span class="transcription-time-part" data-time-start="1706.859" data-time-end="1708.98"><span>Yeah. It's a different problem. </span></span><span class="transcription-time-part" data-time-start="1708.98" data-time-end="1712"><span>So assignment is different from copying. </span></span><span class="transcription-time-part" data-time-start="1712" data-time-end="1714.819"><span>The end result is kind of the same in that, </span></span><span class="transcription-time-part" data-time-start="1714.819" data-time-end="1715.24"><span>hey, </span></span><span class="transcription-time-part" data-time-start="1715.24" data-time-end="1717.219"><span>this object looks like a copy of that one. </span></span><span class="transcription-time-part" data-time-start="1717.219" data-time-end="1719.339"><span>The starting conditions are different. </span></span><span class="transcription-time-part" data-time-start="1719.339" data-time-end="1722.719"><span>And to take care of assignment properly, </span></span><span class="transcription-time-part" data-time-start="1722.719" data-time-end="1724.22"><span>we need to learn something new. </span></span><span class="transcription-time-part" data-time-start="1724.22" data-time-end="1726.319"><span>The copy constructor only takes care of </span></span><span class="transcription-time-part" data-time-start="1726.319" data-time-end="1728.039"><span>creating brand new objects </span></span><span class="transcription-time-part" data-time-start="1728.039" data-time-end="1729.259"><span>as a copy of another one. </span></span><span class="transcription-time-part" data-time-start="1729.259" data-time-end="1730.64"><span>Assigning is a different story, </span></span><span class="transcription-time-part" data-time-start="1730.64" data-time-end="1733.98"><span>but we'll have to take a look at that later. </span></span><span class="transcription-time-part" data-time-start="1733.98" data-time-end="1735.919"><span>Um Okay, </span></span><span class="transcription-time-part" data-time-start="1735.919" data-time-end="1737.38"><span>there is a misconception </span></span><span class="transcription-time-part" data-time-start="1737.38" data-time-end="1738.399"><span>that some people have. </span></span><span class="transcription-time-part" data-time-start="1738.399" data-time-end="1739.98"><span>This is clearly assignment. </span></span><span class="transcription-time-part" data-time-start="1739.98" data-time-end="1741.48"><span>I mean, that's clearly assignment. </span></span><span class="transcription-time-part" data-time-start="1741.48" data-time-end="1742.82"><span>We're not creating a brand new object. </span></span><span class="transcription-time-part" data-time-start="1742.82" data-time-end="1744.299"><span>We're taking an already existing object </span></span><span class="transcription-time-part" data-time-start="1744.299" data-time-end="1745.439"><span>and assigning something to it. </span></span><span class="transcription-time-part" data-time-start="1745.439" data-time-end="1747.119"><span>That's assignment. This is </span></span><span class="transcription-time-part" data-time-start="1747.119" data-time-end="1748.94"><span>clearly instruction. </span></span><span class="transcription-time-part" data-time-start="1748.94" data-time-end="1751.32"><span>We're creating a brand new object X </span></span><span class="transcription-time-part" data-time-start="1751.32" data-time-end="1753.619"><span>that did not exist before and </span></span><span class="transcription-time-part" data-time-start="1753.619" data-time-end="1756.28"><span>copying it from S. But then there's </span></span><span class="transcription-time-part" data-time-start="1756.28" data-time-end="1759.179"><span>the question of this holdover syntax from C. </span></span><span class="transcription-time-part" data-time-start="1759.179" data-time-end="1761.439"><span>So, this syntax for </span></span><span class="transcription-time-part" data-time-start="1761.439" data-time-end="1764.199"><span>C in a declaration is allowed. </span></span><span class="transcription-time-part" data-time-start="1764.199" data-time-end="1766.725"><span>And what's going on here? </span></span><span class="transcription-time-part" data-time-start="1766.725" data-time-end="1768.829"><span>And the answer is </span></span><span class="transcription-time-part" data-time-start="1768.829" data-time-end="1771.309"><span>It's copy construction. It's not assignment. </span></span><span class="transcription-time-part" data-time-start="1771.309" data-time-end="1773.829"><span>And you say, but there's an equals sign here. </span></span><span class="transcription-time-part" data-time-start="1773.829" data-time-end="1775.95"><span>That's not the assignment operator. </span></span><span class="transcription-time-part" data-time-start="1775.95" data-time-end="1777.489"><span>This is construction because </span></span><span class="transcription-time-part" data-time-start="1777.489" data-time-end="1779.75"><span>we are creating a brand new. </span></span><span class="transcription-time-part" data-time-start="1779.75" data-time-end="1782.269"><span>We're creating a brand new object </span></span><span class="transcription-time-part" data-time-start="1782.269" data-time-end="1784.15"><span>that did not exist before. </span></span><span class="transcription-time-part" data-time-start="1784.15" data-time-end="1785.89"><span>Why did not exist before. </span></span><span class="transcription-time-part" data-time-start="1785.89" data-time-end="1787.89"><span>We're declaring Y is a brand new string. </span></span><span class="transcription-time-part" data-time-start="1787.89" data-time-end="1789.669"><span>We're giving its very first value </span></span><span class="transcription-time-part" data-time-start="1789.669" data-time-end="1792.16"><span>copied from S. It's </span></span><span class="transcription-time-part" data-time-start="1792.16" data-time-end="1794.239"><span>not that Y is an existing object that </span></span><span class="transcription-time-part" data-time-start="1794.239" data-time-end="1795.4"><span>we are now giving a new value </span></span><span class="transcription-time-part" data-time-start="1795.4" data-time-end="1796.639"><span>to, it's getting creative. </span></span><span class="transcription-time-part" data-time-start="1796.639" data-time-end="1800.439"><span>That's construction. So be careful. </span></span><span class="transcription-time-part" data-time-start="1800.439" data-time-end="1802.859"><span>The meaning of this symbol </span></span><span class="transcription-time-part" data-time-start="1802.859" data-time-end="1805.819"><span>here and this symbol here are different. </span></span><span class="transcription-time-part" data-time-start="1805.819" data-time-end="1807.379"><span>That's the assignment operator. </span></span><span class="transcription-time-part" data-time-start="1807.379" data-time-end="1809.06"><span>This is just a little bit of syntax </span></span><span class="transcription-time-part" data-time-start="1809.06" data-time-end="1810.8"><span>that separates the variable you're </span></span><span class="transcription-time-part" data-time-start="1810.8" data-time-end="1815.18"><span>declaring from the initialization expression. </span></span><span class="transcription-time-part" data-time-start="1815.18" data-time-end="1818.839"><span>So we've seen how to deal with this stuff. </span></span><span class="transcription-time-part" data-time-start="1818.839" data-time-end="1820.36"><span>We've written the copy constructor. </span></span><span class="transcription-time-part" data-time-start="1820.36" data-time-end="1823.259"><span>We haven't done the assignment operator yet. </span></span><span class="transcription-time-part" data-time-start="1823.259" data-time-end="1827.74"><span>So let's say now here, Uh oh. </span></span><span class="transcription-time-part" data-time-start="1827.74" data-time-end="1829.32"><span>I spilled coffee on my shirt again. </span></span><span class="transcription-time-part" data-time-start="1829.32" data-time-end="1831.5"><span>Give me a second to change. </span></span><span class="transcription-time-part" data-time-start="1833.4" data-time-end="1836.799"><span>Okay, where was I? </span></span><span class="transcription-time-part" data-time-start="1837.52" data-time-end="1841.179"><span>Let's say now here in the function H, </span></span><span class="transcription-time-part" data-time-start="1841.179" data-time-end="1843.339"><span>let's say we have a string, </span></span><span class="transcription-time-part" data-time-start="1843.339" data-time-end="1845.44"><span>say initialized to WOW. </span></span><span class="transcription-time-part" data-time-start="1845.44" data-time-end="1848.999"><span>And then later on, we assign S to U. </span></span><span class="transcription-time-part" data-time-start="1848.999" data-time-end="1850.379"><span>Okay, so you look at it and say, </span></span><span class="transcription-time-part" data-time-start="1850.379" data-time-end="1851.799"><span>well, all right, </span></span><span class="transcription-time-part" data-time-start="1851.799" data-time-end="1853.18"><span>the goal of assignment </span></span><span class="transcription-time-part" data-time-start="1853.18" data-time-end="1854.76"><span>is to make the left hand side </span></span><span class="transcription-time-part" data-time-start="1854.76" data-time-end="1855.819"><span>look like a copy of </span></span><span class="transcription-time-part" data-time-start="1855.819" data-time-end="1858.059"><span>the right hand side, right? </span></span><span class="transcription-time-part" data-time-start="1858.059" data-time-end="1859.68"><span>That's certainly true for integers. </span></span><span class="transcription-time-part" data-time-start="1859.68" data-time-end="1862.919"><span>I I I have an integer K and an integer N, </span></span><span class="transcription-time-part" data-time-start="1862.919" data-time-end="1865.039"><span>and I say K equals N, </span></span><span class="transcription-time-part" data-time-start="1865.039" data-time-end="1866.939"><span>the goal is to take the value of N, </span></span><span class="transcription-time-part" data-time-start="1866.939" data-time-end="1867.679"><span>store it in K, </span></span><span class="transcription-time-part" data-time-start="1867.679" data-time-end="1869.604"><span>so K looks like a copy of M. </span></span><span class="transcription-time-part" data-time-start="1869.604" data-time-end="1871.469"><span>That's what everybody expects </span></span><span class="transcription-time-part" data-time-start="1871.469" data-time-end="1872.969"><span>the assignment operator to do. </span></span><span class="transcription-time-part" data-time-start="1872.969" data-time-end="1876.049"><span>So it's your job as a class designer to make </span></span><span class="transcription-time-part" data-time-start="1876.049" data-time-end="1877.49"><span>sure that assignment works </span></span><span class="transcription-time-part" data-time-start="1877.49" data-time-end="1880.409"><span>properly for your class and has that effect? </span></span><span class="transcription-time-part" data-time-start="1880.409" data-time-end="1884.989"><span>Well, again, we have a problem here. </span></span><span class="transcription-time-part" data-time-start="1884.989" data-time-end="1886.549"><span>If we don't declare </span></span><span class="transcription-time-part" data-time-start="1886.549" data-time-end="1887.689"><span>an assignment operator and </span></span><span class="transcription-time-part" data-time-start="1887.689" data-time-end="1888.929"><span>implement an assignment operator, </span></span><span class="transcription-time-part" data-time-start="1888.929" data-time-end="1890.509"><span>we don't declare an assignment operator, </span></span><span class="transcription-time-part" data-time-start="1890.509" data-time-end="1892.709"><span>the compiler writes one for us that </span></span><span class="transcription-time-part" data-time-start="1892.709" data-time-end="1896.65"><span>simply assigns each data member. </span></span><span class="transcription-time-part" data-time-start="1897.41" data-time-end="1899.569"><span>And that's not going to be right here. </span></span><span class="transcription-time-part" data-time-start="1899.569" data-time-end="1900.93"><span>Now you might say, Well, wait a minute </span></span><span class="transcription-time-part" data-time-start="1900.93" data-time-end="1902.91"><span>I thought we defined a copy constructor. </span></span><span class="transcription-time-part" data-time-start="1902.91" data-time-end="1904.97"><span>The copy constructor only </span></span><span class="transcription-time-part" data-time-start="1904.97" data-time-end="1906.909"><span>applies when you are </span></span><span class="transcription-time-part" data-time-start="1906.909" data-time-end="1909.21"><span>creating only comes into effect when you're </span></span><span class="transcription-time-part" data-time-start="1909.21" data-time-end="1911.169"><span>creating a brand new object </span></span><span class="transcription-time-part" data-time-start="1911.169" data-time-end="1912.61"><span>that didn't exist before, </span></span><span class="transcription-time-part" data-time-start="1912.61" data-time-end="1914.269"><span>you're constructing a new object, </span></span><span class="transcription-time-part" data-time-start="1914.269" data-time-end="1917.209"><span>giving it its very first value. </span></span><span class="transcription-time-part" data-time-start="1917.81" data-time-end="1920.77"><span>That's what happens when T gets </span></span><span class="transcription-time-part" data-time-start="1920.77" data-time-end="1924.93"><span>created as a copy of S when we call FS. </span></span><span class="transcription-time-part" data-time-start="1924.93" data-time-end="1928.53"><span>T didn't exist before we made this call, </span></span><span class="transcription-time-part" data-time-start="1928.53" data-time-end="1930.37"><span>and so now we're making the call </span></span><span class="transcription-time-part" data-time-start="1930.37" data-time-end="1931.749"><span>and T is getting created for </span></span><span class="transcription-time-part" data-time-start="1931.749" data-time-end="1933.67"><span>the very first time is being </span></span><span class="transcription-time-part" data-time-start="1933.67" data-time-end="1935.23"><span>created for S. That's </span></span><span class="transcription-time-part" data-time-start="1935.23" data-time-end="1936.75"><span>going to be construction. </span></span><span class="transcription-time-part" data-time-start="1936.75" data-time-end="1938.59"><span>T will be constructed </span></span><span class="transcription-time-part" data-time-start="1938.59" data-time-end="1939.71"><span>by the copying instructor. </span></span><span class="transcription-time-part" data-time-start="1939.71" data-time-end="1941.629"><span>But assignment is different. </span></span><span class="transcription-time-part" data-time-start="1941.629" data-time-end="1944.13"><span>U is not being </span></span><span class="transcription-time-part" data-time-start="1944.13" data-time-end="1947.169"><span>created in this statement. U already exists. </span></span><span class="transcription-time-part" data-time-start="1947.169" data-time-end="1949.429"><span>The previous statement created. </span></span><span class="transcription-time-part" data-time-start="1949.429" data-time-end="1952.129"><span>So assignments different because </span></span><span class="transcription-time-part" data-time-start="1952.129" data-time-end="1953.889"><span>the starting condition is different. </span></span><span class="transcription-time-part" data-time-start="1953.889" data-time-end="1955.53"><span>The end result is, yeah, </span></span><span class="transcription-time-part" data-time-start="1955.53" data-time-end="1957.909"><span>yeah, U is going to look like a copy of S, </span></span><span class="transcription-time-part" data-time-start="1957.909" data-time-end="1959.43"><span>just like T looked like a copy </span></span><span class="transcription-time-part" data-time-start="1959.43" data-time-end="1961.07"><span>of S when we use the copying instructor, </span></span><span class="transcription-time-part" data-time-start="1961.07" data-time-end="1963.109"><span>passing over to T. But </span></span><span class="transcription-time-part" data-time-start="1963.109" data-time-end="1964.869"><span>the starting condition is different. </span></span><span class="transcription-time-part" data-time-start="1964.869" data-time-end="1967.14"><span>T did not exist before. </span></span><span class="transcription-time-part" data-time-start="1967.14" data-time-end="1969.209"><span>Whatever was in the data member was </span></span><span class="transcription-time-part" data-time-start="1969.209" data-time-end="1971.43"><span>uninitialized garbage before </span></span><span class="transcription-time-part" data-time-start="1971.43" data-time-end="1972.97"><span>the constructor started executing. </span></span><span class="transcription-time-part" data-time-start="1972.97" data-time-end="1974.59"><span>But with the assignment operator, </span></span><span class="transcription-time-part" data-time-start="1974.59" data-time-end="1976.869"><span>you already has a value, </span></span><span class="transcription-time-part" data-time-start="1976.869" data-time-end="1979.009"><span>and there's already stuff inside you. </span></span><span class="transcription-time-part" data-time-start="1979.009" data-time-end="1981.029"><span>It's already been initialized </span></span><span class="transcription-time-part" data-time-start="1981.029" data-time-end="1982.129"><span>through a constructor at </span></span><span class="transcription-time-part" data-time-start="1982.129" data-time-end="1983.19"><span>sometime in the past, </span></span><span class="transcription-time-part" data-time-start="1983.19" data-time-end="1985.43"><span>and now we're giving it a new value. </span></span><span class="transcription-time-part" data-time-start="1985.43" data-time-end="1987.39"><span>And that situation is very different. </span></span><span class="transcription-time-part" data-time-start="1987.39" data-time-end="1990.265"><span>So let me go to the board again. </span></span><span class="transcription-time-part" data-time-start="1990.265" data-time-end="1993.759"><span>This time I'll do it, right? Let me </span></span><span class="transcription-time-part" data-time-start="1993.759" data-time-end="1994.56"><span>go to the board again </span></span><span class="transcription-time-part" data-time-start="1994.56" data-time-end="1996.159"><span>and see what the story is here. </span></span><span class="transcription-time-part" data-time-start="1996.159" data-time-end="1998.599"><span>So we created you </span></span><span class="transcription-time-part" data-time-start="1998.599" data-time-end="2000.219"><span>by calling the constructor </span></span><span class="transcription-time-part" data-time-start="2000.219" data-time-end="2001.68"><span>that took the C string WOW. </span></span><span class="transcription-time-part" data-time-start="2001.68" data-time-end="2003.379"><span>So the length of that is three. </span></span><span class="transcription-time-part" data-time-start="2003.379" data-time-end="2005.219"><span>It allocated an array of </span></span><span class="transcription-time-part" data-time-start="2005.219" data-time-end="2010.779"><span>four items and started pointering there, </span></span><span class="transcription-time-part" data-time-start="2010.779" data-time-end="2013.459"><span>and then copied the text WOW into there. </span></span><span class="transcription-time-part" data-time-start="2013.459" data-time-end="2015.199"><span>So after creating you, </span></span><span class="transcription-time-part" data-time-start="2015.199" data-time-end="2016.699"><span>the situation looks like that. </span></span><span class="transcription-time-part" data-time-start="2016.699" data-time-end="2018.779"><span>So now what we're going to do is </span></span><span class="transcription-time-part" data-time-start="2018.779" data-time-end="2020.479"><span>assign, we said, </span></span><span class="transcription-time-part" data-time-start="2020.479" data-time-end="2023.58"><span>U gets S. Now, </span></span><span class="transcription-time-part" data-time-start="2023.58" data-time-end="2024.66"><span>we didn't say anything </span></span><span class="transcription-time-part" data-time-start="2024.66" data-time-end="2025.82"><span>about how to do assignment. </span></span><span class="transcription-time-part" data-time-start="2025.82" data-time-end="2027.279"><span>We only said how to do copying, </span></span><span class="transcription-time-part" data-time-start="2027.279" data-time-end="2029.099"><span>and assignment is not the same as </span></span><span class="transcription-time-part" data-time-start="2029.099" data-time-end="2030.499"><span>copying because the </span></span><span class="transcription-time-part" data-time-start="2030.499" data-time-end="2031.919"><span>starting condition is different. </span></span><span class="transcription-time-part" data-time-start="2031.919" data-time-end="2034.78"><span>So if we don't say how to do assignment, </span></span><span class="transcription-time-part" data-time-start="2034.78" data-time-end="2036.399"><span>the compiler says, Okay, </span></span><span class="transcription-time-part" data-time-start="2036.399" data-time-end="2039.499"><span>I will simply assign each data member. </span></span><span class="transcription-time-part" data-time-start="2039.499" data-time-end="2044.239"><span>So it assigns the pointer. </span></span><span class="transcription-time-part" data-time-start="2044.239" data-time-end="2048.139"><span>So the pointer and tex data member </span></span><span class="transcription-time-part" data-time-start="2048.139" data-time-end="2049.279"><span>of U gets assigned from the </span></span><span class="transcription-time-part" data-time-start="2049.279" data-time-end="2050.439"><span>tex data member of </span></span><span class="transcription-time-part" data-time-start="2050.439" data-time-end="2056.659"><span>S. So that pointer gets assigned over here, </span></span><span class="transcription-time-part" data-time-start="2056.659" data-time-end="2059.799"><span>and the five gets assigned over here. </span></span><span class="transcription-time-part" data-time-start="2061.8" data-time-end="2066.179"><span>So now you has the text </span></span><span class="transcription-time-part" data-time-start="2066.179" data-time-end="2070.349"><span>hello and the length five well, </span></span><span class="transcription-time-part" data-time-start="2070.349" data-time-end="2072.549"><span>that looks like a copy of S. Well, </span></span><span class="transcription-time-part" data-time-start="2072.549" data-time-end="2074.249"><span>but no, look at the whole picture. </span></span><span class="transcription-time-part" data-time-start="2074.249" data-time-end="2076.169"><span>No, it's not a copy of S. </span></span><span class="transcription-time-part" data-time-start="2076.169" data-time-end="2078.829"><span>It's sharing the same text as S, </span></span><span class="transcription-time-part" data-time-start="2078.829" data-time-end="2081.189"><span>same problem we had with copy constructor. </span></span><span class="transcription-time-part" data-time-start="2081.189" data-time-end="2082.649"><span>And so we're certainly going to have </span></span><span class="transcription-time-part" data-time-start="2082.649" data-time-end="2084.849"><span>the same problem later on. </span></span><span class="transcription-time-part" data-time-start="2084.849" data-time-end="2087.609"><span>W U gets destroyed, </span></span><span class="transcription-time-part" data-time-start="2087.609" data-time-end="2091.249"><span>the destructor will get rid of this storage. </span></span><span class="transcription-time-part" data-time-start="2091.249" data-time-end="2093.089"><span>And so when S gets destroyed, </span></span><span class="transcription-time-part" data-time-start="2093.089" data-time-end="2096.189"><span>we try to call the delete </span></span><span class="transcription-time-part" data-time-start="2096.189" data-time-end="2098.349"><span>on already deleted storage. </span></span><span class="transcription-time-part" data-time-start="2098.349" data-time-end="2099.029"><span>So it's got </span></span><span class="transcription-time-part" data-time-start="2099.029" data-time-end="2100.929"><span>that same problem as copy constructor, </span></span><span class="transcription-time-part" data-time-start="2100.929" data-time-end="2102.489"><span>all those same problems, plus </span></span><span class="transcription-time-part" data-time-start="2102.489" data-time-end="2104.129"><span>one more a memory leak. </span></span><span class="transcription-time-part" data-time-start="2104.129" data-time-end="2106.514"><span>We never got rid of the WOW. </span></span><span class="transcription-time-part" data-time-start="2106.514" data-time-end="2109.479"><span>So the old value of you is linked here. </span></span><span class="transcription-time-part" data-time-start="2109.479" data-time-end="2110.679"><span>That's what makes assignment </span></span><span class="transcription-time-part" data-time-start="2110.679" data-time-end="2112.219"><span>different from copying. </span></span><span class="transcription-time-part" data-time-start="2112.219" data-time-end="2114.1"><span>The starting condition is different. </span></span><span class="transcription-time-part" data-time-start="2114.1" data-time-end="2117.679"><span>You already had a pointer to dynamic storage, </span></span><span class="transcription-time-part" data-time-start="2117.679" data-time-end="2120.319"><span>and so if you were to </span></span><span class="transcription-time-part" data-time-start="2120.319" data-time-end="2122.119"><span>even if you applied </span></span><span class="transcription-time-part" data-time-start="2122.119" data-time-end="2124.099"><span>the copy constructor to somehow say, </span></span><span class="transcription-time-part" data-time-start="2124.099" data-time-end="2126.139"><span>Well, you know, let's </span></span><span class="transcription-time-part" data-time-start="2126.139" data-time-end="2129.379"><span>first bring over the length, </span></span><span class="transcription-time-part" data-time-start="2129.379" data-time-end="2130.84"><span>then let's allocate new storage </span></span><span class="transcription-time-part" data-time-start="2130.84" data-time-end="2131.559"><span>for you to point to. </span></span><span class="transcription-time-part" data-time-start="2131.559" data-time-end="2133.659"><span>Even if you were pointing to new storage, </span></span><span class="transcription-time-part" data-time-start="2133.659" data-time-end="2135.619"><span>we wiped out the old storage. </span></span><span class="transcription-time-part" data-time-start="2135.619" data-time-end="2138.24"><span>So if the assignment operator </span></span><span class="transcription-time-part" data-time-start="2138.24" data-time-end="2139.74"><span>simply called the copy constructor, </span></span><span class="transcription-time-part" data-time-start="2139.74" data-time-end="2141.599"><span>which it does not, but if it </span></span><span class="transcription-time-part" data-time-start="2141.599" data-time-end="2144.999"><span>did, we'd still have a problem. </span></span><span class="transcription-time-part" data-time-start="2144.999" data-time-end="2147.079"><span>So we cannot let the compiler </span></span><span class="transcription-time-part" data-time-start="2147.079" data-time-end="2148.22"><span>write the assignment operator </span></span><span class="transcription-time-part" data-time-start="2148.22" data-time-end="2149.644"><span>for us in this case. </span></span><span class="transcription-time-part" data-time-start="2149.644" data-time-end="2153.229"><span>Now, why didn't we have this problem before? </span></span><span class="transcription-time-part" data-time-start="2153.229" data-time-end="2155.229"><span>Well, look at the </span></span><span class="transcription-time-part" data-time-start="2155.229" data-time-end="2157.369"><span>kinds of things we had before. </span></span><span class="transcription-time-part" data-time-start="2157.369" data-time-end="2162.429"><span>We had, for example, a circle object, </span></span><span class="transcription-time-part" data-time-start="2162.429" data-time-end="2165.049"><span>and a circle had a radius, I'm sorry, </span></span><span class="transcription-time-part" data-time-start="2165.049" data-time-end="2166.349"><span>had an X and Y coordinate in </span></span><span class="transcription-time-part" data-time-start="2166.349" data-time-end="2168.409"><span>the center and a radius. </span></span><span class="transcription-time-part" data-time-start="2168.409" data-time-end="2170.789"><span>And if I had another circle </span></span><span class="transcription-time-part" data-time-start="2170.789" data-time-end="2173.43"><span>that already had a value, </span></span><span class="transcription-time-part" data-time-start="2176" data-time-end="2177.999"><span>so here's another circle </span></span><span class="transcription-time-part" data-time-start="2177.999" data-time-end="2179.059"><span>that already has a value. </span></span><span class="transcription-time-part" data-time-start="2179.059" data-time-end="2182.499"><span>If I assign this circle to this circle, now, </span></span><span class="transcription-time-part" data-time-start="2182.499" data-time-end="2183.939"><span>we'd never declared an </span></span><span class="transcription-time-part" data-time-start="2183.939" data-time-end="2185.359"><span>assignment operator for circle, </span></span><span class="transcription-time-part" data-time-start="2185.359" data-time-end="2186.679"><span>so the compiler simply </span></span><span class="transcription-time-part" data-time-start="2186.679" data-time-end="2188.439"><span>did member by member assignment. </span></span><span class="transcription-time-part" data-time-start="2188.439" data-time-end="2190.139"><span>It assigned the negative two over </span></span><span class="transcription-time-part" data-time-start="2190.139" data-time-end="2192.159"><span>to here, the five over to here, </span></span><span class="transcription-time-part" data-time-start="2192.159" data-time-end="2194.299"><span>the ten over to here, and </span></span><span class="transcription-time-part" data-time-start="2194.299" data-time-end="2195.919"><span>now this circle has negative two, </span></span><span class="transcription-time-part" data-time-start="2195.919" data-time-end="2198.219"><span>five and ten. That's fine. </span></span><span class="transcription-time-part" data-time-start="2198.219" data-time-end="2202.059"><span>That works. No memory leak, no problem here. </span></span><span class="transcription-time-part" data-time-start="2202.059" data-time-end="2204.779"><span>So member my member assignment </span></span><span class="transcription-time-part" data-time-start="2204.779" data-time-end="2206.879"><span>works in the case of, </span></span><span class="transcription-time-part" data-time-start="2206.879" data-time-end="2209.719"><span>all you have is simple types </span></span><span class="transcription-time-part" data-time-start="2209.719" data-time-end="2211.34"><span>that don't hold any resources. </span></span><span class="transcription-time-part" data-time-start="2211.34" data-time-end="2212.999"><span>So if you just wipe out the old value by </span></span><span class="transcription-time-part" data-time-start="2212.999" data-time-end="2216.2"><span>assigning over the new value, not a problem. </span></span><span class="transcription-time-part" data-time-start="2217.599" data-time-end="2220.68"><span>Okay, but now we face something different. </span></span><span class="transcription-time-part" data-time-start="2220.68" data-time-end="2222.739"><span>So how do we solve the problem? </span></span><span class="transcription-time-part" data-time-start="2222.739" data-time-end="2225.179"><span>So the way Str Stip decided to </span></span><span class="transcription-time-part" data-time-start="2225.179" data-time-end="2227.259"><span>do it was say, All right, </span></span><span class="transcription-time-part" data-time-start="2227.259" data-time-end="2229.219"><span>assignment will </span></span><span class="transcription-time-part" data-time-start="2229.219" data-time-end="2232.74"><span>be a member function of a class. </span></span><span class="transcription-time-part" data-time-start="2232.74" data-time-end="2233.739"><span>And if you don't write one, </span></span><span class="transcription-time-part" data-time-start="2233.739" data-time-end="2234.979"><span>the compiler writes one for you, </span></span><span class="transcription-time-part" data-time-start="2234.979" data-time-end="2236.679"><span>that does member by member assignment. </span></span><span class="transcription-time-part" data-time-start="2236.679" data-time-end="2239.219"><span>But if you want to change it, you've </span></span><span class="transcription-time-part" data-time-start="2239.219" data-time-end="2240.359"><span>got to write your own </span></span><span class="transcription-time-part" data-time-start="2240.359" data-time-end="2242.52"><span>version of the assignment operator. </span></span><span class="transcription-time-part" data-time-start="2242.52" data-time-end="2248.839"><span>What that means is the assignment U equals S </span></span><span class="transcription-time-part" data-time-start="2248.839" data-time-end="2252.179"><span>is really just a convenient shorthand like </span></span><span class="transcription-time-part" data-time-start="2252.179" data-time-end="2253.84"><span>any other operator </span></span><span class="transcription-time-part" data-time-start="2253.84" data-time-end="2256.079"><span>defined as a member function. </span></span><span class="transcription-time-part" data-time-start="2256.82" data-time-end="2260.619"><span>It's really just a shorthand for take </span></span><span class="transcription-time-part" data-time-start="2260.619" data-time-end="2262.639"><span>you call some member function </span></span><span class="transcription-time-part" data-time-start="2262.639" data-time-end="2264.339"><span>with S as an argument. </span></span><span class="transcription-time-part" data-time-start="2264.339" data-time-end="2267.62"><span>And the name of that member function </span></span><span class="transcription-time-part" data-time-start="2267.62" data-time-end="2270.359"><span>is operator equal. </span></span><span class="transcription-time-part" data-time-start="2270.359" data-time-end="2272.259"><span>It's a funny looking name </span></span><span class="transcription-time-part" data-time-start="2272.259" data-time-end="2273.319"><span>for a function, but again, </span></span><span class="transcription-time-part" data-time-start="2273.319" data-time-end="2274.8"><span>this is what happens when you overload </span></span><span class="transcription-time-part" data-time-start="2274.8" data-time-end="2276.459"><span>functions of C plus plus. </span></span><span class="transcription-time-part" data-time-start="2276.459" data-time-end="2279.579"><span>You do so by creating functions whose name is </span></span><span class="transcription-time-part" data-time-start="2279.579" data-time-end="2281.359"><span>the word operator followed </span></span><span class="transcription-time-part" data-time-start="2281.359" data-time-end="2281.459"><span>by </span></span><span class="transcription-time-part" data-time-start="2281.459" data-time-end="2284.039"><span>the operator symbol that you're overloading. </span></span><span class="transcription-time-part" data-time-start="2284.039" data-time-end="2287.119"><span>So assigning STU is </span></span><span class="transcription-time-part" data-time-start="2287.119" data-time-end="2289.099"><span>done by calling a member function on you </span></span><span class="transcription-time-part" data-time-start="2289.099" data-time-end="2291.539"><span>named operator equals with the argument S. </span></span><span class="transcription-time-part" data-time-start="2291.539" data-time-end="2293.099"><span>It's just that we're allowed to </span></span><span class="transcription-time-part" data-time-start="2293.099" data-time-end="2294.939"><span>simplify that and write it this way. </span></span><span class="transcription-time-part" data-time-start="2294.939" data-time-end="2296.339"><span>So our goal is to write </span></span><span class="transcription-time-part" data-time-start="2296.339" data-time-end="2298.134"><span>this operator equal function. </span></span><span class="transcription-time-part" data-time-start="2298.134" data-time-end="2300.409"><span>So that we get the correct behavior. </span></span><span class="transcription-time-part" data-time-start="2300.409" data-time-end="2303.269"><span>Okay, so let's see </span></span><span class="transcription-time-part" data-time-start="2303.269" data-time-end="2305.049"><span>what that function would have to do. </span></span><span class="transcription-time-part" data-time-start="2305.049" data-time-end="2307.13"><span>So we start with a condition </span></span><span class="transcription-time-part" data-time-start="2307.13" data-time-end="2311.609"><span>where points has some old value, </span></span><span class="transcription-time-part" data-time-start="2311.609" data-time-end="2312.269"><span>say it points to </span></span><span class="transcription-time-part" data-time-start="2312.269" data-time-end="2314.349"><span>WOW and it has a length of three. </span></span><span class="transcription-time-part" data-time-start="2314.349" data-time-end="2318.409"><span>Let me get this out of the way. Now, in </span></span><span class="transcription-time-part" data-time-start="2318.409" data-time-end="2319.59"><span>this called operator equal, </span></span><span class="transcription-time-part" data-time-start="2319.59" data-time-end="2321.529"><span>so let me write it up here. </span></span><span class="transcription-time-part" data-time-start="2322.409" data-time-end="2324.79"><span>Is the object being modified, </span></span><span class="transcription-time-part" data-time-start="2324.79" data-time-end="2327.969"><span>so is the object that this pointer points to. </span></span><span class="transcription-time-part" data-time-start="2329.65" data-time-end="2333.349"><span>And S will be the other guy. </span></span><span class="transcription-time-part" data-time-start="2333.349" data-time-end="2334.749"><span>We'll pass S by </span></span><span class="transcription-time-part" data-time-start="2334.749" data-time-end="2337.05"><span>reference to this member function. </span></span><span class="transcription-time-part" data-time-start="2337.05" data-time-end="2338.929"><span>We'll show that in a minute. </span></span><span class="transcription-time-part" data-time-start="2344.17" data-time-end="2347.89"><span>Okay, so let's see what would have to happen. </span></span><span class="transcription-time-part" data-time-start="2347.89" data-time-end="2350.189"><span>Now, we know the goal </span></span><span class="transcription-time-part" data-time-start="2350.189" data-time-end="2351.989"><span>is to make you look like a copy of S. </span></span><span class="transcription-time-part" data-time-start="2351.989" data-time-end="2354.269"><span>So what are we doing </span></span><span class="transcription-time-part" data-time-start="2354.269" data-time-end="2355.469"><span>the copy constructor to make </span></span><span class="transcription-time-part" data-time-start="2355.469" data-time-end="2356.829"><span>you look like a copy of S? </span></span><span class="transcription-time-part" data-time-start="2356.829" data-time-end="2359.969"><span>Well, we have signed over the length. </span></span><span class="transcription-time-part" data-time-start="2359.969" data-time-end="2363.109"><span>So if we change the three to a five, </span></span><span class="transcription-time-part" data-time-start="2363.109" data-time-end="2365.03"><span>that's making progress. </span></span><span class="transcription-time-part" data-time-start="2365.03" data-time-end="2366.89"><span>That seems reasonable. </span></span><span class="transcription-time-part" data-time-start="2367.46" data-time-end="2370.839"><span>Then we dynamically allocated </span></span><span class="transcription-time-part" data-time-start="2370.839" data-time-end="2372.939"><span>an array and stored the pointer in here. </span></span><span class="transcription-time-part" data-time-start="2372.939" data-time-end="2374.819"><span>Oh, but wait, we've got the old one here. </span></span><span class="transcription-time-part" data-time-start="2374.819" data-time-end="2376.4"><span>So we better delete </span></span><span class="transcription-time-part" data-time-start="2376.4" data-time-end="2380.159"><span>the storage that you points to. </span></span><span class="transcription-time-part" data-time-start="2380.159" data-time-end="2383.339"><span>So somewhere in here before we </span></span><span class="transcription-time-part" data-time-start="2383.339" data-time-end="2384.619"><span>replace the pointer here with </span></span><span class="transcription-time-part" data-time-start="2384.619" data-time-end="2386.36"><span>a pointer to the new storage, </span></span><span class="transcription-time-part" data-time-start="2386.36" data-time-end="2387.759"><span>we need to call Delete on </span></span><span class="transcription-time-part" data-time-start="2387.759" data-time-end="2390.38"><span>this pointer to get rid of that storage. </span></span><span class="transcription-time-part" data-time-start="2390.38" data-time-end="2392.299"><span>So if we do that, we call </span></span><span class="transcription-time-part" data-time-start="2392.299" data-time-end="2393.18"><span>Delete on this pointer, </span></span><span class="transcription-time-part" data-time-start="2393.18" data-time-end="2394.58"><span>get rid of that storage. </span></span><span class="transcription-time-part" data-time-start="2394.58" data-time-end="2397.019"><span>Now the WOW is gone. </span></span><span class="transcription-time-part" data-time-start="2397.019" data-time-end="2398.439"><span>We're not going to have a memory leak </span></span><span class="transcription-time-part" data-time-start="2398.439" data-time-end="2399.119"><span>anymore if we do </span></span><span class="transcription-time-part" data-time-start="2399.119" data-time-end="2400.419"><span>everything right from here on. </span></span><span class="transcription-time-part" data-time-start="2400.419" data-time-end="2402.76"><span>So now we can dynamically allocate </span></span><span class="transcription-time-part" data-time-start="2402.76" data-time-end="2406.459"><span>a new array and set you to point to it. </span></span><span class="transcription-time-part" data-time-start="2407.93" data-time-end="2413.189"><span>Copy over the text. And when </span></span><span class="transcription-time-part" data-time-start="2413.189" data-time-end="2415.889"><span>we're done, we're in great shape. </span></span><span class="transcription-time-part" data-time-start="2415.889" data-time-end="2417.969"><span>You looks like a copy of S, </span></span><span class="transcription-time-part" data-time-start="2417.969" data-time-end="2420.049"><span>which is what assignment ought to do. </span></span><span class="transcription-time-part" data-time-start="2420.049" data-time-end="2422.769"><span>We properly cleaned up the old value of you. </span></span><span class="transcription-time-part" data-time-start="2422.769" data-time-end="2426.229"><span>There's no memory leak. And you has </span></span><span class="transcription-time-part" data-time-start="2426.229" data-time-end="2428.029"><span>a nice independent copy of S. </span></span><span class="transcription-time-part" data-time-start="2428.029" data-time-end="2431.069"><span>So does whatever we do to you, </span></span><span class="transcription-time-part" data-time-start="2431.069" data-time-end="2433.27"><span>has no effect on S. Perfect. </span></span><span class="transcription-time-part" data-time-start="2433.27" data-time-end="2435.13"><span>That's what we want to have happen. </span></span><span class="transcription-time-part" data-time-start="2435.13" data-time-end="2437.849"><span>So the traditional way of </span></span><span class="transcription-time-part" data-time-start="2437.849" data-time-end="2439.31"><span>writing the assignment operator </span></span><span class="transcription-time-part" data-time-start="2439.31" data-time-end="2441.33"><span>essentially does those steps. </span></span><span class="transcription-time-part" data-time-start="2441.33" data-time-end="2443.409"><span>I say traditional because I'll show </span></span><span class="transcription-time-part" data-time-start="2443.409" data-time-end="2445.489"><span>you the modern way later. </span></span><span class="transcription-time-part" data-time-start="2445.489" data-time-end="2448.089"><span>So the traditional way </span></span><span class="transcription-time-part" data-time-start="2449.29" data-time-end="2453.59"><span>Is going to look like this. So almost, </span></span><span class="transcription-time-part" data-time-start="2453.59" data-time-end="2455.049"><span>I'm not quite there yet, </span></span><span class="transcription-time-part" data-time-start="2455.049" data-time-end="2456.489"><span>but we're getting there. </span></span><span class="transcription-time-part" data-time-start="2456.489" data-time-end="2466.469"><span>So we'll have the right hand side, </span></span><span class="transcription-time-part" data-time-start="2466.469" data-time-end="2467.949"><span>RHS, or the right hand side of </span></span><span class="transcription-time-part" data-time-start="2467.949" data-time-end="2470.33"><span>the operator, the assignment operator. </span></span><span class="transcription-time-part" data-time-start="2470.33" data-time-end="2471.969"><span>It's not quite I </span></span><span class="transcription-time-part" data-time-start="2471.969" data-time-end="2473.389"><span>mean, it's technically legal, </span></span><span class="transcription-time-part" data-time-start="2473.389" data-time-end="2475.469"><span>but it's not quite the conventional way </span></span><span class="transcription-time-part" data-time-start="2475.469" data-time-end="2476.77"><span>you write an assignment operator. </span></span><span class="transcription-time-part" data-time-start="2476.77" data-time-end="2478.529"><span>I will fix it later, but it's </span></span><span class="transcription-time-part" data-time-start="2478.529" data-time-end="2480.67"><span>not quite following the conventions. </span></span><span class="transcription-time-part" data-time-start="2480.67" data-time-end="2481.969"><span>I will get to that later. </span></span><span class="transcription-time-part" data-time-start="2481.969" data-time-end="2483.449"><span>But the basic idea is </span></span><span class="transcription-time-part" data-time-start="2483.449" data-time-end="2485.55"><span>the argument to the assignment operator </span></span><span class="transcription-time-part" data-time-start="2485.55" data-time-end="2488.21"><span>will be passed by constant reference. </span></span><span class="transcription-time-part" data-time-start="2488.21" data-time-end="2491.869"><span>And so let me write it. </span></span><span class="transcription-time-part" data-time-start="2491.869" data-time-end="2493.589"><span>I'll put it here so the code </span></span><span class="transcription-time-part" data-time-start="2493.589" data-time-end="2496.149"><span>will be nearby. Okay. </span></span><span class="transcription-time-part" data-time-start="2496.149" data-time-end="2498.43"><span>Again, I will fix the signature </span></span><span class="transcription-time-part" data-time-start="2498.43" data-time-end="2500.009"><span>to the function later. </span></span><span class="transcription-time-part" data-time-start="2500.009" data-time-end="2504.169"><span>So Okay. It's not </span></span><span class="transcription-time-part" data-time-start="2504.169" data-time-end="2505.57"><span>quite following the convention. </span></span><span class="transcription-time-part" data-time-start="2505.57" data-time-end="2509.109"><span>So we want to clean up the left hand side. </span></span><span class="transcription-time-part" data-time-start="2509.109" data-time-end="2511.17"><span>In a call to the operator equal, </span></span><span class="transcription-time-part" data-time-start="2511.17" data-time-end="2513.649"><span>that means you gets S means </span></span><span class="transcription-time-part" data-time-start="2513.649" data-time-end="2515.79"><span>you were calling the operator </span></span><span class="transcription-time-part" data-time-start="2515.79" data-time-end="2517.189"><span>equal member function on S, </span></span><span class="transcription-time-part" data-time-start="2517.189" data-time-end="2520.669"><span>which means so this pointer points to U, </span></span><span class="transcription-time-part" data-time-start="2520.669" data-time-end="2524.289"><span>and the parameter RHS is a reference to </span></span><span class="transcription-time-part" data-time-start="2524.289" data-time-end="2526.109"><span>S. So the this pointer </span></span><span class="transcription-time-part" data-time-start="2526.109" data-time-end="2527.63"><span>points to the left hand side object, </span></span><span class="transcription-time-part" data-time-start="2527.63" data-time-end="2529.849"><span>the one that we're assigning to, </span></span><span class="transcription-time-part" data-time-start="2529.849" data-time-end="2532.69"><span>and RHS is another name for the parameter. </span></span><span class="transcription-time-part" data-time-start="2532.69" data-time-end="2534.11"><span>That's the argument we passed. </span></span><span class="transcription-time-part" data-time-start="2534.11" data-time-end="2535.57"><span>So we want to delete </span></span><span class="transcription-time-part" data-time-start="2535.57" data-time-end="2537.769"><span>the old text of the left hand side. </span></span><span class="transcription-time-part" data-time-start="2537.769" data-time-end="2541.19"><span>And now that we've done that, basically, </span></span><span class="transcription-time-part" data-time-start="2541.19" data-time-end="2544.949"><span>we would just make </span></span><span class="transcription-time-part" data-time-start="2544.949" data-time-end="2546.549"><span>the left hand side look like a copy of </span></span><span class="transcription-time-part" data-time-start="2546.549" data-time-end="2548.069"><span>the right hand side by doing </span></span><span class="transcription-time-part" data-time-start="2548.069" data-time-end="2549.829"><span>the same thing we did to the right hand side. </span></span><span class="transcription-time-part" data-time-start="2549.829" data-time-end="2550.749"><span>But let me note that </span></span><span class="transcription-time-part" data-time-start="2550.749" data-time-end="2553.709"><span>this implementation is not quite right. </span></span><span class="transcription-time-part" data-time-start="2554.63" data-time-end="2556.489"><span>We'll fix it later, </span></span><span class="transcription-time-part" data-time-start="2556.489" data-time-end="2557.589"><span>but I want to make sure I put that </span></span><span class="transcription-time-part" data-time-start="2557.589" data-time-end="2558.649"><span>there for people who, </span></span><span class="transcription-time-part" data-time-start="2558.649" data-time-end="2560.149"><span>you know, look at this slide. </span></span><span class="transcription-time-part" data-time-start="2560.149" data-time-end="2561.569"><span>Look at this text at </span></span><span class="transcription-time-part" data-time-start="2561.569" data-time-end="2563.11"><span>some point in the future </span></span><span class="transcription-time-part" data-time-start="2563.11" data-time-end="2564.41"><span>and think that this code is correct. </span></span><span class="transcription-time-part" data-time-start="2564.41" data-time-end="2566.149"><span>So as long as these labels are here, </span></span><span class="transcription-time-part" data-time-start="2566.149" data-time-end="2567.249"><span>this is not correct. </span></span><span class="transcription-time-part" data-time-start="2567.249" data-time-end="2569.549"><span>Whoops, pretend the two occurrences of </span></span><span class="transcription-time-part" data-time-start="2569.549" data-time-end="2572.63"><span>the word other are really RHS. </span></span><span class="transcription-time-part" data-time-start="2572.63" data-time-end="2574.549"><span>It's going to take another 13 minutes </span></span><span class="transcription-time-part" data-time-start="2574.549" data-time-end="2576.964"><span>before the guy in the video recognizes that. </span></span><span class="transcription-time-part" data-time-start="2576.964" data-time-end="2578.999"><span>So this was the code that I </span></span><span class="transcription-time-part" data-time-start="2578.999" data-time-end="2581.299"><span>essentially executed on the board. </span></span><span class="transcription-time-part" data-time-start="2581.299" data-time-end="2582.779"><span>I got rid of the WOW </span></span><span class="transcription-time-part" data-time-start="2582.779" data-time-end="2584.339"><span>that you used to point to. </span></span><span class="transcription-time-part" data-time-start="2584.339" data-time-end="2585.999"><span>And once I did that, I was </span></span><span class="transcription-time-part" data-time-start="2585.999" data-time-end="2587.7"><span>free to go ahead and assign </span></span><span class="transcription-time-part" data-time-start="2587.7" data-time-end="2589.239"><span>the length and assign something </span></span><span class="transcription-time-part" data-time-start="2589.239" data-time-end="2591.039"><span>new to the text to the left hand side. </span></span><span class="transcription-time-part" data-time-start="2591.039" data-time-end="2592.679"><span>No problem. Okay. </span></span><span class="transcription-time-part" data-time-start="2592.679" data-time-end="2594.379"><span>So now let me </span></span><span class="transcription-time-part" data-time-start="2594.379" data-time-end="2596.459"><span>go through and fix up a few things. </span></span><span class="transcription-time-part" data-time-start="2596.459" data-time-end="2599.309"><span>Well, first of all, there's something </span></span><span class="transcription-time-part" data-time-start="2599.309" data-time-end="2602.569"><span>that's not required for us to do, </span></span><span class="transcription-time-part" data-time-start="2602.569" data-time-end="2604.49"><span>but is a convention, </span></span><span class="transcription-time-part" data-time-start="2604.49" data-time-end="2607.77"><span>and that is to make o the assignment operator </span></span><span class="transcription-time-part" data-time-start="2607.77" data-time-end="2609.369"><span>usable in a similar way </span></span><span class="transcription-time-part" data-time-start="2609.369" data-time-end="2612.109"><span>to the way it is for built in types. </span></span><span class="transcription-time-part" data-time-start="2612.109" data-time-end="2615.95"><span>So for built in types, like say integers, </span></span><span class="transcription-time-part" data-time-start="2615.95" data-time-end="2619.31"><span>if I have an integer K that has the value </span></span><span class="transcription-time-part" data-time-start="2619.31" data-time-end="2621.209"><span>three and I have </span></span><span class="transcription-time-part" data-time-start="2621.209" data-time-end="2624.729"><span>some integer M that has the value five, </span></span><span class="transcription-time-part" data-time-start="2624.729" data-time-end="2627.749"><span>and let's say I have some integer M, </span></span><span class="transcription-time-part" data-time-start="2628.02" data-time-end="2630.9"><span>Now, for built in types, </span></span><span class="transcription-time-part" data-time-start="2630.9" data-time-end="2633.619"><span>assignment returns a value. </span></span><span class="transcription-time-part" data-time-start="2633.619" data-time-end="2635.359"><span>We normally don't use it that way, right? </span></span><span class="transcription-time-part" data-time-start="2635.359" data-time-end="2636.679"><span>Normally, we might say something </span></span><span class="transcription-time-part" data-time-start="2636.679" data-time-end="2638.439"><span>like after doing this, </span></span><span class="transcription-time-part" data-time-start="2638.439" data-time-end="2642.799"><span>K gets N. So that assigns N to K, </span></span><span class="transcription-time-part" data-time-start="2642.799" data-time-end="2644.479"><span>replacing the value of K </span></span><span class="transcription-time-part" data-time-start="2644.479" data-time-end="2645.339"><span>that was three with </span></span><span class="transcription-time-part" data-time-start="2645.339" data-time-end="2646.639"><span>the value of N, which is five. </span></span><span class="transcription-time-part" data-time-start="2646.639" data-time-end="2649.039"><span>So this makes K have the value five. </span></span><span class="transcription-time-part" data-time-start="2649.039" data-time-end="2651.579"><span>And as it turns out, </span></span><span class="transcription-time-part" data-time-start="2652.15" data-time-end="2655.049"><span>this expression returns a value </span></span><span class="transcription-time-part" data-time-start="2655.049" data-time-end="2657.229"><span>as well, the new value K. </span></span><span class="transcription-time-part" data-time-start="2657.229" data-time-end="2659.009"><span>But we don't use it, right? </span></span><span class="transcription-time-part" data-time-start="2659.009" data-time-end="2660.809"><span>We're not using that value as </span></span><span class="transcription-time-part" data-time-start="2660.809" data-time-end="2662.19"><span>part of a bigger expression </span></span><span class="transcription-time-part" data-time-start="2662.19" data-time-end="2664.71"><span>in most uses the way we write assignment. </span></span><span class="transcription-time-part" data-time-start="2664.71" data-time-end="2666.469"><span>But you can if you want. </span></span><span class="transcription-time-part" data-time-start="2666.469" data-time-end="2672.609"><span>So for example, if I say M K gets N. </span></span><span class="transcription-time-part" data-time-start="2672.609" data-time-end="2676.45"><span>Now, the associativity </span></span><span class="transcription-time-part" data-time-start="2676.45" data-time-end="2677.73"><span>of the assignment operator, </span></span><span class="transcription-time-part" data-time-start="2677.73" data-time-end="2679.03"><span>unlike every other operator </span></span><span class="transcription-time-part" data-time-start="2679.03" data-time-end="2679.649"><span>for the most part, </span></span><span class="transcription-time-part" data-time-start="2679.649" data-time-end="2681.649"><span>is right to left, not left to right. </span></span><span class="transcription-time-part" data-time-start="2681.649" data-time-end="2683.569"><span>So I didn't write </span></span><span class="transcription-time-part" data-time-start="2683.569" data-time-end="2685.569"><span>any parentheses here because I don't have to, </span></span><span class="transcription-time-part" data-time-start="2685.569" data-time-end="2687.129"><span>but if I wanted </span></span><span class="transcription-time-part" data-time-start="2687.129" data-time-end="2688.69"><span>to be clear about what was happening, </span></span><span class="transcription-time-part" data-time-start="2688.69" data-time-end="2690.669"><span>I would put the parentheses here. </span></span><span class="transcription-time-part" data-time-start="2690.669" data-time-end="2691.989"><span>In other words, N </span></span><span class="transcription-time-part" data-time-start="2691.989" data-time-end="2693.549"><span>is going to be assigned to K, </span></span><span class="transcription-time-part" data-time-start="2693.549" data-time-end="2695.069"><span>and then the result of this </span></span><span class="transcription-time-part" data-time-start="2695.069" data-time-end="2696.51"><span>expression will be assigned </span></span><span class="transcription-time-part" data-time-start="2696.51" data-time-end="2699.369"><span>to M. So the five in N gets assigned to K, </span></span><span class="transcription-time-part" data-time-start="2699.369" data-time-end="2701.589"><span>so K will have the value five, </span></span><span class="transcription-time-part" data-time-start="2701.589" data-time-end="2703.43"><span>and the result of the assignment </span></span><span class="transcription-time-part" data-time-start="2703.43" data-time-end="2704.989"><span>is the new value of </span></span><span class="transcription-time-part" data-time-start="2704.989" data-time-end="2707.95"><span>K. N gets assigned </span></span><span class="transcription-time-part" data-time-start="2707.95" data-time-end="2708.75"><span>to K and the result </span></span><span class="transcription-time-part" data-time-start="2708.75" data-time-end="2709.689"><span>of the expression is five, </span></span><span class="transcription-time-part" data-time-start="2709.689" data-time-end="2711.809"><span>the new value of K, and the new value of </span></span><span class="transcription-time-part" data-time-start="2711.809" data-time-end="2712.969"><span>K will then also get </span></span><span class="transcription-time-part" data-time-start="2712.969" data-time-end="2714.729"><span>assigned to M. So in other words, </span></span><span class="transcription-time-part" data-time-start="2714.729" data-time-end="2716.209"><span>the five in N got </span></span><span class="transcription-time-part" data-time-start="2716.209" data-time-end="2718.949"><span>assigned to K which got assigned to M. </span></span><span class="transcription-time-part" data-time-start="2718.949" data-time-end="2720.63"><span>So you can string together </span></span><span class="transcription-time-part" data-time-start="2720.63" data-time-end="2721.929"><span>assignments this way or use </span></span><span class="transcription-time-part" data-time-start="2721.929" data-time-end="2723.51"><span>assignments in other contexts </span></span><span class="transcription-time-part" data-time-start="2723.51" data-time-end="2725.449"><span>where it'll return a value, </span></span><span class="transcription-time-part" data-time-start="2725.449" data-time-end="2726.869"><span>which will be the new value </span></span><span class="transcription-time-part" data-time-start="2726.869" data-time-end="2728.454"><span>of the left hand side. </span></span><span class="transcription-time-part" data-time-start="2728.454" data-time-end="2730.12"><span>That's not a feature </span></span><span class="transcription-time-part" data-time-start="2730.12" data-time-end="2731.679"><span>that's used tremendously much, </span></span><span class="transcription-time-part" data-time-start="2731.679" data-time-end="2733.719"><span>but it is part </span></span><span class="transcription-time-part" data-time-start="2733.719" data-time-end="2735.919"><span>of the language in C and C plus plus. </span></span><span class="transcription-time-part" data-time-start="2735.919" data-time-end="2737.259"><span>So the style for </span></span><span class="transcription-time-part" data-time-start="2737.259" data-time-end="2738.519"><span>writing assignment operator for </span></span><span class="transcription-time-part" data-time-start="2738.519" data-time-end="2741.319"><span>your own types is to follow the same idea. </span></span><span class="transcription-time-part" data-time-start="2741.319" data-time-end="2743.299"><span>Do the same thing, make it so that </span></span><span class="transcription-time-part" data-time-start="2743.299" data-time-end="2744.56"><span>your assignment of strings </span></span><span class="transcription-time-part" data-time-start="2744.56" data-time-end="2746.219"><span>could be strung together this way. </span></span><span class="transcription-time-part" data-time-start="2746.219" data-time-end="2748.44"><span>That is, if I had three strings, </span></span><span class="transcription-time-part" data-time-start="2748.44" data-time-end="2750.319"><span>let's have some other string. </span></span><span class="transcription-time-part" data-time-start="2750.319" data-time-end="2752.4"><span>So, let's say, these were all strings. </span></span><span class="transcription-time-part" data-time-start="2752.4" data-time-end="2754.58"><span>We want the same effect. </span></span><span class="transcription-time-part" data-time-start="2754.58" data-time-end="2756.919"><span>So the language says </span></span><span class="transcription-time-part" data-time-start="2756.919" data-time-end="2758.7"><span>the precedence of the assignment operator </span></span><span class="transcription-time-part" data-time-start="2758.7" data-time-end="2759.339"><span>is right to left, </span></span><span class="transcription-time-part" data-time-start="2759.339" data-time-end="2760.879"><span>so this will be treated this way. </span></span><span class="transcription-time-part" data-time-start="2760.879" data-time-end="2762.939"><span>So in other words, the goal is </span></span><span class="transcription-time-part" data-time-start="2762.939" data-time-end="2765.039"><span>to assign S to U and </span></span><span class="transcription-time-part" data-time-start="2765.039" data-time-end="2767.16"><span>then use the result </span></span><span class="transcription-time-part" data-time-start="2767.16" data-time-end="2770.144"><span>of the assignment and assign it to. </span></span><span class="transcription-time-part" data-time-start="2770.144" data-time-end="2772.07"><span>So what should the result </span></span><span class="transcription-time-part" data-time-start="2772.07" data-time-end="2773.329"><span>of the assignment be? </span></span><span class="transcription-time-part" data-time-start="2773.329" data-time-end="2775.61"><span>Well, following the pattern </span></span><span class="transcription-time-part" data-time-start="2775.61" data-time-end="2777.729"><span>with integers or other built in types, </span></span><span class="transcription-time-part" data-time-start="2777.729" data-time-end="2780.629"><span>I guess, the new value of U. So that's it. </span></span><span class="transcription-time-part" data-time-start="2780.629" data-time-end="2782.249"><span>The convention in C plus </span></span><span class="transcription-time-part" data-time-start="2782.249" data-time-end="2783.269"><span>plus is when you </span></span><span class="transcription-time-part" data-time-start="2783.269" data-time-end="2784.61"><span>overload the assignment operator, </span></span><span class="transcription-time-part" data-time-start="2784.61" data-time-end="2787.129"><span>you declare it as a function that will </span></span><span class="transcription-time-part" data-time-start="2787.129" data-time-end="2790.609"><span>return the new value of the left hand side. </span></span><span class="transcription-time-part" data-time-start="2790.609" data-time-end="2793.45"><span>So if the new value of U gets returned, </span></span><span class="transcription-time-part" data-time-start="2793.45" data-time-end="2794.969"><span>and that gets assigned to V, well, </span></span><span class="transcription-time-part" data-time-start="2794.969" data-time-end="2796.129"><span>then this has the same </span></span><span class="transcription-time-part" data-time-start="2796.129" data-time-end="2797.85"><span>effect as it does for integers. </span></span><span class="transcription-time-part" data-time-start="2797.85" data-time-end="2799.629"><span>The current value of S, which is </span></span><span class="transcription-time-part" data-time-start="2799.629" data-time-end="2801.809"><span>let's say hello gets assigned to U, </span></span><span class="transcription-time-part" data-time-start="2801.809" data-time-end="2805.199"><span>and that hello then gets assigned over to V. </span></span><span class="transcription-time-part" data-time-start="2805.199" data-time-end="2807.989"><span>Okay, so it's the convention you ought </span></span><span class="transcription-time-part" data-time-start="2807.989" data-time-end="2810.429"><span>to follow because everybody does it that way. </span></span><span class="transcription-time-part" data-time-start="2810.429" data-time-end="2813.25"><span>So let me see what that looks like in code. </span></span><span class="transcription-time-part" data-time-start="2813.25" data-time-end="2815.53"><span>So that would say, apparently, </span></span><span class="transcription-time-part" data-time-start="2815.53" data-time-end="2817.649"><span>the assignment operator is going to </span></span><span class="transcription-time-part" data-time-start="2817.649" data-time-end="2819.409"><span>return the new value </span></span><span class="transcription-time-part" data-time-start="2819.409" data-time-end="2821.169"><span>of the left hand side, which is a string. </span></span><span class="transcription-time-part" data-time-start="2821.169" data-time-end="2822.869"><span>So I'll say string for now. </span></span><span class="transcription-time-part" data-time-start="2822.869" data-time-end="2824.449"><span>That's not quite again, </span></span><span class="transcription-time-part" data-time-start="2824.449" data-time-end="2825.71"><span>it's not quite conventional, </span></span><span class="transcription-time-part" data-time-start="2825.71" data-time-end="2827.909"><span>so I'll fix this in a minute. </span></span><span class="transcription-time-part" data-time-start="2827.909" data-time-end="2829.99"><span>And this is still not quite </span></span><span class="transcription-time-part" data-time-start="2829.99" data-time-end="2831.769"><span>conventional. I'll fix that in a minute. </span></span><span class="transcription-time-part" data-time-start="2831.769" data-time-end="2834.249"><span>But the idea would be when we're all done, </span></span><span class="transcription-time-part" data-time-start="2834.249" data-time-end="2836.51"><span>we're going to return the new value </span></span><span class="transcription-time-part" data-time-start="2836.51" data-time-end="2838.069"><span>of the left hand side. </span></span><span class="transcription-time-part" data-time-start="2838.069" data-time-end="2840.609"><span>Now, when we do this assignment, </span></span><span class="transcription-time-part" data-time-start="2840.609" data-time-end="2842.489"><span>the left hand side </span></span><span class="transcription-time-part" data-time-start="2842.489" data-time-end="2845.449"><span>is you. So this points to you. </span></span><span class="transcription-time-part" data-time-start="2845.449" data-time-end="2848.869"><span>So do we say return this no, </span></span><span class="transcription-time-part" data-time-start="2848.869" data-time-end="2850.569"><span>we don't say return this. </span></span><span class="transcription-time-part" data-time-start="2850.569" data-time-end="2853.93"><span>This is of type pointer to string. </span></span><span class="transcription-time-part" data-time-start="2853.93" data-time-end="2855.949"><span>So if we said return this, </span></span><span class="transcription-time-part" data-time-start="2855.949" data-time-end="2857.41"><span>we would be returning </span></span><span class="transcription-time-part" data-time-start="2857.41" data-time-end="2860.109"><span>a pointer to the left hand side. </span></span><span class="transcription-time-part" data-time-start="2860.109" data-time-end="2861.629"><span>That's not what we want to return. </span></span><span class="transcription-time-part" data-time-start="2861.629" data-time-end="2862.909"><span>We want to return the </span></span><span class="transcription-time-part" data-time-start="2862.909" data-time-end="2864.829"><span>actual new value of the left hand side. </span></span><span class="transcription-time-part" data-time-start="2864.829" data-time-end="2867.27"><span>So we have to follow the pointer. </span></span><span class="transcription-time-part" data-time-start="2867.27" data-time-end="2868.809"><span>We want to return the </span></span><span class="transcription-time-part" data-time-start="2868.809" data-time-end="2870.549"><span>object that this points to. </span></span><span class="transcription-time-part" data-time-start="2870.549" data-time-end="2872.31"><span>Star this means the object </span></span><span class="transcription-time-part" data-time-start="2872.31" data-time-end="2873.269"><span>that this points to. </span></span><span class="transcription-time-part" data-time-start="2873.269" data-time-end="2874.649"><span>Star of any pointer means </span></span><span class="transcription-time-part" data-time-start="2874.649" data-time-end="2876.009"><span>the object the pointer points to. </span></span><span class="transcription-time-part" data-time-start="2876.009" data-time-end="2878.41"><span>So that's now correct. </span></span><span class="transcription-time-part" data-time-start="2878.41" data-time-end="2882.79"><span>We want to return the object </span></span><span class="transcription-time-part" data-time-start="2882.79" data-time-end="2884.189"><span>this pointer points to. </span></span><span class="transcription-time-part" data-time-start="2884.189" data-time-end="2885.789"><span>Okay, that would work. </span></span><span class="transcription-time-part" data-time-start="2885.789" data-time-end="2888.009"><span>It's a bit inefficient, </span></span><span class="transcription-time-part" data-time-start="2888.009" data-time-end="2889.869"><span>and it will always be a bit </span></span><span class="transcription-time-part" data-time-start="2889.869" data-time-end="2891.569"><span>inefficient for almost any type </span></span><span class="transcription-time-part" data-time-start="2891.569" data-time-end="2892.209"><span>you do this for. </span></span><span class="transcription-time-part" data-time-start="2892.209" data-time-end="2894.309"><span>So let's see where the inefficiency is. </span></span><span class="transcription-time-part" data-time-start="2894.309" data-time-end="2897.61"><span>The problem is, we're returning a value. </span></span><span class="transcription-time-part" data-time-start="2897.61" data-time-end="2900.349"><span>We're returning a brand new string, </span></span><span class="transcription-time-part" data-time-start="2900.349" data-time-end="2903.169"><span>a copy of star this. </span></span><span class="transcription-time-part" data-time-start="2903.169" data-time-end="2906.089"><span>So when a function returns a value, </span></span><span class="transcription-time-part" data-time-start="2906.089" data-time-end="2907.75"><span>it's going to return </span></span><span class="transcription-time-part" data-time-start="2907.75" data-time-end="2909.409"><span>a temporary object that's </span></span><span class="transcription-time-part" data-time-start="2909.409" data-time-end="2911.53"><span>a copy of your return expression. </span></span><span class="transcription-time-part" data-time-start="2911.53" data-time-end="2914.909"><span>So return star this is going to say, </span></span><span class="transcription-time-part" data-time-start="2914.909" data-time-end="2916.849"><span>Okay, take the left hand side, </span></span><span class="transcription-time-part" data-time-start="2916.849" data-time-end="2919.269"><span>which in our case is U and </span></span><span class="transcription-time-part" data-time-start="2919.269" data-time-end="2920.869"><span>make a copy of it to return to </span></span><span class="transcription-time-part" data-time-start="2920.869" data-time-end="2923.91"><span>the caller so that in an expression </span></span><span class="transcription-time-part" data-time-start="2923.91" data-time-end="2927.469"><span>like V gets the result of U gets S, </span></span><span class="transcription-time-part" data-time-start="2927.469" data-time-end="2929.609"><span>we assign S over to U, </span></span><span class="transcription-time-part" data-time-start="2929.609" data-time-end="2931.69"><span>and then we would be returning </span></span><span class="transcription-time-part" data-time-start="2931.69" data-time-end="2934.329"><span>a copy of the new value of U, </span></span><span class="transcription-time-part" data-time-start="2934.329" data-time-end="2937.244"><span>a copy of you as </span></span><span class="transcription-time-part" data-time-start="2937.244" data-time-end="2939.899"><span>the argument to the </span></span><span class="transcription-time-part" data-time-start="2939.899" data-time-end="2942.039"><span>assignment operator for V. In other words, </span></span><span class="transcription-time-part" data-time-start="2942.039" data-time-end="2943.899"><span>this thing means take V, </span></span><span class="transcription-time-part" data-time-start="2943.899" data-time-end="2947.439"><span>call the operator equal function on U gets S, </span></span><span class="transcription-time-part" data-time-start="2947.439" data-time-end="2950.48"><span>but gets S means, </span></span><span class="transcription-time-part" data-time-start="2950.48" data-time-end="2953.099"><span>call the operator equal function on </span></span><span class="transcription-time-part" data-time-start="2953.099" data-time-end="2956.279"><span>S. Assigning S to U </span></span><span class="transcription-time-part" data-time-start="2956.279" data-time-end="2957.779"><span>and then assigning the result to V </span></span><span class="transcription-time-part" data-time-start="2957.779" data-time-end="2959.859"><span>is really just two function calls. </span></span><span class="transcription-time-part" data-time-start="2959.859" data-time-end="2962.599"><span>Call the member function operator equal on U, </span></span><span class="transcription-time-part" data-time-start="2962.599" data-time-end="2964.299"><span>passing it S and </span></span><span class="transcription-time-part" data-time-start="2964.299" data-time-end="2966.899"><span>then call the operator equal function on V, </span></span><span class="transcription-time-part" data-time-start="2966.899" data-time-end="2970.104"><span>passing it the result of this first call. </span></span><span class="transcription-time-part" data-time-start="2970.104" data-time-end="2973.649"><span>So if the results of this first call is </span></span><span class="transcription-time-part" data-time-start="2973.649" data-time-end="2977.169"><span>a copy of the new value of you. </span></span><span class="transcription-time-part" data-time-start="2977.169" data-time-end="2978.309"><span>It's a copy of you, </span></span><span class="transcription-time-part" data-time-start="2978.309" data-time-end="2981.269"><span>then that's going to be used. </span></span><span class="transcription-time-part" data-time-start="2981.55" data-time-end="2983.769"><span>The copy of is going to be </span></span><span class="transcription-time-part" data-time-start="2983.769" data-time-end="2985.95"><span>used as the argument </span></span><span class="transcription-time-part" data-time-start="2985.95" data-time-end="2987.77"><span>to V's assignment operator. </span></span><span class="transcription-time-part" data-time-start="2987.77" data-time-end="2989.789"><span>And basically, what we did was we </span></span><span class="transcription-time-part" data-time-start="2989.789" data-time-end="2993.069"><span>took the already existing object, right? </span></span><span class="transcription-time-part" data-time-start="2993.069" data-time-end="2994.47"><span>The already existing object </span></span><span class="transcription-time-part" data-time-start="2994.47" data-time-end="2995.61"><span>that this pointer pointed </span></span><span class="transcription-time-part" data-time-start="2995.61" data-time-end="2997.309"><span>to and made a copy of </span></span><span class="transcription-time-part" data-time-start="2997.309" data-time-end="2999.989"><span>it for V to assign from. </span></span><span class="transcription-time-part" data-time-start="2999.989" data-time-end="3001.549"><span>Well, why not just let V </span></span><span class="transcription-time-part" data-time-start="3001.549" data-time-end="3003.25"><span>assign from directly? </span></span><span class="transcription-time-part" data-time-start="3003.25" data-time-end="3005.049"><span>Well, how do we do that? </span></span><span class="transcription-time-part" data-time-start="3005.049" data-time-end="3006.47"><span>How do we make this function, </span></span><span class="transcription-time-part" data-time-start="3006.47" data-time-end="3008.629"><span>not return a copy of </span></span><span class="transcription-time-part" data-time-start="3008.629" data-time-end="3013.339"><span>you but you itself, another name for you. </span></span><span class="transcription-time-part" data-time-start="3013.339" data-time-end="3015.279"><span>Oh, another name for you. </span></span><span class="transcription-time-part" data-time-start="3015.279" data-time-end="3016.679"><span>That's what a reference is. </span></span><span class="transcription-time-part" data-time-start="3016.679" data-time-end="3020.339"><span>So the convention is you have </span></span><span class="transcription-time-part" data-time-start="3020.339" data-time-end="3022.6"><span>the assignment operator return </span></span><span class="transcription-time-part" data-time-start="3022.6" data-time-end="3024.499"><span>a reference to and </span></span><span class="transcription-time-part" data-time-start="3024.499" data-time-end="3027.219"><span>now that's the conventional way to write it. </span></span><span class="transcription-time-part" data-time-start="3027.219" data-time-end="3029.78"><span>You have the assignment operator return </span></span><span class="transcription-time-part" data-time-start="3029.78" data-time-end="3032.86"><span>a reference to the left hand side object. </span></span><span class="transcription-time-part" data-time-start="3032.86" data-time-end="3034.759"><span>So returning Star this says, </span></span><span class="transcription-time-part" data-time-start="3034.759" data-time-end="3036.779"><span>return the object to this pointer </span></span><span class="transcription-time-part" data-time-start="3036.779" data-time-end="3039.199"><span>we're not going to return a copy of it. </span></span><span class="transcription-time-part" data-time-start="3039.199" data-time-end="3040.999"><span>We're going to return another name for it. </span></span><span class="transcription-time-part" data-time-start="3040.999" data-time-end="3042.259"><span>We're going to return a reference to it. </span></span><span class="transcription-time-part" data-time-start="3042.259" data-time-end="3043.639"><span>We don't make a copy of it. </span></span><span class="transcription-time-part" data-time-start="3043.639" data-time-end="3046.019"><span>We'll just return another name for it, </span></span><span class="transcription-time-part" data-time-start="3046.019" data-time-end="3049.06"><span>which will be immediately then passed </span></span><span class="transcription-time-part" data-time-start="3049.06" data-time-end="3052.619"><span>over to the assignment operator here, </span></span><span class="transcription-time-part" data-time-start="3052.619" data-time-end="3055.26"><span>which will have RHS </span></span><span class="transcription-time-part" data-time-start="3055.26" data-time-end="3058.459"><span>be another name for this other name for you. </span></span><span class="transcription-time-part" data-time-start="3058.459" data-time-end="3060.229"><span>It's another name for you. </span></span><span class="transcription-time-part" data-time-start="3060.229" data-time-end="3062.639"><span>So no copy of you is being made. </span></span><span class="transcription-time-part" data-time-start="3062.639" data-time-end="3064.419"><span>A reference to you is being passed from </span></span><span class="transcription-time-part" data-time-start="3064.419" data-time-end="3066.5"><span>the assignment operator back to the caller, </span></span><span class="transcription-time-part" data-time-start="3066.5" data-time-end="3068.22"><span>which is then immediately being passed </span></span><span class="transcription-time-part" data-time-start="3068.22" data-time-end="3069.739"><span>over to the second call </span></span><span class="transcription-time-part" data-time-start="3069.739" data-time-end="3071.179"><span>of operator equal over here. </span></span><span class="transcription-time-part" data-time-start="3071.179" data-time-end="3071.739"><span>Again, </span></span><span class="transcription-time-part" data-time-start="3071.739" data-time-end="3073.719"><span>don't worry so much about the detail there. </span></span><span class="transcription-time-part" data-time-start="3073.719" data-time-end="3075.999"><span>Just remember the convention is </span></span><span class="transcription-time-part" data-time-start="3075.999" data-time-end="3078.2"><span>the assignment operator returns </span></span><span class="transcription-time-part" data-time-start="3078.2" data-time-end="3079.659"><span>a reference to the </span></span><span class="transcription-time-part" data-time-start="3079.659" data-time-end="3081.039"><span>kind of thing you're assigning to, </span></span><span class="transcription-time-part" data-time-start="3081.039" data-time-end="3082.5"><span>and the assignment </span></span><span class="transcription-time-part" data-time-start="3082.5" data-time-end="3084.559"><span>operators the last statement </span></span><span class="transcription-time-part" data-time-start="3084.559" data-time-end="3086.319"><span>the assignment operator should execute should </span></span><span class="transcription-time-part" data-time-start="3086.319" data-time-end="3088.759"><span>be a return of star this, </span></span><span class="transcription-time-part" data-time-start="3088.759" data-time-end="3091.109"><span>a return on the left hand side. </span></span><span class="transcription-time-part" data-time-start="3091.109" data-time-end="3094.079"><span>Okay, so that we </span></span><span class="transcription-time-part" data-time-start="3094.079" data-time-end="3096.86"><span>think is something that works. </span></span><span class="transcription-time-part" data-time-start="3096.86" data-time-end="3098.899"><span>I'm still leaving up the not quite </span></span><span class="transcription-time-part" data-time-start="3098.899" data-time-end="3101.079"><span>right because it's still not quite right. </span></span><span class="transcription-time-part" data-time-start="3101.079" data-time-end="3104.4"><span>But it looks like it works. </span></span><span class="transcription-time-part" data-time-start="3104.4" data-time-end="3107.299"><span>It cleans up the left hand side, </span></span><span class="transcription-time-part" data-time-start="3107.299" data-time-end="3110.899"><span>and then makes the left hand side </span></span><span class="transcription-time-part" data-time-start="3110.899" data-time-end="3113.184"><span>look like a copy of the right hand side. </span></span><span class="transcription-time-part" data-time-start="3113.184" data-time-end="3116.029"><span>And then by convention, return star this. </span></span><span class="transcription-time-part" data-time-start="3116.029" data-time-end="3118.209"><span>So what's wrong there? </span></span><span class="transcription-time-part" data-time-start="3118.209" data-time-end="3120.33"><span>Isn't that what should happen? </span></span><span class="transcription-time-part" data-time-start="3120.33" data-time-end="3121.409"><span>Well, let's see. </span></span><span class="transcription-time-part" data-time-start="3121.409" data-time-end="3123.469"><span>What that code does in </span></span><span class="transcription-time-part" data-time-start="3123.469" data-time-end="3126.309"><span>the context of the call of Gs S, </span></span><span class="transcription-time-part" data-time-start="3126.309" data-time-end="3128.069"><span>this pointer points to U </span></span><span class="transcription-time-part" data-time-start="3128.069" data-time-end="3129.749"><span>and RHS is another name for </span></span><span class="transcription-time-part" data-time-start="3129.749" data-time-end="3132.03"><span>S. So it deletes </span></span><span class="transcription-time-part" data-time-start="3132.03" data-time-end="3134.89"><span>the mtext of the left hand side object, </span></span><span class="transcription-time-part" data-time-start="3134.89" data-time-end="3136.629"><span>then it brings over the length, </span></span><span class="transcription-time-part" data-time-start="3136.629" data-time-end="3138.15"><span>then it dynamically allocates </span></span><span class="transcription-time-part" data-time-start="3138.15" data-time-end="3139.489"><span>a new array at the right </span></span><span class="transcription-time-part" data-time-start="3139.489" data-time-end="3141.089"><span>of this length plus one </span></span><span class="transcription-time-part" data-time-start="3141.089" data-time-end="3142.969"><span>and stores a pointer in here, </span></span><span class="transcription-time-part" data-time-start="3142.969" data-time-end="3145.229"><span>so the old values gone here, </span></span><span class="transcription-time-part" data-time-start="3145.229" data-time-end="3146.749"><span>and then it copies the text. </span></span><span class="transcription-time-part" data-time-start="3146.749" data-time-end="3148.449"><span>And then it returns a reference to you. </span></span><span class="transcription-time-part" data-time-start="3148.449" data-time-end="3152.454"><span>Okay, that's correct behavior in this case. </span></span><span class="transcription-time-part" data-time-start="3152.454" data-time-end="3154.359"><span>Here's the problem. Let's say </span></span><span class="transcription-time-part" data-time-start="3154.359" data-time-end="3156.26"><span>we have an array of strings. </span></span><span class="transcription-time-part" data-time-start="3156.26" data-time-end="3158.519"><span>So here's some string array, </span></span><span class="transcription-time-part" data-time-start="3158.519" data-time-end="3160.899"><span>and there's a bunch of strings in this array. </span></span><span class="transcription-time-part" data-time-start="3160.899" data-time-end="3163.7"><span>Each one of these is a string object, </span></span><span class="transcription-time-part" data-time-start="3163.7" data-time-end="3165.539"><span>and I have </span></span><span class="transcription-time-part" data-time-start="3165.539" data-time-end="3167.159"><span>some algorithm that's going through </span></span><span class="transcription-time-part" data-time-start="3167.159" data-time-end="3168.92"><span>this array and rearranging </span></span><span class="transcription-time-part" data-time-start="3168.92" data-time-end="3169.959"><span>things and doing all kinds </span></span><span class="transcription-time-part" data-time-start="3169.959" data-time-end="3171.079"><span>of stuff with things. </span></span><span class="transcription-time-part" data-time-start="3171.079" data-time-end="3174"><span>And so in this algorithm, </span></span><span class="transcription-time-part" data-time-start="3174" data-time-end="3175.179"><span>we're looping around for </span></span><span class="transcription-time-part" data-time-start="3175.179" data-time-end="3176.779"><span>various values of I and J. </span></span><span class="transcription-time-part" data-time-start="3176.779" data-time-end="3179.159"><span>And so if I is this element, </span></span><span class="transcription-time-part" data-time-start="3179.159" data-time-end="3180.539"><span>if I is indicating this element </span></span><span class="transcription-time-part" data-time-start="3180.539" data-time-end="3181.959"><span>and J's indicating that element, </span></span><span class="transcription-time-part" data-time-start="3181.959" data-time-end="3182.939"><span>then this element is going to </span></span><span class="transcription-time-part" data-time-start="3182.939" data-time-end="3184.059"><span>be assigned over to this one. </span></span><span class="transcription-time-part" data-time-start="3184.059" data-time-end="3185.839"><span>And so strings get </span></span><span class="transcription-time-part" data-time-start="3185.839" data-time-end="3186.739"><span>assigned around from </span></span><span class="transcription-time-part" data-time-start="3186.739" data-time-end="3188.599"><span>one array element to another. </span></span><span class="transcription-time-part" data-time-start="3188.599" data-time-end="3193.08"><span>Now, every so often in this algorithm, </span></span><span class="transcription-time-part" data-time-start="3193.08" data-time-end="3196.219"><span>I and J happen to have the same value. </span></span><span class="transcription-time-part" data-time-start="3196.219" data-time-end="3198.54"><span>So we're assigning a string to itself. </span></span><span class="transcription-time-part" data-time-start="3198.54" data-time-end="3200.26"><span>Now, what do you expect </span></span><span class="transcription-time-part" data-time-start="3200.26" data-time-end="3202.9"><span>happens when you assign an object to itself? </span></span><span class="transcription-time-part" data-time-start="3202.9" data-time-end="3204.539"><span>Well, again, you know, </span></span><span class="transcription-time-part" data-time-start="3204.539" data-time-end="3206.58"><span>think about plain old types like integers. </span></span><span class="transcription-time-part" data-time-start="3206.58" data-time-end="3208.979"><span>So I have an integer K with a value three, </span></span><span class="transcription-time-part" data-time-start="3208.979" data-time-end="3212.339"><span>and if I were to ever say K gets K, </span></span><span class="transcription-time-part" data-time-start="3212.339" data-time-end="3213.739"><span>which would be a silly thing to say, </span></span><span class="transcription-time-part" data-time-start="3213.739" data-time-end="3215.019"><span>but if I did, </span></span><span class="transcription-time-part" data-time-start="3215.019" data-time-end="3216.999"><span>maybe less silly would be </span></span><span class="transcription-time-part" data-time-start="3216.999" data-time-end="3219.579"><span>imagine an array of integers and </span></span><span class="transcription-time-part" data-time-start="3219.579" data-time-end="3222.099"><span>AsmI is being assigned AJ for </span></span><span class="transcription-time-part" data-time-start="3222.099" data-time-end="3223.539"><span>various values of I&amp;J and </span></span><span class="transcription-time-part" data-time-start="3223.539" data-time-end="3225.299"><span>every so often, I and J are the same. </span></span><span class="transcription-time-part" data-time-start="3225.299" data-time-end="3227.02"><span>So AsmI gets ASI. </span></span><span class="transcription-time-part" data-time-start="3227.02" data-time-end="3228.319"><span>Anyway, let's just do </span></span><span class="transcription-time-part" data-time-start="3228.319" data-time-end="3229.479"><span>it with simple integer variable </span></span><span class="transcription-time-part" data-time-start="3229.479" data-time-end="3232.329"><span>K. Well, let's see then. </span></span><span class="transcription-time-part" data-time-start="3232.329" data-time-end="3233.769"><span>We take the value of </span></span><span class="transcription-time-part" data-time-start="3233.769" data-time-end="3235.849"><span>the right hand side, which is three. </span></span><span class="transcription-time-part" data-time-start="3235.849" data-time-end="3238.229"><span>We start in K, </span></span><span class="transcription-time-part" data-time-start="3238.229" data-time-end="3240.47"><span>wiping out the old value. </span></span><span class="transcription-time-part" data-time-start="3240.47" data-time-end="3242.65"><span>K is unchanged. </span></span><span class="transcription-time-part" data-time-start="3242.65" data-time-end="3244.65"><span>That's what people expect </span></span><span class="transcription-time-part" data-time-start="3244.65" data-time-end="3245.949"><span>self assignment to do. </span></span><span class="transcription-time-part" data-time-start="3245.949" data-time-end="3248.37"><span>If an object's being assigned to itself, </span></span><span class="transcription-time-part" data-time-start="3248.37" data-time-end="3250.269"><span>for one reason or another, </span></span><span class="transcription-time-part" data-time-start="3250.269" data-time-end="3252.41"><span>usually never is anything as silly </span></span><span class="transcription-time-part" data-time-start="3252.41" data-time-end="3254.969"><span>as this with the same variable on both sides, </span></span><span class="transcription-time-part" data-time-start="3254.969" data-time-end="3256.309"><span>but it happens a lot in </span></span><span class="transcription-time-part" data-time-start="3256.309" data-time-end="3259.149"><span>situations like this where you have </span></span><span class="transcription-time-part" data-time-start="3259.74" data-time-end="3263.339"><span>two expressions that sometimes </span></span><span class="transcription-time-part" data-time-start="3263.339" data-time-end="3265.52"><span>will end up indicating </span></span><span class="transcription-time-part" data-time-start="3265.52" data-time-end="3267.06"><span>actually the same object. </span></span><span class="transcription-time-part" data-time-start="3267.06" data-time-end="3268.84"><span>So when it happens, </span></span><span class="transcription-time-part" data-time-start="3268.84" data-time-end="3271.92"><span>the effect should be like nothing happened. </span></span><span class="transcription-time-part" data-time-start="3271.92" data-time-end="3273.28"><span>I mean, there should be no effect. </span></span><span class="transcription-time-part" data-time-start="3273.28" data-time-end="3275.039"><span>Assigning value an object to </span></span><span class="transcription-time-part" data-time-start="3275.039" data-time-end="3276.6"><span>itself should have no effect. </span></span><span class="transcription-time-part" data-time-start="3276.6" data-time-end="3278.139"><span>That's our goal. </span></span><span class="transcription-time-part" data-time-start="3278.139" data-time-end="3282.54"><span>So let's see what happens with our strings. </span></span><span class="transcription-time-part" data-time-start="3282.54" data-time-end="3284.619"><span>So let's say for example, </span></span><span class="transcription-time-part" data-time-start="3284.619" data-time-end="3287.859"><span>I have some string U and U has the value WOW </span></span><span class="transcription-time-part" data-time-start="3287.859" data-time-end="3291.179"><span>and I for one reason </span></span><span class="transcription-time-part" data-time-start="3291.179" data-time-end="3293.52"><span>or another, assign to itself. </span></span><span class="transcription-time-part" data-time-start="3293.52" data-time-end="3297.749"><span>So you gets. Again, we </span></span><span class="transcription-time-part" data-time-start="3297.749" data-time-end="3298.329"><span>never do it in </span></span><span class="transcription-time-part" data-time-start="3298.329" data-time-end="3299.669"><span>any way that's as silly as that. </span></span><span class="transcription-time-part" data-time-start="3299.669" data-time-end="3301.35"><span>I'd probably be some array of strings, </span></span><span class="transcription-time-part" data-time-start="3301.35" data-time-end="3302.549"><span>and we're assigning an object to it. </span></span><span class="transcription-time-part" data-time-start="3302.549" data-time-end="3303.309"><span>So I'm just using with </span></span><span class="transcription-time-part" data-time-start="3303.309" data-time-end="3305.089"><span>one particular variable here. </span></span><span class="transcription-time-part" data-time-start="3305.089" data-time-end="3306.029"><span>Okay. </span></span><span class="transcription-time-part" data-time-start="3306.029" data-time-end="3309.349"><span>Now remember that means take you and </span></span><span class="transcription-time-part" data-time-start="3309.349" data-time-end="3311.889"><span>call Opera requal with </span></span><span class="transcription-time-part" data-time-start="3311.889" data-time-end="3314.189"><span>the right hand side as an argument. </span></span><span class="transcription-time-part" data-time-start="3314.22" data-time-end="3316.659"><span>Okay, so the left hand side is </span></span><span class="transcription-time-part" data-time-start="3316.659" data-time-end="3319.019"><span>the objects that this pointer points to. </span></span><span class="transcription-time-part" data-time-start="3319.019" data-time-end="3322.379"><span>The right hand side is another name for you. </span></span><span class="transcription-time-part" data-time-start="3322.46" data-time-end="3325.459"><span>So what we have is </span></span><span class="transcription-time-part" data-time-start="3325.459" data-time-end="3327.86"><span>a pointer and a reference </span></span><span class="transcription-time-part" data-time-start="3327.86" data-time-end="3329.96"><span>both indicating the same objects. </span></span><span class="transcription-time-part" data-time-start="3329.96" data-time-end="3331.739"><span>So what does our code do? </span></span><span class="transcription-time-part" data-time-start="3331.739" data-time-end="3335.159"><span>Well, the first thing our code did was </span></span><span class="transcription-time-part" data-time-start="3335.159" data-time-end="3339.49"><span>get rid of the left hand sides old value. </span></span><span class="transcription-time-part" data-time-start="3339.49" data-time-end="3340.989"><span>So delete the text of </span></span><span class="transcription-time-part" data-time-start="3340.989" data-time-end="3342.469"><span>the object that this pointer points to. </span></span><span class="transcription-time-part" data-time-start="3342.469" data-time-end="3344.49"><span>Get rid of the left hand side is old value. </span></span><span class="transcription-time-part" data-time-start="3344.49" data-time-end="3346.449"><span>So call Delete on this pointer, </span></span><span class="transcription-time-part" data-time-start="3346.449" data-time-end="3348.049"><span>and that gets rid of that story. </span></span><span class="transcription-time-part" data-time-start="3348.049" data-time-end="3351.289"><span>Well, you can imagine that nothing </span></span><span class="transcription-time-part" data-time-start="3351.289" data-time-end="3352.649"><span>could work after that </span></span><span class="transcription-time-part" data-time-start="3352.649" data-time-end="3354.749"><span>because we lost the WOW. </span></span><span class="transcription-time-part" data-time-start="3354.749" data-time-end="3355.909"><span>If the whole point of </span></span><span class="transcription-time-part" data-time-start="3355.909" data-time-end="3357.429"><span>self assignment, I'm sorry, </span></span><span class="transcription-time-part" data-time-start="3357.429" data-time-end="3358.309"><span>I the whole result of </span></span><span class="transcription-time-part" data-time-start="3358.309" data-time-end="3359.45"><span>self assignment is supposed </span></span><span class="transcription-time-part" data-time-start="3359.45" data-time-end="3361.909"><span>to be that it looks like nothing changed, </span></span><span class="transcription-time-part" data-time-start="3361.909" data-time-end="3365.149"><span>something changed, we lost that text. </span></span><span class="transcription-time-part" data-time-start="3365.149" data-time-end="3368.209"><span>So so starting off by doing </span></span><span class="transcription-time-part" data-time-start="3368.209" data-time-end="3371.069"><span>the delete square bracket text </span></span><span class="transcription-time-part" data-time-start="3371.069" data-time-end="3373.609"><span>is going to lead us into Trump. </span></span><span class="transcription-time-part" data-time-start="3373.609" data-time-end="3375.549"><span>Now, let's see what we did after that. </span></span><span class="transcription-time-part" data-time-start="3375.549" data-time-end="3376.969"><span>The next statement we did was </span></span><span class="transcription-time-part" data-time-start="3376.969" data-time-end="3378.749"><span>to set the MLM to </span></span><span class="transcription-time-part" data-time-start="3378.749" data-time-end="3380.329"><span>the other guys to the right hand side </span></span><span class="transcription-time-part" data-time-start="3380.329" data-time-end="3382.109"><span>of MM. Oh, I'm sorry. </span></span><span class="transcription-time-part" data-time-start="3382.109" data-time-end="3383.49"><span>I'm sure somebody probably commented </span></span><span class="transcription-time-part" data-time-start="3383.49" data-time-end="3384.929"><span>on this and nobody told me. </span></span><span class="transcription-time-part" data-time-start="3384.929" data-time-end="3388.069"><span>I'm sorry. My parameters called RHS. </span></span><span class="transcription-time-part" data-time-start="3388.069" data-time-end="3392.249"><span>So, this should be RHS. </span></span><span class="transcription-time-part" data-time-start="3392.54" data-time-end="3396.139"><span>And this thing here should be RHS. </span></span><span class="transcription-time-part" data-time-start="3396.139" data-time-end="3398.199"><span>I copied and pasted and forgot </span></span><span class="transcription-time-part" data-time-start="3398.199" data-time-end="3398.899"><span>that I used </span></span><span class="transcription-time-part" data-time-start="3398.899" data-time-end="3400.479"><span>a different name for the variable. </span></span><span class="transcription-time-part" data-time-start="3400.479" data-time-end="3402.559"><span>So we assigned over the length, </span></span><span class="transcription-time-part" data-time-start="3402.559" data-time-end="3403.759"><span>so we'll take the right hand </span></span><span class="transcription-time-part" data-time-start="3403.759" data-time-end="3405.579"><span>side length, which is three, </span></span><span class="transcription-time-part active" data-time-start="3405.579" data-time-end="3408.039"><span>store it in the len member </span></span><span class="transcription-time-part" data-time-start="3408.039" data-time-end="3410.659"><span>of the object that this pointer points to, </span></span><span class="transcription-time-part" data-time-start="3410.659" data-time-end="3412.339"><span>which is right here. </span></span><span class="transcription-time-part" data-time-start="3412.339" data-time-end="3414.599"><span>So we pick up three and store it back there. </span></span><span class="transcription-time-part" data-time-start="3414.599" data-time-end="3417.259"><span>Okay. That's harmless. </span></span><span class="transcription-time-part" data-time-start="3417.259" data-time-end="3420.299"><span>Then we set text </span></span><span class="transcription-time-part" data-time-start="3420.299" data-time-end="3422.179"><span>to a new array </span></span><span class="transcription-time-part" data-time-start="3422.179" data-time-end="3424.08"><span>of the appropriate number of characters. </span></span><span class="transcription-time-part" data-time-start="3424.08" data-time-end="3426.479"><span>Three plus one is four. So a brand new array </span></span><span class="transcription-time-part" data-time-start="3426.479" data-time-end="3428.219"><span>of four characters is allocated, </span></span><span class="transcription-time-part" data-time-start="3428.219" data-time-end="3430.979"><span>and we set this pointer to point to it. </span></span><span class="transcription-time-part" data-time-start="3431.48" data-time-end="3432.679"><span>Now, </span></span><span class="transcription-time-part" data-time-start="3432.679" data-time-end="3434.159"><span>these are uninitialized characters, </span></span><span class="transcription-time-part" data-time-start="3434.159" data-time-end="3434.819"><span>of course. </span></span><span class="transcription-time-part" data-time-start="3434.819" data-time-end="3437.939"><span>Then we did stir copy to </span></span><span class="transcription-time-part" data-time-start="3437.939" data-time-end="3442.519"><span>text of the right hand sides text. </span></span><span class="transcription-time-part" data-time-start="3442.519" data-time-end="3444.799"><span>Well, the right hand sides text </span></span><span class="transcription-time-part" data-time-start="3444.799" data-time-end="3447.139"><span>is this array. </span></span><span class="transcription-time-part" data-time-start="3447.139" data-time-end="3450.359"><span>And the left hand side text sorry, </span></span><span class="transcription-time-part" data-time-start="3450.359" data-time-end="3452.819"><span>and then Mtext is also that array. </span></span><span class="transcription-time-part" data-time-start="3452.819" data-time-end="3455.059"><span>Basically, we're string copying </span></span><span class="transcription-time-part" data-time-start="3455.059" data-time-end="3457.985"><span>this array into itself. </span></span><span class="transcription-time-part" data-time-start="3457.985" data-time-end="3461.149"><span>And that's going to be undefined behavior. </span></span><span class="transcription-time-part" data-time-start="3461.149" data-time-end="3463.83"><span>What's likeliest to happen </span></span><span class="transcription-time-part" data-time-start="3463.83" data-time-end="3467.489"><span>is your runtime system will simply say, </span></span><span class="transcription-time-part" data-time-start="3467.489" data-time-end="3469.409"><span>Okay, tell me where to copy from. </span></span><span class="transcription-time-part" data-time-start="3469.409" data-time-end="3471.289"><span>Tell me where to copy to, and I'll just copy </span></span><span class="transcription-time-part" data-time-start="3471.289" data-time-end="3473.729"><span>bytes until I copy a zero byte. </span></span><span class="transcription-time-part" data-time-start="3473.729" data-time-end="3476.149"><span>So what it will probably do is say, </span></span><span class="transcription-time-part" data-time-start="3476.149" data-time-end="3480.34"><span>Okay, I will copy </span></span><span class="transcription-time-part" data-time-start="3480.34" data-time-end="3482.619"><span>this bite into </span></span><span class="transcription-time-part" data-time-start="3482.619" data-time-end="3484.619"><span>the destination, which is the same place. </span></span><span class="transcription-time-part" data-time-start="3484.619" data-time-end="3486.359"><span>I'll copy this bite to itself, </span></span><span class="transcription-time-part" data-time-start="3486.359" data-time-end="3488.579"><span>and I'll stop if it's the zero byte. </span></span><span class="transcription-time-part" data-time-start="3488.579" data-time-end="3490.639"><span>If not, I'll go on to the next one and </span></span><span class="transcription-time-part" data-time-start="3490.639" data-time-end="3491.559"><span>copy it to itself and </span></span><span class="transcription-time-part" data-time-start="3491.559" data-time-end="3492.879"><span>stop if it's the zero byte, </span></span><span class="transcription-time-part" data-time-start="3492.879" data-time-end="3494.279"><span>then this one, then this one. </span></span><span class="transcription-time-part" data-time-start="3494.279" data-time-end="3495.599"><span>And I'll keep on going until I </span></span><span class="transcription-time-part" data-time-start="3495.599" data-time-end="3497.399"><span>happen to pick up and store a zero byte. </span></span><span class="transcription-time-part" data-time-start="3497.399" data-time-end="3498.799"><span>Maybe that'll happen in here. </span></span><span class="transcription-time-part" data-time-start="3498.799" data-time-end="3500.539"><span>Maybe that'll happen out of bounds with </span></span><span class="transcription-time-part" data-time-start="3500.539" data-time-end="3502.119"><span>the array because we </span></span><span class="transcription-time-part" data-time-start="3502.119" data-time-end="3503.719"><span>don't know what's in the storage here. </span></span><span class="transcription-time-part" data-time-start="3503.719" data-time-end="3506.225"><span>It's definitely undefined behavior. </span></span><span class="transcription-time-part" data-time-start="3506.225" data-time-end="3509.049"><span>It's not likely to crash. </span></span><span class="transcription-time-part" data-time-start="3509.049" data-time-end="3511.129"><span>It'll probably just pick up and </span></span><span class="transcription-time-part" data-time-start="3511.129" data-time-end="3512.709"><span>store bytes here and </span></span><span class="transcription-time-part" data-time-start="3512.709" data-time-end="3513.749"><span>run off the end of the array, </span></span><span class="transcription-time-part" data-time-start="3513.749" data-time-end="3515.11"><span>but keep on going until it happens </span></span><span class="transcription-time-part" data-time-start="3515.11" data-time-end="3516.849"><span>to come to a zero byte and store it. </span></span><span class="transcription-time-part" data-time-start="3516.849" data-time-end="3520.369"><span>So the assignment operator will probably not </span></span><span class="transcription-time-part" data-time-start="3520.369" data-time-end="3521.909"><span>crash and probably not </span></span><span class="transcription-time-part" data-time-start="3521.909" data-time-end="3524.35"><span>probably will return, okay. </span></span><span class="transcription-time-part" data-time-start="3524.35" data-time-end="3526.849"><span>But we're left in this weird state </span></span><span class="transcription-time-part" data-time-start="3526.849" data-time-end="3530.069"><span>where the old value of you was Wow. </span></span><span class="transcription-time-part" data-time-start="3530.069" data-time-end="3531.909"><span>Now it's not WOW and </span></span><span class="transcription-time-part" data-time-start="3531.909" data-time-end="3533.569"><span>that's not a valid C string. </span></span><span class="transcription-time-part" data-time-start="3533.569" data-time-end="3535.409"><span>And so, yeah, bad things </span></span><span class="transcription-time-part" data-time-start="3535.409" data-time-end="3537.534"><span>are going to happen surely from here on. </span></span><span class="transcription-time-part" data-time-start="3537.534" data-time-end="3539.139"><span>So we totally have </span></span><span class="transcription-time-part" data-time-start="3539.139" data-time-end="3540.659"><span>to prevent this from happening. </span></span><span class="transcription-time-part" data-time-start="3540.659" data-time-end="3542.999"><span>And let's see how we can do that. </span></span><span class="transcription-time-part" data-time-start="3542.999" data-time-end="3544.999"><span>So again, the original situation </span></span><span class="transcription-time-part" data-time-start="3544.999" data-time-end="3547.26"><span>was we had our Wow, </span></span><span class="transcription-time-part" data-time-start="3547.26" data-time-end="3551.099"><span>and we went wrong right away. </span></span><span class="transcription-time-part" data-time-start="3551.099" data-time-end="3552.459"><span>I mean, what's going to lead to trouble </span></span><span class="transcription-time-part" data-time-start="3552.459" data-time-end="3554.939"><span>right away is getting rid of the Wow. </span></span><span class="transcription-time-part" data-time-start="3555.179" data-time-end="3559.229"><span>And so, but </span></span><span class="transcription-time-part" data-time-start="3559.229" data-time-end="3560.689"><span>that's what we normally want to do, </span></span><span class="transcription-time-part" data-time-start="3560.689" data-time-end="3562.969"><span>except when </span></span><span class="transcription-time-part" data-time-start="3562.969" data-time-end="3564.929"><span>the objects being assigned to itself, </span></span><span class="transcription-time-part" data-time-start="3564.929" data-time-end="3567.469"><span>when an object is being assigned to itself, </span></span><span class="transcription-time-part" data-time-start="3567.469" data-time-end="3570.409"><span>we want to do one thing, and otherwise, </span></span><span class="transcription-time-part" data-time-start="3570.409" data-time-end="3572.289"><span>this code could work okay. </span></span><span class="transcription-time-part" data-time-start="3572.289" data-time-end="3574.249"><span>So we need to test for that. </span></span><span class="transcription-time-part" data-time-start="3574.249" data-time-end="3575.309"><span>And if we're going to </span></span><span class="transcription-time-part" data-time-start="3575.309" data-time-end="3576.229"><span>test for that, we discover </span></span><span class="transcription-time-part" data-time-start="3576.229" data-time-end="3578.949"><span>the object is going to be assigned to itself. </span></span><span class="transcription-time-part" data-time-start="3578.949" data-time-end="3580.989"><span>Well, then let's just return </span></span><span class="transcription-time-part" data-time-start="3580.989" data-time-end="3582.569"><span>immediately because it already </span></span><span class="transcription-time-part" data-time-start="3582.569" data-time-end="3584.409"><span>has the value we want to we </span></span><span class="transcription-time-part" data-time-start="3584.409" data-time-end="3586.269"><span>want it to end up having. </span></span><span class="transcription-time-part" data-time-start="3586.269" data-time-end="3590.03"><span>So the patterns going to be the object </span></span><span class="transcription-time-part" data-time-start="3590.03" data-time-end="3591.389"><span>if the left hand side object is </span></span><span class="transcription-time-part" data-time-start="3591.389" data-time-end="3592.149"><span>the same object as </span></span><span class="transcription-time-part" data-time-start="3592.149" data-time-end="3593.509"><span>the right hand side object, </span></span><span class="transcription-time-part" data-time-start="3593.509" data-time-end="3597.144"><span>then we can just return immediately. </span></span><span class="transcription-time-part" data-time-start="3597.144" data-time-end="3598.479"><span>Okay. </span></span><span class="transcription-time-part" data-time-start="3598.479" data-time-end="3599.899"><span>Okay. Let's try that. </span></span><span class="transcription-time-part" data-time-start="3599.899" data-time-end="3603.759"><span>So, now, how do I tell </span></span><span class="transcription-time-part" data-time-start="3603.759" data-time-end="3605.059"><span>if the left hand side object is </span></span><span class="transcription-time-part" data-time-start="3605.059" data-time-end="3607.819"><span>the right hand side object? Well, let's see. </span></span><span class="transcription-time-part" data-time-start="3607.819" data-time-end="3613.369"><span>Uh, The left hand </span></span><span class="transcription-time-part" data-time-start="3613.369" data-time-end="3615.029"><span>side object, the right hand side object. </span></span><span class="transcription-time-part" data-time-start="3615.029" data-time-end="3617.309"><span>So the right hand side object. </span></span><span class="transcription-time-part" data-time-start="3620.389" data-time-end="3626.589"><span>Well, Can I say that? </span></span><span class="transcription-time-part" data-time-start="3626.589" data-time-end="3628.809"><span>Well, that's not quite right because </span></span><span class="transcription-time-part" data-time-start="3628.809" data-time-end="3631.029"><span>this is a pointer to a string, </span></span><span class="transcription-time-part" data-time-start="3631.029" data-time-end="3632.489"><span>and that's a string, </span></span><span class="transcription-time-part" data-time-start="3632.489" data-time-end="3634.209"><span>and that's another name for a string. </span></span><span class="transcription-time-part" data-time-start="3634.209" data-time-end="3635.529"><span>The types aren't right. </span></span><span class="transcription-time-part" data-time-start="3635.529" data-time-end="3636.909"><span>That's a pointer to a string, </span></span><span class="transcription-time-part" data-time-start="3636.909" data-time-end="3638.749"><span>and that's a string. </span></span><span class="transcription-time-part" data-time-start="3639.829" data-time-end="3642.429"><span>Okay, so what I really want to say, Well, </span></span><span class="transcription-time-part" data-time-start="3642.429" data-time-end="3643.589"><span>how do I know if </span></span><span class="transcription-time-part" data-time-start="3643.589" data-time-end="3647.334"><span>the two strings are so this is not right. </span></span><span class="transcription-time-part" data-time-start="3647.334" data-time-end="3650.919"><span>Not quite right. How do </span></span><span class="transcription-time-part" data-time-start="3650.919" data-time-end="3652.36"><span>I know if these two strings </span></span><span class="transcription-time-part" data-time-start="3652.36" data-time-end="3653.919"><span>are really the same string? </span></span><span class="transcription-time-part" data-time-start="3653.919" data-time-end="3655.079"><span>Well, let's see. </span></span><span class="transcription-time-part" data-time-start="3655.079" data-time-end="3656.939"><span>If there are two strings, </span></span><span class="transcription-time-part" data-time-start="3656.939" data-time-end="3659.039"><span>it's like that, if </span></span><span class="transcription-time-part" data-time-start="3659.039" data-time-end="3660.74"><span>the left hand side is the same strength, </span></span><span class="transcription-time-part" data-time-start="3660.74" data-time-end="3662.739"><span>the same string, it looks like that. </span></span><span class="transcription-time-part" data-time-start="3662.739" data-time-end="3665.179"><span>If they're in the same place, </span></span><span class="transcription-time-part" data-time-start="3665.179" data-time-end="3669.444"><span>they must be the same string. Um, </span></span><span class="transcription-time-part" data-time-start="3669.444" data-time-end="3671.829"><span>Oh, okay. So let's look </span></span><span class="transcription-time-part" data-time-start="3671.829" data-time-end="3673.91"><span>at where they are. That's their address. </span></span><span class="transcription-time-part" data-time-start="3673.91" data-time-end="3675.289"><span>Oh, okay. </span></span><span class="transcription-time-part" data-time-start="3675.289" data-time-end="3678.189"><span>So if the address </span></span><span class="transcription-time-part" data-time-start="3678.189" data-time-end="3680.089"><span>of the left hand side string is this, </span></span><span class="transcription-time-part" data-time-start="3680.089" data-time-end="3681.969"><span>the address of the right hand string </span></span><span class="transcription-time-part" data-time-start="3681.969" data-time-end="3685.61"><span>is Ampersand RHS. </span></span><span class="transcription-time-part" data-time-start="3685.929" data-time-end="3688.149"><span>So that's how you ask if </span></span><span class="transcription-time-part" data-time-start="3688.149" data-time-end="3690.629"><span>the two strings are the same string. </span></span><span class="transcription-time-part" data-time-start="3690.629" data-time-end="3693.029"><span>If this pointer is </span></span><span class="transcription-time-part" data-time-start="3693.029" data-time-end="3694.73"><span>the same value as that pointer, </span></span><span class="transcription-time-part" data-time-start="3694.73" data-time-end="3696.509"><span>Ampersand or RHS would be </span></span><span class="transcription-time-part" data-time-start="3696.509" data-time-end="3698.749"><span>a pointer to this string here. </span></span><span class="transcription-time-part" data-time-start="3698.749" data-time-end="3700.309"><span>Are these pointer values the same? </span></span><span class="transcription-time-part" data-time-start="3700.309" data-time-end="3702.524"><span>Yeah, because they point to the same ojle. </span></span><span class="transcription-time-part" data-time-start="3702.524" data-time-end="3705.339"><span>Okay. So that'll work. </span></span><span class="transcription-time-part" data-time-start="3705.339" data-time-end="3707.099"><span>So all I have to do </span></span><span class="transcription-time-part" data-time-start="3707.099" data-time-end="3713.259"><span>here to make this at least correctly, </span></span><span class="transcription-time-part" data-time-start="3713.259" data-time-end="3716.394"><span>would be something like that. </span></span><span class="transcription-time-part" data-time-start="3716.394" data-time-end="3718.469"><span>I will now change my comment too. </span></span><span class="transcription-time-part" data-time-start="3718.469" data-time-end="3720.609"><span>This is now not the modern way to do it. </span></span><span class="transcription-time-part" data-time-start="3720.609" data-time-end="3723.489"><span>So this is an implementation </span></span><span class="transcription-time-part" data-time-start="3723.489" data-time-end="3725.749"><span>that will do the job, </span></span><span class="transcription-time-part" data-time-start="3725.749" data-time-end="3727.269"><span>but it's not the modern way to write it, </span></span><span class="transcription-time-part" data-time-start="3727.269" data-time-end="3729.189"><span>but I'll get to that in a second. </span></span><span class="transcription-time-part" data-time-start="3729.189" data-time-end="3733.549"><span>So the idea here is that, all right, </span></span><span class="transcription-time-part" data-time-start="3733.549" data-time-end="3736.189"><span>if the objects are not the same object, </span></span><span class="transcription-time-part" data-time-start="3736.189" data-time-end="3737.069"><span>then we have to do </span></span><span class="transcription-time-part" data-time-start="3737.069" data-time-end="3738.369"><span>the work that we did before. </span></span><span class="transcription-time-part" data-time-start="3738.369" data-time-end="3740.489"><span>If they are the same object, </span></span><span class="transcription-time-part" data-time-start="3740.489" data-time-end="3742.189"><span>then we skip all that. </span></span><span class="transcription-time-part" data-time-start="3742.189" data-time-end="3745.269"><span>And in all cases, we return Star T. </span></span><span class="transcription-time-part" data-time-start="3747.59" data-time-end="3749.149"><span>Okay. </span></span><span class="transcription-time-part" data-time-start="3749.149" data-time-end="3752.069"><span>So this is the way that </span></span><span class="transcription-time-part" data-time-start="3752.069" data-time-end="3754.309"><span>the assignment operator is </span></span><span class="transcription-time-part" data-time-start="3754.309" data-time-end="3755.809"><span>sort of the classic model for </span></span><span class="transcription-time-part" data-time-start="3755.809" data-time-end="3757.25"><span>how to write an assignment operator. </span></span><span class="transcription-time-part" data-time-start="3757.25" data-time-end="3758.629"><span>If you look at any C plus </span></span><span class="transcription-time-part" data-time-start="3758.629" data-time-end="3761.91"><span>plus text written before, </span></span><span class="transcription-time-part" data-time-start="3761.95" data-time-end="3768.2"><span>say, about 2000 2001, 2002. </span></span><span class="transcription-time-part" data-time-start="3768.48" data-time-end="3771.14"><span>And you still see it sometimes </span></span><span class="transcription-time-part" data-time-start="3771.14" data-time-end="3774.039"><span>in older C plus plus tutorials. </span></span><span class="transcription-time-part" data-time-start="3774.039" data-time-end="3775.899"><span>They give this is the pattern for </span></span><span class="transcription-time-part" data-time-start="3775.899" data-time-end="3778.64"><span>writing an assignment operator. </span></span><span class="transcription-time-part" data-time-start="3778.64" data-time-end="3781.06"><span>You verify </span></span><span class="transcription-time-part" data-time-start="3781.06" data-time-end="3783.22"><span>that the objects are not the same object. </span></span><span class="transcription-time-part" data-time-start="3783.22" data-time-end="3784.68"><span>If they are the same object, </span></span><span class="transcription-time-part" data-time-start="3784.68" data-time-end="3785.98"><span>you just return immediately. </span></span><span class="transcription-time-part" data-time-start="3785.98" data-time-end="3787.96"><span>But if they aren't the same object, </span></span><span class="transcription-time-part" data-time-start="3787.96" data-time-end="3789.619"><span>you do something to </span></span><span class="transcription-time-part" data-time-start="3789.619" data-time-end="3791.419"><span>clean up the left hand side. </span></span><span class="transcription-time-part" data-time-start="3791.419" data-time-end="3793.099"><span>In our case, it was to get rid of </span></span><span class="transcription-time-part" data-time-start="3793.099" data-time-end="3795.039"><span>the dynamically allocated text, </span></span><span class="transcription-time-part" data-time-start="3795.039" data-time-end="3796.939"><span>and then you do something to make </span></span><span class="transcription-time-part" data-time-start="3796.939" data-time-end="3798.099"><span>the left hand side look like </span></span><span class="transcription-time-part" data-time-start="3798.099" data-time-end="3799.979"><span>a copy of the right hand side. </span></span><span class="transcription-time-part" data-time-start="3799.979" data-time-end="3802.56"><span>So that was the classic model </span></span><span class="transcription-time-part" data-time-start="3802.56" data-time-end="3804.92"><span>for how to write an assignment operator. </span></span><span class="transcription-time-part" data-time-start="3804.92" data-time-end="3807.279"><span>It has an issue, and </span></span><span class="transcription-time-part" data-time-start="3807.279" data-time-end="3808.499"><span>I'll talk about that in a bit, </span></span><span class="transcription-time-part" data-time-start="3808.499" data-time-end="3810.3"><span>but let me just hit the questions </span></span><span class="transcription-time-part" data-time-start="3810.3" data-time-end="3811.699"><span>that almost always I mean, </span></span><span class="transcription-time-part" data-time-start="3811.699" data-time-end="3812.96"><span>without even looking at the questions, </span></span><span class="transcription-time-part" data-time-start="3812.96" data-time-end="3813.659"><span>I know what some of </span></span><span class="transcription-time-part" data-time-start="3813.659" data-time-end="3815.019"><span>the more common questions here are. </span></span><span class="transcription-time-part" data-time-start="3815.019" data-time-end="3817.939"><span>So let me address those. </span></span><span class="transcription-time-part" data-time-start="3817.939" data-time-end="3820.059"><span>So, again, this is the classic code, </span></span><span class="transcription-time-part" data-time-start="3820.059" data-time-end="3821.139"><span>and here are the kind </span></span><span class="transcription-time-part" data-time-start="3821.139" data-time-end="3822.959"><span>of questions that come up. </span></span><span class="transcription-time-part" data-time-start="3823.36" data-time-end="3826.079"><span>One of them is, well, </span></span><span class="transcription-time-part" data-time-start="3826.079" data-time-end="3827.699"><span>that test to see if </span></span><span class="transcription-time-part" data-time-start="3827.699" data-time-end="3829.64"><span>the strings are different. </span></span><span class="transcription-time-part" data-time-start="3829.64" data-time-end="3832.979"><span>I wrote that test as if this </span></span><span class="transcription-time-part" data-time-start="3832.979" data-time-end="3836.78"><span>is equal not equal to Ampersand RHS. </span></span><span class="transcription-time-part" data-time-start="3836.78" data-time-end="3840.54"><span>If the pointer to the left hand side object </span></span><span class="transcription-time-part" data-time-start="3840.54" data-time-end="3843.679"><span>is pointing to a different place </span></span><span class="transcription-time-part" data-time-start="3843.679" data-time-end="3845.119"><span>than the pointer to </span></span><span class="transcription-time-part" data-time-start="3845.119" data-time-end="3846.26"><span>the right hand side object. </span></span><span class="transcription-time-part" data-time-start="3846.26" data-time-end="3847.46"><span>If they point to different </span></span><span class="transcription-time-part" data-time-start="3847.46" data-time-end="3848.86"><span>places, they're different objects. </span></span><span class="transcription-time-part" data-time-start="3848.86" data-time-end="3850.139"><span>If they point to the same place, </span></span><span class="transcription-time-part" data-time-start="3850.139" data-time-end="3852.06"><span>they're the same object. </span></span><span class="transcription-time-part" data-time-start="3852.06" data-time-end="3856.9"><span>How do I know if the phrase </span></span><span class="transcription-time-part" data-time-start="3857.54" data-time-end="3861.18"><span>the governor of California and the phrase </span></span><span class="transcription-time-part" data-time-start="3861.18" data-time-end="3862.899"><span>Gavin Newsom are </span></span><span class="transcription-time-part" data-time-start="3862.899" data-time-end="3865.039"><span>talking about the same person. </span></span><span class="transcription-time-part" data-time-start="3865.039" data-time-end="3867.279"><span>One way to do it would be, </span></span><span class="transcription-time-part" data-time-start="3867.279" data-time-end="3868.859"><span>I'm going to go find where </span></span><span class="transcription-time-part" data-time-start="3868.859" data-time-end="3871.039"><span>the governor of California is, okay? </span></span><span class="transcription-time-part" data-time-start="3871.039" data-time-end="3872.34"><span>I go up Sacramento </span></span><span class="transcription-time-part" data-time-start="3872.34" data-time-end="3873.859"><span>and look at the state house, okay? </span></span><span class="transcription-time-part" data-time-start="3873.859" data-time-end="3875.519"><span>And there in the governor's office sitting in </span></span><span class="transcription-time-part" data-time-start="3875.519" data-time-end="3878.199"><span>his chair is some person. </span></span><span class="transcription-time-part" data-time-start="3878.199" data-time-end="3880.225"><span>That's the governor of California. </span></span><span class="transcription-time-part" data-time-start="3880.225" data-time-end="3882.71"><span>Now let's see. Where's Gavin Newsom? </span></span><span class="transcription-time-part" data-time-start="3882.71" data-time-end="3884.49"><span>Look around. Hey, where's Gavin Newsom? </span></span><span class="transcription-time-part" data-time-start="3884.49" data-time-end="3885.589"><span>Oh, he's over there. </span></span><span class="transcription-time-part" data-time-start="3885.589" data-time-end="3887.089"><span>Lo and they're sitting in </span></span><span class="transcription-time-part" data-time-start="3887.089" data-time-end="3888.289"><span>the same chair at </span></span><span class="transcription-time-part" data-time-start="3888.289" data-time-end="3890.45"><span>the same time is Gavin Newsom. </span></span><span class="transcription-time-part" data-time-start="3890.45" data-time-end="3893.189"><span>So since the governor of California is there </span></span><span class="transcription-time-part" data-time-start="3893.189" data-time-end="3894.529"><span>and Gavin Newsom is </span></span><span class="transcription-time-part" data-time-start="3894.529" data-time-end="3896.569"><span>there, they are the same person. </span></span><span class="transcription-time-part" data-time-start="3896.569" data-time-end="3898.99"><span>Okay. So that's checking </span></span><span class="transcription-time-part" data-time-start="3898.99" data-time-end="3900.89"><span>this exactly the same object. </span></span><span class="transcription-time-part" data-time-start="3900.89" data-time-end="3905.409"><span>Now, some people say, Well, okay, well, </span></span><span class="transcription-time-part" data-time-start="3905.409" data-time-end="3906.689"><span>how is that different from </span></span><span class="transcription-time-part" data-time-start="3906.689" data-time-end="3910.45"><span>saying if the object that this pointer </span></span><span class="transcription-time-part" data-time-start="3910.45" data-time-end="3913.049"><span>points to is not </span></span><span class="transcription-time-part" data-time-start="3913.049" data-time-end="3916.51"><span>equal to the right hand side object. </span></span><span class="transcription-time-part" data-time-start="3918.31" data-time-end="3921.909"><span>Well, that's asking a different question. </span></span><span class="transcription-time-part" data-time-start="3922.67" data-time-end="3927.569"><span>That's assuming this is a type string, </span></span><span class="transcription-time-part" data-time-start="3927.569" data-time-end="3930.089"><span>and this is a type string </span></span><span class="transcription-time-part" data-time-start="3930.089" data-time-end="3933.47"><span>or this was a type string pointer. </span></span><span class="transcription-time-part" data-time-start="3934.38" data-time-end="3937.94"><span>And this was a type string pointer. </span></span><span class="transcription-time-part" data-time-start="3937.94" data-time-end="3940.019"><span>That's a different question. </span></span><span class="transcription-time-part" data-time-start="3940.019" data-time-end="3941.8"><span>This question is comparing </span></span><span class="transcription-time-part" data-time-start="3941.8" data-time-end="3943.539"><span>two pointers to see if they </span></span><span class="transcription-time-part" data-time-start="3943.539" data-time-end="3945.799"><span>point to a different place or the same place. </span></span><span class="transcription-time-part" data-time-start="3945.799" data-time-end="3947.88"><span>This is comparing two strings, </span></span><span class="transcription-time-part" data-time-start="3947.88" data-time-end="3951.559"><span>and this will not compile unless you have </span></span><span class="transcription-time-part" data-time-start="3951.559" data-time-end="3954.039"><span>defined operator not equal </span></span><span class="transcription-time-part" data-time-start="3954.039" data-time-end="3956.46"><span>to let you compare two string objects. </span></span><span class="transcription-time-part" data-time-start="3956.46" data-time-end="3958.659"><span>This is actually comparing the values of </span></span><span class="transcription-time-part" data-time-start="3958.659" data-time-end="3960.099"><span>the strings if we </span></span><span class="transcription-time-part" data-time-start="3960.099" data-time-end="3962.005"><span>had defined such an operator. </span></span><span class="transcription-time-part" data-time-start="3962.005" data-time-end="3963.209"><span>That would not be </span></span><span class="transcription-time-part" data-time-start="3963.209" data-time-end="3964.229"><span>an unreasonable thing to do, </span></span><span class="transcription-time-part" data-time-start="3964.229" data-time-end="3965.409"><span>by the way, for the string type. </span></span><span class="transcription-time-part" data-time-start="3965.409" data-time-end="3966.79"><span>We could define an operator </span></span><span class="transcription-time-part" data-time-start="3966.79" data-time-end="3967.909"><span>double equal that takes </span></span><span class="transcription-time-part" data-time-start="3967.909" data-time-end="3971.49"><span>two strings and say compares their values. </span></span><span class="transcription-time-part" data-time-start="3971.49" data-time-end="3974.889"><span>The two strings are equal if say, you know, </span></span><span class="transcription-time-part" data-time-start="3974.889" data-time-end="3977.049"><span>their lengths are equal and if they have </span></span><span class="transcription-time-part" data-time-start="3977.049" data-time-end="3978.249"><span>the same characters up </span></span><span class="transcription-time-part" data-time-start="3978.249" data-time-end="3980.069"><span>to and including the zero byte. </span></span><span class="transcription-time-part" data-time-start="3980.069" data-time-end="3981.989"><span>That could be our implementation </span></span><span class="transcription-time-part" data-time-start="3981.989" data-time-end="3983.669"><span>of an operator double equal to string. </span></span><span class="transcription-time-part" data-time-start="3983.669" data-time-end="3985.35"><span>An operator not equal for strings, </span></span><span class="transcription-time-part" data-time-start="3985.35" data-time-end="3986.669"><span>two strings would give </span></span><span class="transcription-time-part" data-time-start="3986.669" data-time-end="3988.19"><span>you the opposite result. </span></span><span class="transcription-time-part" data-time-start="3988.19" data-time-end="3990.669"><span>So if we had such a thing, </span></span><span class="transcription-time-part" data-time-start="3990.669" data-time-end="3993.289"><span>this would compile, but it's not </span></span><span class="transcription-time-part" data-time-start="3993.289" data-time-end="3995.93"><span>testing are the two objects the same object? </span></span><span class="transcription-time-part" data-time-start="3995.93" data-time-end="3997.469"><span>It's saying, you know, </span></span><span class="transcription-time-part" data-time-start="3997.469" data-time-end="3999.209"><span>whether they're the same object or not, </span></span><span class="transcription-time-part" data-time-start="3999.209" data-time-end="4002.195"><span>do the two strings have the same value? </span></span><span class="transcription-time-part" data-time-start="4002.195" data-time-end="4005.159"><span>You might say, well, that's </span></span><span class="transcription-time-part" data-time-start="4005.159" data-time-end="4006.319"><span>not bad because if they </span></span><span class="transcription-time-part" data-time-start="4006.319" data-time-end="4008.14"><span>do have the same value, </span></span><span class="transcription-time-part" data-time-start="4008.14" data-time-end="4009.499"><span>if this is the string </span></span><span class="transcription-time-part" data-time-start="4009.499" data-time-end="4011.279"><span>hello and that's the string hello, </span></span><span class="transcription-time-part" data-time-start="4011.279" data-time-end="4013.2"><span>then there's no reason to actually </span></span><span class="transcription-time-part" data-time-start="4013.2" data-time-end="4015.2"><span>go through the work of doing the assignment. </span></span><span class="transcription-time-part" data-time-start="4015.2" data-time-end="4016.999"><span>You know, why do you need to </span></span><span class="transcription-time-part" data-time-start="4016.999" data-time-end="4018.859"><span>get rid of the old hello here, </span></span><span class="transcription-time-part" data-time-start="4018.859" data-time-end="4020.299"><span>copy over the length five </span></span><span class="transcription-time-part" data-time-start="4020.299" data-time-end="4021.959"><span>to replace this length five, </span></span><span class="transcription-time-part" data-time-start="4021.959" data-time-end="4024.16"><span>allocate a new array of six characters, </span></span><span class="transcription-time-part" data-time-start="4024.16" data-time-end="4026.819"><span>copy hello with a zero byte into there. </span></span><span class="transcription-time-part" data-time-start="4026.819" data-time-end="4029.26"><span>And now this has a pointer </span></span><span class="transcription-time-part" data-time-start="4029.26" data-time-end="4031.819"><span>to hello with the length five, </span></span><span class="transcription-time-part" data-time-start="4031.819" data-time-end="4032.959"><span>just like it was before </span></span><span class="transcription-time-part" data-time-start="4032.959" data-time-end="4034.279"><span>It's just like it was before. </span></span><span class="transcription-time-part" data-time-start="4034.279" data-time-end="4036.359"><span>So you could say, </span></span><span class="transcription-time-part" data-time-start="4036.359" data-time-end="4037.82"><span>if I replace </span></span><span class="transcription-time-part" data-time-start="4037.82" data-time-end="4039.66"><span>this condition with this condition, </span></span><span class="transcription-time-part" data-time-start="4039.66" data-time-end="4041.02"><span>assuming I have defined </span></span><span class="transcription-time-part" data-time-start="4041.02" data-time-end="4042.874"><span>a not equal operator for string, </span></span><span class="transcription-time-part" data-time-start="4042.874" data-time-end="4044.729"><span>this will still be correct code. </span></span><span class="transcription-time-part" data-time-start="4044.729" data-time-end="4046.59"><span>In fact, it will bypass </span></span><span class="transcription-time-part" data-time-start="4046.59" data-time-end="4048.35"><span>this work in more cases. </span></span><span class="transcription-time-part" data-time-start="4048.35" data-time-end="4049.91"><span>It will not only bypass </span></span><span class="transcription-time-part" data-time-start="4049.91" data-time-end="4052.309"><span>the work if two strings the two objects are </span></span><span class="transcription-time-part" data-time-start="4052.309" data-time-end="4054.009"><span>the same object because of course </span></span><span class="transcription-time-part" data-time-start="4054.009" data-time-end="4056.709"><span>they would have the same value, </span></span><span class="transcription-time-part" data-time-start="4056.709" data-time-end="4058.709"><span>but it would also bypass the work if </span></span><span class="transcription-time-part" data-time-start="4058.709" data-time-end="4060.15"><span>two different strings happen </span></span><span class="transcription-time-part" data-time-start="4060.15" data-time-end="4061.549"><span>to have the same value. </span></span><span class="transcription-time-part" data-time-start="4061.549" data-time-end="4063.469"><span>Then there's no reason to do any work </span></span><span class="transcription-time-part" data-time-start="4063.469" data-time-end="4065.229"><span>because this one already </span></span><span class="transcription-time-part" data-time-start="4065.229" data-time-end="4067.609"><span>looks like a copy of that one. </span></span><span class="transcription-time-part" data-time-start="4067.609" data-time-end="4069.469"><span>So you might say, maybe that's </span></span><span class="transcription-time-part" data-time-start="4069.469" data-time-end="4070.369"><span>a better thing because it </span></span><span class="transcription-time-part" data-time-start="4070.369" data-time-end="4072.269"><span>bypasses the work more often. </span></span><span class="transcription-time-part" data-time-start="4072.269" data-time-end="4077.55"><span>I would disagree because the cost of checking </span></span><span class="transcription-time-part" data-time-start="4077.55" data-time-end="4079.049"><span>two strings to see if they have </span></span><span class="transcription-time-part" data-time-start="4079.049" data-time-end="4084.049"><span>the same value is not totally trivial, right? </span></span><span class="transcription-time-part" data-time-start="4084.049" data-time-end="4086.729"><span>If two strings start off the same, you know, </span></span><span class="transcription-time-part" data-time-start="4086.729" data-time-end="4087.649"><span>they have the same length, </span></span><span class="transcription-time-part" data-time-start="4087.649" data-time-end="4088.669"><span>and they start off the same, </span></span><span class="transcription-time-part" data-time-start="4088.669" data-time-end="4090.15"><span>but then they differ somehow. </span></span><span class="transcription-time-part" data-time-start="4090.15" data-time-end="4091.269"><span>Well, you've gone through </span></span><span class="transcription-time-part" data-time-start="4091.269" data-time-end="4092.869"><span>a loop partway through the string to </span></span><span class="transcription-time-part" data-time-start="4092.869" data-time-end="4095.809"><span>check those characters and partway through, </span></span><span class="transcription-time-part" data-time-start="4095.809" data-time-end="4097.669"><span>you said, Oh, okay, they're different. </span></span><span class="transcription-time-part" data-time-start="4097.669" data-time-end="4099.389"><span>So the problem is, you did </span></span><span class="transcription-time-part" data-time-start="4099.389" data-time-end="4101.509"><span>a lot of work to find out, Oh, guess what? </span></span><span class="transcription-time-part" data-time-start="4101.509" data-time-end="4103.009"><span>They are different. And so </span></span><span class="transcription-time-part" data-time-start="4103.009" data-time-end="4104.609"><span>I'll go ahead and do this anyway. </span></span><span class="transcription-time-part" data-time-start="4104.609" data-time-end="4107.379"><span>So so you have to balance, </span></span><span class="transcription-time-part" data-time-start="4107.379" data-time-end="4108.419"><span>how often is it </span></span><span class="transcription-time-part" data-time-start="4108.419" data-time-end="4109.919"><span>the case that the two strings you're </span></span><span class="transcription-time-part" data-time-start="4109.919" data-time-end="4111.179"><span>assigning actually have the same </span></span><span class="transcription-time-part" data-time-start="4111.179" data-time-end="4112.799"><span>value versus, </span></span><span class="transcription-time-part" data-time-start="4112.799" data-time-end="4114.339"><span>you know, you have to balance </span></span><span class="transcription-time-part" data-time-start="4114.339" data-time-end="4115.839"><span>that against the cost of Yeah, </span></span><span class="transcription-time-part" data-time-start="4115.839" data-time-end="4117.019"><span>but how much does it cost to see </span></span><span class="transcription-time-part" data-time-start="4117.019" data-time-end="4118.579"><span>if two strings have the same value? </span></span><span class="transcription-time-part" data-time-start="4118.579" data-time-end="4120.759"><span>If it turns out it's not very common that </span></span><span class="transcription-time-part" data-time-start="4120.759" data-time-end="4121.599"><span>you do assignment with </span></span><span class="transcription-time-part" data-time-start="4121.599" data-time-end="4123.419"><span>two strings having the same value. </span></span><span class="transcription-time-part" data-time-start="4123.419" data-time-end="4124.999"><span>And you figure out the cost of </span></span><span class="transcription-time-part" data-time-start="4124.999" data-time-end="4126.679"><span>this work and how frequently that occurs, </span></span><span class="transcription-time-part" data-time-start="4126.679" data-time-end="4130.069"><span>you may find it's not worth that check. </span></span><span class="transcription-time-part" data-time-start="4130.069" data-time-end="4131.829"><span>It's not worth the check to see if </span></span><span class="transcription-time-part" data-time-start="4131.829" data-time-end="4133.589"><span>two strings have the same value so </span></span><span class="transcription-time-part" data-time-start="4133.589" data-time-end="4135.209"><span>that you could bypass this work </span></span><span class="transcription-time-part" data-time-start="4135.209" data-time-end="4137.749"><span>even if they were in different places. </span></span><span class="transcription-time-part" data-time-start="4137.749" data-time-end="4140.529"><span>Simply because that doesn't </span></span><span class="transcription-time-part" data-time-start="4140.529" data-time-end="4142.069"><span>happen often enough to make the cost </span></span><span class="transcription-time-part" data-time-start="4142.069" data-time-end="4143.209"><span>of doing that check every </span></span><span class="transcription-time-part" data-time-start="4143.209" data-time-end="4146.129"><span>time you assign two strings worthwhile. </span></span><span class="transcription-time-part" data-time-start="4146.129" data-time-end="4149.129"><span>So generally, we'll leave it this way. </span></span><span class="transcription-time-part" data-time-start="4149.129" data-time-end="4151.429"><span>We'll compare the pointers, </span></span><span class="transcription-time-part" data-time-start="4152.63" data-time-end="4158.349"><span>not the actual values of the string. Okay. </span></span><span class="transcription-time-part" data-time-start="4158.349" data-time-end="4160.349"><span>Another common thing people </span></span><span class="transcription-time-part" data-time-start="4160.349" data-time-end="4162.409"><span>wonder about is, Hey, you know, </span></span><span class="transcription-time-part" data-time-start="4162.409" data-time-end="4168.209"><span>I noticed that the the body </span></span><span class="transcription-time-part" data-time-start="4168.209" data-time-end="4170.609"><span>of this if statement is, </span></span><span class="transcription-time-part" data-time-start="4170.609" data-time-end="4172.949"><span>do what the destructor does, </span></span><span class="transcription-time-part" data-time-start="4172.949" data-time-end="4174.689"><span>followed by do what </span></span><span class="transcription-time-part" data-time-start="4174.689" data-time-end="4176.669"><span>the copy constructor does. </span></span><span class="transcription-time-part" data-time-start="4176.669" data-time-end="4180.089"><span>So could I somehow </span></span><span class="transcription-time-part" data-time-start="4180.089" data-time-end="4181.749"><span>in my implementation of </span></span><span class="transcription-time-part" data-time-start="4181.749" data-time-end="4183.849"><span>the assignment operator, you know, </span></span><span class="transcription-time-part" data-time-start="4183.849" data-time-end="4186.369"><span>call the destructor for the left hand side, </span></span><span class="transcription-time-part" data-time-start="4186.369" data-time-end="4188.189"><span>and then call the copy constructor </span></span><span class="transcription-time-part" data-time-start="4188.189" data-time-end="4190.449"><span>somehow to make the left hand side </span></span><span class="transcription-time-part" data-time-start="4190.449" data-time-end="4192.789"><span>look like a copy of the right hand side? </span></span><span class="transcription-time-part" data-time-start="4192.789" data-time-end="4199.989"><span>And the answer is technically, yes, </span></span><span class="transcription-time-part" data-time-start="4199.989" data-time-end="4202.049"><span>you could do that, </span></span><span class="transcription-time-part" data-time-start="4202.049" data-time-end="4208.049"><span>but have to do it exactly the right way, </span></span><span class="transcription-time-part" data-time-start="4208.049" data-time-end="4209.369"><span>and the way people think of </span></span><span class="transcription-time-part" data-time-start="4209.369" data-time-end="4210.949"><span>doing it is not the right way. </span></span><span class="transcription-time-part" data-time-start="4210.949" data-time-end="4214.009"><span>In other words, there are </span></span><span class="transcription-time-part" data-time-start="4214.009" data-time-end="4216.769"><span>language constructs in C plus plus you would </span></span><span class="transcription-time-part" data-time-start="4216.769" data-time-end="4219.389"><span>have to use to do this. We don't know them. </span></span><span class="transcription-time-part" data-time-start="4219.389" data-time-end="4223.489"><span>And so if you tried to do this way, </span></span><span class="transcription-time-part" data-time-start="4223.489" data-time-end="4225.209"><span>tried to do it that way, you </span></span><span class="transcription-time-part" data-time-start="4225.209" data-time-end="4226.449"><span>would probably get it wrong. </span></span><span class="transcription-time-part" data-time-start="4226.449" data-time-end="4227.289"><span>You might be able to </span></span><span class="transcription-time-part" data-time-start="4227.289" data-time-end="4228.649"><span>write something that compiles, </span></span><span class="transcription-time-part" data-time-start="4228.649" data-time-end="4230.909"><span>but it would not do the right thing. </span></span><span class="transcription-time-part" data-time-start="4230.909" data-time-end="4232.909"><span>The most common thing people try </span></span><span class="transcription-time-part" data-time-start="4232.909" data-time-end="4234.249"><span>to do is somehow, Oh, </span></span><span class="transcription-time-part" data-time-start="4234.249" data-time-end="4235.389"><span>I'm going to call the copy </span></span><span class="transcription-time-part" data-time-start="4235.389" data-time-end="4236.809"><span>instructor just by saying, </span></span><span class="transcription-time-part" data-time-start="4236.809" data-time-end="4240.429"><span>you know, string, open friend, whatever. </span></span><span class="transcription-time-part" data-time-start="4240.429" data-time-end="4243.469"><span>No, no, that's not going to work. </span></span><span class="transcription-time-part" data-time-start="4243.469" data-time-end="4244.429"><span>You </span></span><span class="transcription-time-part" data-time-start="4244.429" data-time-end="4247.399"><span>would constructing a temporary object that </span></span><span class="transcription-time-part" data-time-start="4247.399" data-time-end="4248.819"><span>gets immediately destroyed and having </span></span><span class="transcription-time-part" data-time-start="4248.819" data-time-end="4249.779"><span>no effect on the object </span></span><span class="transcription-time-part" data-time-start="4249.779" data-time-end="4250.979"><span>that this pointer points to. </span></span><span class="transcription-time-part" data-time-start="4250.979" data-time-end="4252.779"><span>So really, </span></span><span class="transcription-time-part" data-time-start="4252.779" data-time-end="4254.419"><span>the way you might try to </span></span><span class="transcription-time-part" data-time-start="4254.419" data-time-end="4256.139"><span>do this is not going to work. </span></span><span class="transcription-time-part" data-time-start="4256.139" data-time-end="4259.359"><span>So don't bother trying to </span></span><span class="transcription-time-part" data-time-start="4259.359" data-time-end="4260.999"><span>implement the assignment operator </span></span><span class="transcription-time-part" data-time-start="4260.999" data-time-end="4263.059"><span>by calling the copy constructor. </span></span><span class="transcription-time-part" data-time-start="4263.059" data-time-end="4268.099"><span>That's wrong. Calling the copy instructor </span></span><span class="transcription-time-part" data-time-start="4268.099" data-time-end="4269.619"><span>to directly do something to </span></span><span class="transcription-time-part" data-time-start="4269.619" data-time-end="4271.519"><span>the left hand side object. </span></span><span class="transcription-time-part" data-time-start="4271.519" data-time-end="4274.239"><span>That's not going to work out, right. </span></span><span class="transcription-time-part" data-time-start="4274.72" data-time-end="4276.939"><span>Oh, well, but I </span></span><span class="transcription-time-part" data-time-start="4276.939" data-time-end="4277.679"><span>don't like the fact </span></span><span class="transcription-time-part" data-time-start="4277.679" data-time-end="4278.619"><span>that the code is the same. </span></span><span class="transcription-time-part" data-time-start="4278.619" data-time-end="4279.319"><span>Do I have to write </span></span><span class="transcription-time-part" data-time-start="4279.319" data-time-end="4281.219"><span>the same code in two places? </span></span><span class="transcription-time-part" data-time-start="4281.219" data-time-end="4283.879"><span>No. I mean, one way, again, </span></span><span class="transcription-time-part" data-time-start="4283.879" data-time-end="4285.319"><span>an old classic way was, </span></span><span class="transcription-time-part" data-time-start="4285.319" data-time-end="4286.339"><span>well, maybe you have </span></span><span class="transcription-time-part" data-time-start="4286.339" data-time-end="4287.799"><span>a private helper function. </span></span><span class="transcription-time-part" data-time-start="4287.799" data-time-end="4289.979"><span>Maybe you have a private member function that </span></span><span class="transcription-time-part" data-time-start="4289.979" data-time-end="4291.299"><span>both the copy constructor </span></span><span class="transcription-time-part" data-time-start="4291.299" data-time-end="4292.919"><span>and the assignment operator call </span></span><span class="transcription-time-part" data-time-start="4292.919" data-time-end="4295.199"><span>and the private function does </span></span><span class="transcription-time-part" data-time-start="4295.199" data-time-end="4299.439"><span>this dirty work. That could work. </span></span><span class="transcription-time-part" data-time-start="4299.49" data-time-end="4302.269"><span>But the modern way is </span></span><span class="transcription-time-part" data-time-start="4302.269" data-time-end="4304.869"><span>actually solving another problem, </span></span><span class="transcription-time-part" data-time-start="4304.869" data-time-end="4307.229"><span>which unfortunately we don't </span></span><span class="transcription-time-part" data-time-start="4307.229" data-time-end="4308.149"><span>know enough to know </span></span><span class="transcription-time-part" data-time-start="4308.149" data-time-end="4309.25"><span>the implications </span></span><span class="transcription-time-part" data-time-start="4309.25" data-time-end="4313.149"><span>of the classical way of doing it. </span></span><span class="transcription-time-part" data-time-start="4313.149" data-time-end="4316.469"><span>But let me just briefly mention it. </span></span><span class="transcription-time-part" data-time-start="4316.469" data-time-end="4318.189"><span>So one of </span></span><span class="transcription-time-part" data-time-start="4318.189" data-time-end="4320.049"><span>the problems with the assignment operator, </span></span><span class="transcription-time-part" data-time-start="4320.049" data-time-end="4321.149"><span>one of the problems with </span></span><span class="transcription-time-part" data-time-start="4321.149" data-time-end="4322.469"><span>both the copy constructor </span></span><span class="transcription-time-part" data-time-start="4322.469" data-time-end="4325.509"><span>and the assignment operator is at some point, </span></span><span class="transcription-time-part" data-time-start="4325.509" data-time-end="4329.639"><span>we dynamically allocate some new storage. </span></span><span class="transcription-time-part" data-time-start="4329.639" data-time-end="4331.409"><span>What if that fails? </span></span><span class="transcription-time-part" data-time-start="4331.409" data-time-end="4332.829"><span>What if there's not enough </span></span><span class="transcription-time-part" data-time-start="4332.829" data-time-end="4334.089"><span>memory to make a copy </span></span><span class="transcription-time-part" data-time-start="4334.089" data-time-end="4337.669"><span>of the right hand side for the new object? </span></span><span class="transcription-time-part" data-time-start="4337.67" data-time-end="4340.869"><span>Well, then an exception is thrown. </span></span><span class="transcription-time-part" data-time-start="4340.869" data-time-end="4343.729"><span>Okay, now, we don't </span></span><span class="transcription-time-part" data-time-start="4343.729" data-time-end="4345.329"><span>know how to deal with exceptions, </span></span><span class="transcription-time-part" data-time-start="4345.329" data-time-end="4346.649"><span>so this is not going to be something </span></span><span class="transcription-time-part" data-time-start="4346.649" data-time-end="4348.389"><span>that we'd have to face. </span></span><span class="transcription-time-part" data-time-start="4348.389" data-time-end="4350.769"><span>But there are programs </span></span><span class="transcription-time-part" data-time-start="4350.769" data-time-end="4354.309"><span>that do know how to deal with exceptions, </span></span><span class="transcription-time-part" data-time-start="4354.309" data-time-end="4356.069"><span>and they might discover, Oh, </span></span><span class="transcription-time-part" data-time-start="4356.069" data-time-end="4357.809"><span>if an exception was thrown we tried </span></span><span class="transcription-time-part" data-time-start="4357.809" data-time-end="4358.569"><span>to do something because </span></span><span class="transcription-time-part" data-time-start="4358.569" data-time-end="4359.909"><span>there was limited memory, </span></span><span class="transcription-time-part" data-time-start="4359.909" data-time-end="4361.889"><span>maybe we could do something to clean </span></span><span class="transcription-time-part" data-time-start="4361.889" data-time-end="4364.989"><span>up memory and try the operation again. </span></span><span class="transcription-time-part" data-time-start="4365.8" data-time-end="4368.979"><span>But for that to work right, you'd </span></span><span class="transcription-time-part" data-time-start="4368.979" data-time-end="4370.599"><span>really like it to be the case </span></span><span class="transcription-time-part" data-time-start="4370.599" data-time-end="4374.189"><span>that if some operation like </span></span><span class="transcription-time-part" data-time-start="4374.189" data-time-end="4376.129"><span>your assignment operator or cop constructor </span></span><span class="transcription-time-part" data-time-start="4376.129" data-time-end="4378.549"><span>fails and throws an exception, </span></span><span class="transcription-time-part" data-time-start="4378.549" data-time-end="4382.889"><span>ideally, it should leave </span></span><span class="transcription-time-part" data-time-start="4382.889" data-time-end="4385.209"><span>all the variables that you will </span></span><span class="transcription-time-part" data-time-start="4385.209" data-time-end="4386.949"><span>still exist after the function </span></span><span class="transcription-time-part" data-time-start="4386.949" data-time-end="4388.449"><span>leaves from the exception, </span></span><span class="transcription-time-part" data-time-start="4388.449" data-time-end="4390.829"><span>leave all those variables unchanged, </span></span><span class="transcription-time-part" data-time-start="4390.829" data-time-end="4392.969"><span>or at least, in a valid state. </span></span><span class="transcription-time-part" data-time-start="4392.969" data-time-end="4394.409"><span>And with this implementation </span></span><span class="transcription-time-part" data-time-start="4394.409" data-time-end="4395.689"><span>of the assignment operator, </span></span><span class="transcription-time-part" data-time-start="4395.689" data-time-end="4397.689"><span>that's not going to happen. </span></span><span class="transcription-time-part" data-time-start="4397.689" data-time-end="4400.529"><span>So very briefly because </span></span><span class="transcription-time-part" data-time-start="4400.529" data-time-end="4401.889"><span>it's not really within </span></span><span class="transcription-time-part" data-time-start="4401.889" data-time-end="4403.329"><span>the scope of the class, </span></span><span class="transcription-time-part" data-time-start="4403.329" data-time-end="4406.849"><span>the issue is, if and I said, </span></span><span class="transcription-time-part" data-time-start="4406.849" data-time-end="4411.689"><span>UGS, And so we tried this, </span></span><span class="transcription-time-part" data-time-start="4411.689" data-time-end="4412.889"><span>and if we were to </span></span><span class="transcription-time-part" data-time-start="4412.889" data-time-end="4414.049"><span>go through this code here, we'd say, </span></span><span class="transcription-time-part" data-time-start="4414.049" data-time-end="4415.289"><span>well, let's see, the </span></span><span class="transcription-time-part" data-time-start="4415.289" data-time-end="4416.689"><span>objects have different objects. </span></span><span class="transcription-time-part" data-time-start="4416.689" data-time-end="4418.829"><span>So let's delete the old value of </span></span><span class="transcription-time-part" data-time-start="4418.829" data-time-end="4424.849"><span>you Let's assign over the five to here. </span></span><span class="transcription-time-part" data-time-start="4425.41" data-time-end="4428.849"><span>So use length is now five. </span></span><span class="transcription-time-part" data-time-start="4428.97" data-time-end="4432.009"><span>Let's now give you its own text. </span></span><span class="transcription-time-part" data-time-start="4432.009" data-time-end="4433.769"><span>So let's dynamically allocate an array of </span></span><span class="transcription-time-part" data-time-start="4433.769" data-time-end="4436.089"><span>six characters. Let's say that fails. </span></span><span class="transcription-time-part" data-time-start="4436.089" data-time-end="4438.109"><span>There's not enough memory. </span></span><span class="transcription-time-part" data-time-start="4438.109" data-time-end="4439.249"><span>I mean, there could be </span></span><span class="transcription-time-part" data-time-start="4439.249" data-time-end="4440.629"><span>plenty for other types, </span></span><span class="transcription-time-part" data-time-start="4440.629" data-time-end="4441.769"><span>there could be plenty of other reasons </span></span><span class="transcription-time-part" data-time-start="4441.769" data-time-end="4443.129"><span>why somebody could throw an exception. </span></span><span class="transcription-time-part" data-time-start="4443.129" data-time-end="4443.989"><span>Ours is going to be </span></span><span class="transcription-time-part" data-time-start="4443.989" data-time-end="4445.609"><span>running out of memory here. </span></span><span class="transcription-time-part" data-time-start="4445.609" data-time-end="4447.289"><span>We run out of memory, </span></span><span class="transcription-time-part" data-time-start="4447.289" data-time-end="4449.229"><span>so an exception is thrown. </span></span><span class="transcription-time-part" data-time-start="4449.229" data-time-end="4452.77"><span>Now, what that does is it says, essentially, </span></span><span class="transcription-time-part" data-time-start="4452.77" data-time-end="4454.609"><span>further execution of the assignment </span></span><span class="transcription-time-part" data-time-start="4454.609" data-time-end="4456.95"><span>operator code is abandoned, </span></span><span class="transcription-time-part" data-time-start="4456.95" data-time-end="4458.829"><span>and the exception comes back </span></span><span class="transcription-time-part" data-time-start="4458.829" data-time-end="4461.839"><span>up to this level of code, </span></span><span class="transcription-time-part" data-time-start="4461.839" data-time-end="4463.039"><span>and maybe this level of </span></span><span class="transcription-time-part" data-time-start="4463.039" data-time-end="4464.279"><span>code will catch it or deal with it. </span></span><span class="transcription-time-part" data-time-start="4464.279" data-time-end="4466.179"><span>If not, send it up to something higher. </span></span><span class="transcription-time-part" data-time-start="4466.179" data-time-end="4467.579"><span>But anyway, when we come </span></span><span class="transcription-time-part" data-time-start="4467.579" data-time-end="4469.879"><span>back up to this level of code, </span></span><span class="transcription-time-part" data-time-start="4470" data-time-end="4473.699"><span>look what happens. Look what we've got. </span></span><span class="transcription-time-part" data-time-start="4473.699" data-time-end="4475.679"><span>We've got a variable U, </span></span><span class="transcription-time-part" data-time-start="4475.679" data-time-end="4477.799"><span>remember, U was declared here. </span></span><span class="transcription-time-part" data-time-start="4477.799" data-time-end="4482.179"><span>We've got a variable U, a string variable, </span></span><span class="transcription-time-part" data-time-start="4482.179" data-time-end="4484.619"><span>but its value is bizarre. </span></span><span class="transcription-time-part" data-time-start="4484.619" data-time-end="4486.579"><span>U has a dangling pointer here. </span></span><span class="transcription-time-part" data-time-start="4486.579" data-time-end="4489.259"><span>And the problem is, for example, </span></span><span class="transcription-time-part" data-time-start="4489.259" data-time-end="4491.039"><span>if this code doesn't </span></span><span class="transcription-time-part" data-time-start="4491.039" data-time-end="4492.859"><span>handle the exception either, </span></span><span class="transcription-time-part" data-time-start="4492.859" data-time-end="4494.559"><span>and so the exception has to go </span></span><span class="transcription-time-part" data-time-start="4494.559" data-time-end="4496.674"><span>up to some higher level code, </span></span><span class="transcription-time-part" data-time-start="4496.674" data-time-end="4498.389"><span>local variables </span></span><span class="transcription-time-part" data-time-start="4498.389" data-time-end="4499.729"><span>still have their destructors call. </span></span><span class="transcription-time-part" data-time-start="4499.729" data-time-end="4500.829"><span>As an exception, it's going to </span></span><span class="transcription-time-part" data-time-start="4500.829" data-time-end="4502.029"><span>be passed up to a higher level, </span></span><span class="transcription-time-part" data-time-start="4502.029" data-time-end="4504.269"><span>local variables have their destructors call. </span></span><span class="transcription-time-part" data-time-start="4504.269" data-time-end="4505.929"><span>When the destructor for you is </span></span><span class="transcription-time-part" data-time-start="4505.929" data-time-end="4507.889"><span>called on this dangling pointer, </span></span><span class="transcription-time-part" data-time-start="4507.889" data-time-end="4509.189"><span>undefined behavior, </span></span><span class="transcription-time-part" data-time-start="4509.189" data-time-end="4511.129"><span>our program probably crashes. </span></span><span class="transcription-time-part" data-time-start="4511.129" data-time-end="4514.91"><span>So the problem is this implementation </span></span><span class="transcription-time-part" data-time-start="4514.91" data-time-end="4517.629"><span>of the assignment operator makes </span></span><span class="transcription-time-part" data-time-start="4517.629" data-time-end="4519.389"><span>some serious changes to </span></span><span class="transcription-time-part" data-time-start="4519.389" data-time-end="4521.029"><span>the left hand side object </span></span><span class="transcription-time-part" data-time-start="4521.029" data-time-end="4522.549"><span>before it can be </span></span><span class="transcription-time-part" data-time-start="4522.549" data-time-end="4526.43"><span>sure I'll finish successfully. </span></span><span class="transcription-time-part" data-time-start="4526.47" data-time-end="4529.369"><span>We might throw an exception later on, </span></span><span class="transcription-time-part" data-time-start="4529.369" data-time-end="4531.269"><span>leaving the left hand side object </span></span><span class="transcription-time-part" data-time-start="4531.269" data-time-end="4533.094"><span>in a horrible state. </span></span><span class="transcription-time-part" data-time-start="4533.094" data-time-end="4536.439"><span>So so again, fixing </span></span><span class="transcription-time-part" data-time-start="4536.439" data-time-end="4539.699"><span>that is beyond the scope </span></span><span class="transcription-time-part" data-time-start="4539.699" data-time-end="4541.559"><span>of the class to </span></span><span class="transcription-time-part" data-time-start="4541.559" data-time-end="4542.999"><span>worry about all the exception details, </span></span><span class="transcription-time-part" data-time-start="4542.999" data-time-end="4544.519"><span>but we can show you a fix </span></span><span class="transcription-time-part" data-time-start="4544.519" data-time-end="4546.519"><span>that is something that will fix </span></span><span class="transcription-time-part" data-time-start="4546.519" data-time-end="4547.879"><span>the problem and will also be </span></span><span class="transcription-time-part" data-time-start="4547.879" data-time-end="4549.159"><span>a nice simple way </span></span><span class="transcription-time-part" data-time-start="4549.159" data-time-end="4550.459"><span>to write an assignment operator. </span></span><span class="transcription-time-part" data-time-start="4550.459" data-time-end="4553.719"><span>So we're going to do this by </span></span><span class="transcription-time-part" data-time-start="4553.719" data-time-end="4555.519"><span>essentially causing the order </span></span><span class="transcription-time-part" data-time-start="4555.519" data-time-end="4557.699"><span>of these things to be rearranged somehow. </span></span><span class="transcription-time-part" data-time-start="4557.699" data-time-end="4559.079"><span>We don't get rid of the old </span></span><span class="transcription-time-part" data-time-start="4559.079" data-time-end="4560.679"><span>guys text until we </span></span><span class="transcription-time-part" data-time-start="4560.679" data-time-end="4564.189"><span>have a we're sure </span></span><span class="transcription-time-part" data-time-start="4564.189" data-time-end="4565.489"><span>that we got the new storage. </span></span><span class="transcription-time-part" data-time-start="4565.489" data-time-end="4567.129"><span>We're not going to make changes to </span></span><span class="transcription-time-part" data-time-start="4567.129" data-time-end="4568.409"><span>the left hand side until we're </span></span><span class="transcription-time-part" data-time-start="4568.409" data-time-end="4569.169"><span>sure that we're not going </span></span><span class="transcription-time-part" data-time-start="4569.169" data-time-end="4570.789"><span>to throw an exception. </span></span><span class="transcription-time-part" data-time-start="4570.789" data-time-end="4574.429"><span>To do that we'll introduce </span></span><span class="transcription-time-part" data-time-start="4574.429" data-time-end="4576.829"><span>a new function to help us. </span></span><span class="transcription-time-part" data-time-start="4576.829" data-time-end="4578.649"><span>I'm going to show you the modern way </span></span><span class="transcription-time-part" data-time-start="4578.649" data-time-end="4580.709"><span>to write an assignment operator. </span></span><span class="transcription-time-part" data-time-start="4580.709" data-time-end="4586.089"><span>It's going to make use of one more function. </span></span><span class="transcription-time-part" data-time-start="4586.089" data-time-end="4590.59"><span>So let me go back up here to the declaration </span></span><span class="transcription-time-part" data-time-start="4590.59" data-time-end="4592.569"><span>of the string type </span></span><span class="transcription-time-part" data-time-start="4592.569" data-time-end="4595.649"><span>and introduce that function. </span></span><span class="transcription-time-part" data-time-start="4595.649" data-time-end="4598.469"><span>It's a swap function. </span></span><span class="transcription-time-part" data-time-start="4599.21" data-time-end="4602.429"><span>And basically, it allows you </span></span><span class="transcription-time-part" data-time-start="4602.429" data-time-end="4605.289"><span>to swap one string with another string. </span></span><span class="transcription-time-part" data-time-start="4605.289" data-time-end="4608.89"><span>And its implementation. </span></span><span class="transcription-time-part" data-time-start="4608.89" data-time-end="4612.53"><span>I won't go through the full implementation. </span></span><span class="transcription-time-part" data-time-start="4612.78" data-time-end="4615.419"><span>It's pretty straightforward. </span></span><span class="transcription-time-part" data-time-start="4615.419" data-time-end="4620.699"><span>Now, the goal of the swap function is if </span></span><span class="transcription-time-part" data-time-start="4620.699" data-time-end="4623.459"><span>one string has one text in </span></span><span class="transcription-time-part" data-time-start="4623.459" data-time-end="4624.919"><span>its length and another string </span></span><span class="transcription-time-part" data-time-start="4624.919" data-time-end="4626.439"><span>has another text in its length, </span></span><span class="transcription-time-part" data-time-start="4626.439" data-time-end="4627.819"><span>after the swap function, </span></span><span class="transcription-time-part" data-time-start="4627.819" data-time-end="4629.479"><span>those should have changed places. </span></span><span class="transcription-time-part" data-time-start="4629.479" data-time-end="4632.359"><span>So all we need to do is really </span></span><span class="transcription-time-part" data-time-start="4632.359" data-time-end="4634.919"><span>just swap the text pointers </span></span><span class="transcription-time-part" data-time-start="4634.919" data-time-end="4637.679"><span>and swap the lengths. </span></span><span class="transcription-time-part" data-time-start="4637.679" data-time-end="4640.619"><span>So some code to swap </span></span><span class="transcription-time-part" data-time-start="4640.619" data-time-end="4643.339"><span>the pointers and swap the lengths. </span></span><span class="transcription-time-part" data-time-start="4643.339" data-time-end="4646.759"><span>So let me illustrate the swap function </span></span><span class="transcription-time-part" data-time-start="4646.759" data-time-end="4648.059"><span>first and then see how it </span></span><span class="transcription-time-part" data-time-start="4648.059" data-time-end="4650.739"><span>solves our assignment problem. </span></span><span class="transcription-time-part" data-time-start="4650.739" data-time-end="4652.879"><span>If I have two strings, </span></span><span class="transcription-time-part" data-time-start="4652.879" data-time-end="4654.999"><span>let's say A and B. </span></span><span class="transcription-time-part" data-time-start="4654.999" data-time-end="4658.019"><span>And let's say A has the text, hello. </span></span><span class="transcription-time-part" data-time-start="4658.019" data-time-end="4659.979"><span>And it's five characters long, </span></span><span class="transcription-time-part" data-time-start="4659.979" data-time-end="4661.699"><span>and B has the text, </span></span><span class="transcription-time-part" data-time-start="4661.699" data-time-end="4664.539"><span>Wow and it's three characters long. </span></span><span class="transcription-time-part" data-time-start="4664.539" data-time-end="4666.419"><span>And I want to swap those strings. </span></span><span class="transcription-time-part" data-time-start="4666.419" data-time-end="4667.659"><span>I want B to end up </span></span><span class="transcription-time-part" data-time-start="4667.659" data-time-end="4669.419"><span>having the five character string hello, </span></span><span class="transcription-time-part" data-time-start="4669.419" data-time-end="4672.019"><span>and A having the three character string. Wow. </span></span><span class="transcription-time-part" data-time-start="4672.019" data-time-end="4673.319"><span>Okay. </span></span><span class="transcription-time-part" data-time-start="4673.319" data-time-end="4674.679"><span>Let me do the thing </span></span><span class="transcription-time-part" data-time-start="4674.679" data-time-end="4676.559"><span>that's pictorially easiest first. </span></span><span class="transcription-time-part" data-time-start="4676.559" data-time-end="4678.879"><span>My implementation of swaps said </span></span><span class="transcription-time-part" data-time-start="4678.879" data-time-end="4680.019"><span>we just swap the pointers </span></span><span class="transcription-time-part" data-time-start="4680.019" data-time-end="4681.099"><span>and swap the integers. </span></span><span class="transcription-time-part" data-time-start="4681.099" data-time-end="4682.679"><span>So how do you swap integers? </span></span><span class="transcription-time-part" data-time-start="4682.679" data-time-end="4684.359"><span>If I have two integers and I want to </span></span><span class="transcription-time-part" data-time-start="4684.359" data-time-end="4687.139"><span>swap their values, how do I do it? </span></span><span class="transcription-time-part" data-time-start="4687.139" data-time-end="4690.059"><span>Well, I don't just assign this one over </span></span><span class="transcription-time-part" data-time-start="4690.059" data-time-end="4691.379"><span>here and then this one over here because </span></span><span class="transcription-time-part" data-time-start="4691.379" data-time-end="4692.959"><span>if this were three and this were five, </span></span><span class="transcription-time-part" data-time-start="4692.959" data-time-end="4695.019"><span>if I assign the three to the five, </span></span><span class="transcription-time-part" data-time-start="4695.019" data-time-end="4696.659"><span>and then that's now three, </span></span><span class="transcription-time-part" data-time-start="4696.659" data-time-end="4698.899"><span>assign it back to the three, I lost the five. </span></span><span class="transcription-time-part" data-time-start="4698.899" data-time-end="4700.739"><span>So, of course, we know, oh, </span></span><span class="transcription-time-part" data-time-start="4700.739" data-time-end="4702.439"><span>to swap two integers, </span></span><span class="transcription-time-part" data-time-start="4702.439" data-time-end="4704.239"><span>we need a third variable, </span></span><span class="transcription-time-part" data-time-start="4704.239" data-time-end="4706.499"><span>and we will simply </span></span><span class="transcription-time-part" data-time-start="4707.15" data-time-end="4709.229"><span>set up that third variable, </span></span><span class="transcription-time-part" data-time-start="4709.229" data-time-end="4710.809"><span>say as a copy of this one, and </span></span><span class="transcription-time-part" data-time-start="4710.809" data-time-end="4712.109"><span>then assign the five over here, </span></span><span class="transcription-time-part" data-time-start="4712.109" data-time-end="4712.769"><span>and then assign </span></span><span class="transcription-time-part" data-time-start="4712.769" data-time-end="4714.249"><span>that temporary variable over here. </span></span><span class="transcription-time-part" data-time-start="4714.249" data-time-end="4716.769"><span>And now we've swapped the five into three. </span></span><span class="transcription-time-part" data-time-start="4716.769" data-time-end="4719.149"><span>So swapping two values, </span></span><span class="transcription-time-part" data-time-start="4719.149" data-time-end="4721.949"><span>simple built in types is really easy. </span></span><span class="transcription-time-part" data-time-start="4721.949" data-time-end="4723.509"><span>You just have another variable that type and </span></span><span class="transcription-time-part" data-time-start="4723.509" data-time-end="4725.469"><span>just do this little three way exchange. </span></span><span class="transcription-time-part" data-time-start="4725.469" data-time-end="4726.369"><span>So we do that. </span></span><span class="transcription-time-part" data-time-start="4726.369" data-time-end="4728.169"><span>I have a temporary integer </span></span><span class="transcription-time-part" data-time-start="4728.169" data-time-end="4730.609"><span>and I initialize it say to the three, </span></span><span class="transcription-time-part" data-time-start="4730.609" data-time-end="4733.429"><span>then I can assign the five over to here, </span></span><span class="transcription-time-part" data-time-start="4733.429" data-time-end="4734.709"><span>and then I can assign </span></span><span class="transcription-time-part" data-time-start="4734.709" data-time-end="4736.209"><span>the temporary over to here. </span></span><span class="transcription-time-part" data-time-start="4736.209" data-time-end="4738.849"><span>And I swap the integers. Three statements. </span></span><span class="transcription-time-part" data-time-start="4738.849" data-time-end="4741.049"><span>The simple statements swap the integers. </span></span><span class="transcription-time-part" data-time-start="4741.049" data-time-end="4743.309"><span>I'll do the same thing for pointers. </span></span><span class="transcription-time-part" data-time-start="4743.309" data-time-end="4745.609"><span>I'll have a temporary pointer to character, </span></span><span class="transcription-time-part" data-time-start="4745.609" data-time-end="4747.029"><span>a temporary pointer to character, </span></span><span class="transcription-time-part" data-time-start="4747.029" data-time-end="4748.989"><span>and I'll initialize it with this pointer, </span></span><span class="transcription-time-part" data-time-start="4748.989" data-time-end="4750.869"><span>and then I'll assign this pointer over to </span></span><span class="transcription-time-part" data-time-start="4750.869" data-time-end="4754.129"><span>here so that B no longer </span></span><span class="transcription-time-part" data-time-start="4754.129" data-time-end="4756.949"><span>points to WOW but </span></span><span class="transcription-time-part" data-time-start="4756.949" data-time-end="4758.769"><span>gets a copy of A's pointer, </span></span><span class="transcription-time-part" data-time-start="4758.769" data-time-end="4760.729"><span>we assign that to there. </span></span><span class="transcription-time-part" data-time-start="4760.729" data-time-end="4764.469"><span>Then I'll assign the temporary over to A. </span></span><span class="transcription-time-part" data-time-start="4764.469" data-time-end="4766.189"><span>Same thing I did with the integers </span></span><span class="transcription-time-part" data-time-start="4766.189" data-time-end="4768.209"><span>except this time we do it with the pointers. </span></span><span class="transcription-time-part" data-time-start="4768.209" data-time-end="4771.429"><span>That value gets assigned over to here. </span></span><span class="transcription-time-part" data-time-start="4772.349" data-time-end="4776.109"><span>I'm doing this badly. Okay. All right. </span></span><span class="transcription-time-part" data-time-start="4776.109" data-time-end="4778.089"><span>So this pointer got assigned over to here, </span></span><span class="transcription-time-part" data-time-start="4778.089" data-time-end="4779.589"><span>so A now points to WOW. </span></span><span class="transcription-time-part" data-time-start="4779.589" data-time-end="4782.169"><span>And when we leave our swap function, </span></span><span class="transcription-time-part" data-time-start="4782.169" data-time-end="4783.849"><span>the local variables go away, </span></span><span class="transcription-time-part" data-time-start="4783.849" data-time-end="4787.489"><span>the local integer, the local pointer go away. </span></span><span class="transcription-time-part" data-time-start="4787.489" data-time-end="4792.709"><span>And A points to WOW with a length of three, </span></span><span class="transcription-time-part" data-time-start="4792.709" data-time-end="4796.229"><span>and B points to hello with a length of five. </span></span><span class="transcription-time-part" data-time-start="4796.229" data-time-end="4798.169"><span>They have indeed been swapped. </span></span><span class="transcription-time-part" data-time-start="4798.169" data-time-end="4800.149"><span>Notice, all we did </span></span><span class="transcription-time-part" data-time-start="4800.149" data-time-end="4803.089"><span>was three statements to switch two integers, </span></span><span class="transcription-time-part" data-time-start="4803.089" data-time-end="4805.029"><span>three statements to switch two pointers. </span></span><span class="transcription-time-part" data-time-start="4805.029" data-time-end="4808.17"><span>Was there any new dynamic allocation? </span></span><span class="transcription-time-part" data-time-start="4808.17" data-time-end="4810.129"><span>No. Was there any deletion? </span></span><span class="transcription-time-part" data-time-start="4810.129" data-time-end="4814.309"><span>No. So operations involving </span></span><span class="transcription-time-part" data-time-start="4814.309" data-time-end="4816.009"><span>simple built in types </span></span><span class="transcription-time-part" data-time-start="4816.009" data-time-end="4818.169"><span>like this can't throw exceptions. </span></span><span class="transcription-time-part" data-time-start="4818.169" data-time-end="4820.629"><span>So swapping two strings with </span></span><span class="transcription-time-part" data-time-start="4820.629" data-time-end="4823.089"><span>our swap function will </span></span><span class="transcription-time-part" data-time-start="4823.089" data-time-end="4825.009"><span>correctly swap their values </span></span><span class="transcription-time-part" data-time-start="4825.009" data-time-end="4826.749"><span>and not throw any exceptions. </span></span><span class="transcription-time-part" data-time-start="4826.749" data-time-end="4829.449"><span>Okay, so we got the swap function. </span></span><span class="transcription-time-part" data-time-start="4829.449" data-time-end="4831.629"><span>So now what I want to do is figure out, </span></span><span class="transcription-time-part" data-time-start="4831.629" data-time-end="4834.569"><span>how do I do assignment in </span></span><span class="transcription-time-part" data-time-start="4834.569" data-time-end="4838.029"><span>a way that's going to work out nicely. </span></span><span class="transcription-time-part" data-time-start="4838.029" data-time-end="4839.509"><span>A, you don't have to know anything </span></span><span class="transcription-time-part" data-time-start="4839.509" data-time-end="4840.789"><span>about exceptions or anything like that. </span></span><span class="transcription-time-part" data-time-start="4840.789" data-time-end="4841.789"><span>I'm just going through </span></span><span class="transcription-time-part" data-time-start="4841.789" data-time-end="4842.989"><span>the thought process that </span></span><span class="transcription-time-part" data-time-start="4842.989" data-time-end="4844.649"><span>led to the modern way </span></span><span class="transcription-time-part" data-time-start="4844.649" data-time-end="4846.539"><span>to write an assignment operator. </span></span><span class="transcription-time-part" data-time-start="4846.539" data-time-end="4849.949"><span>Okay. So here's the idea. </span></span><span class="transcription-time-part" data-time-start="4849.949" data-time-end="4851.289"><span>The first thing we </span></span><span class="transcription-time-part" data-time-start="4851.289" data-time-end="4853.309"><span>do in our assignment operator, </span></span><span class="transcription-time-part" data-time-start="4853.309" data-time-end="4854.229"><span>once we know that they're not </span></span><span class="transcription-time-part" data-time-start="4854.229" data-time-end="4856.129"><span>the same object is </span></span><span class="transcription-time-part" data-time-start="4856.129" data-time-end="4860.449"><span>we create a temporary string </span></span><span class="transcription-time-part" data-time-start="4860.449" data-time-end="4862.729"><span>as a copy of the right hand side. </span></span><span class="transcription-time-part" data-time-start="4862.729" data-time-end="4864.329"><span>So we're going to </span></span><span class="transcription-time-part" data-time-start="4864.329" data-time-end="4865.429"><span>create a new string as </span></span><span class="transcription-time-part" data-time-start="4865.429" data-time-end="4866.709"><span>a copy of the right hand side. </span></span><span class="transcription-time-part" data-time-start="4866.709" data-time-end="4868.289"><span>Well, that's okay. </span></span><span class="transcription-time-part" data-time-start="4868.289" data-time-end="4871.849"><span>So here's say a temporary string </span></span><span class="transcription-time-part" data-time-start="4871.849" data-time-end="4874.144"><span>as a copy of the right hand side. </span></span><span class="transcription-time-part" data-time-start="4874.144" data-time-end="4876.339"><span>It's a copy of the right hand side. </span></span><span class="transcription-time-part" data-time-start="4876.339" data-time-end="4878.779"><span>Notice that that's going </span></span><span class="transcription-time-part" data-time-start="4878.779" data-time-end="4880.459"><span>to call the copy constructor somehow, </span></span><span class="transcription-time-part" data-time-start="4880.459" data-time-end="4881.399"><span>and that's going to </span></span><span class="transcription-time-part" data-time-start="4881.399" data-time-end="4883.199"><span>dynamically allocate storage here. </span></span><span class="transcription-time-part" data-time-start="4883.199" data-time-end="4885.539"><span>If it can't get the storage, </span></span><span class="transcription-time-part" data-time-start="4885.539" data-time-end="4887.819"><span>if an exception is thrown because we can't </span></span><span class="transcription-time-part" data-time-start="4887.819" data-time-end="4890.159"><span>get the storage from the dynamic allocation, </span></span><span class="transcription-time-part" data-time-start="4890.159" data-time-end="4892.239"><span>then we never got this far. </span></span><span class="transcription-time-part" data-time-start="4892.239" data-time-end="4894.139"><span>We never got the storage, and we leave </span></span><span class="transcription-time-part" data-time-start="4894.139" data-time-end="4895.819"><span>the assignment operator and </span></span><span class="transcription-time-part" data-time-start="4895.819" data-time-end="4898.519"><span>notice is unchanged. </span></span><span class="transcription-time-part" data-time-start="4898.519" data-time-end="4900.059"><span>So unlike the classic way </span></span><span class="transcription-time-part" data-time-start="4900.059" data-time-end="4901.479"><span>to write the assignment operator, </span></span><span class="transcription-time-part" data-time-start="4901.479" data-time-end="4902.479"><span>if we can't get </span></span><span class="transcription-time-part" data-time-start="4902.479" data-time-end="4905.879"><span>the storage as a copy of the hello, </span></span><span class="transcription-time-part" data-time-start="4906.02" data-time-end="4908.819"><span>we leave the function, and there's </span></span><span class="transcription-time-part" data-time-start="4908.819" data-time-end="4911.479"><span>no dangling pointer anywhere. We're fine. </span></span><span class="transcription-time-part" data-time-start="4911.479" data-time-end="4913.919"><span>If we succeed in </span></span><span class="transcription-time-part" data-time-start="4913.919" data-time-end="4915.839"><span>getting the storage for the temporary, </span></span><span class="transcription-time-part" data-time-start="4915.839" data-time-end="4918.059"><span>we're now going to finish the job </span></span><span class="transcription-time-part" data-time-start="4918.059" data-time-end="4919.839"><span>without doing </span></span><span class="transcription-time-part" data-time-start="4919.839" data-time-end="4921.759"><span>anything that could throw an exception. </span></span><span class="transcription-time-part" data-time-start="4921.759" data-time-end="4924.439"><span>And how are we going to do that? Very simple. </span></span><span class="transcription-time-part" data-time-start="4924.439" data-time-end="4926.239"><span>We're going to swap the value </span></span><span class="transcription-time-part" data-time-start="4926.239" data-time-end="4928.579"><span>of Temp and the value of. </span></span><span class="transcription-time-part" data-time-start="4928.579" data-time-end="4934.479"><span>So after swapping, so again, </span></span><span class="transcription-time-part" data-time-start="4934.479" data-time-end="4936.579"><span>you know, the swap function we go, </span></span><span class="transcription-time-part" data-time-start="4936.579" data-time-end="4939.554"><span>we'll exchange the integers. </span></span><span class="transcription-time-part" data-time-start="4939.554" data-time-end="4941.969"><span>And exchange the pointers. </span></span><span class="transcription-time-part" data-time-start="4941.969" data-time-end="4945.309"><span>No new dynamic allocation, exchanges here. </span></span><span class="transcription-time-part" data-time-start="4945.309" data-time-end="4950.689"><span>So ten points to WOW and points to Hello. </span></span><span class="transcription-time-part" data-time-start="4950.689" data-time-end="4953.529"><span>So after doing the swap, </span></span><span class="transcription-time-part" data-time-start="4953.61" data-time-end="4955.809"><span>has the old value of Temp, </span></span><span class="transcription-time-part" data-time-start="4955.809" data-time-end="4957.649"><span>which is a copy of the right hand side, </span></span><span class="transcription-time-part" data-time-start="4957.649" data-time-end="4960.129"><span>and Temp has the old value of HU. </span></span><span class="transcription-time-part" data-time-start="4960.129" data-time-end="4963.129"><span>Well, we've achieved the goal of assignment. </span></span><span class="transcription-time-part" data-time-start="4963.129" data-time-end="4967.289"><span>Y now has its own copy of the text of S and </span></span><span class="transcription-time-part" data-time-start="4967.289" data-time-end="4969.289"><span>the old looks like a copy of </span></span><span class="transcription-time-part" data-time-start="4969.289" data-time-end="4972.289"><span>S and has its own storage. </span></span><span class="transcription-time-part" data-time-start="4972.289" data-time-end="4974.989"><span>And that's great. </span></span><span class="transcription-time-part" data-time-start="4974.989" data-time-end="4976.989"><span>So all that has to happen is </span></span><span class="transcription-time-part" data-time-start="4976.989" data-time-end="4980.069"><span>for the local temp to be destroyed, </span></span><span class="transcription-time-part" data-time-start="4980.069" data-time-end="4981.769"><span>'cause when temp is destroyed, </span></span><span class="transcription-time-part" data-time-start="4981.769" data-time-end="4983.724"><span>that will get rid of the WOW </span></span><span class="transcription-time-part" data-time-start="4983.724" data-time-end="4985.719"><span>and then Tep goes away. </span></span><span class="transcription-time-part" data-time-start="4985.719" data-time-end="4986.639"><span>That works. </span></span><span class="transcription-time-part" data-time-start="4986.639" data-time-end="4991.259"><span>So, the implementation there says, All right. </span></span><span class="transcription-time-part" data-time-start="4991.259" data-time-end="4994.749"><span>Let's go look at the modern way to do this. </span></span><span class="transcription-time-part" data-time-start="4994.749" data-time-end="4997.499"><span>Let's create a temporary string </span></span><span class="transcription-time-part" data-time-start="4997.499" data-time-end="4999.199"><span>as a copy of the right hand side. </span></span><span class="transcription-time-part" data-time-start="4999.199" data-time-end="5002.299"><span>And on the left hand side object, </span></span><span class="transcription-time-part" data-time-start="5002.299" data-time-end="5003.719"><span>let's call the swap function </span></span><span class="transcription-time-part" data-time-start="5003.719" data-time-end="5005.499"><span>to swap it with the temporary. </span></span><span class="transcription-time-part" data-time-start="5005.499" data-time-end="5007.939"><span>And this closed curly </span></span><span class="transcription-time-part" data-time-start="5007.939" data-time-end="5011.399"><span>brace leaves the scope of the I statement, </span></span><span class="transcription-time-part" data-time-start="5011.399" data-time-end="5012.839"><span>which will cause when </span></span><span class="transcription-time-part" data-time-start="5012.839" data-time-end="5014.479"><span>we leave the scope of the if statement, </span></span><span class="transcription-time-part" data-time-start="5014.479" data-time-end="5016.259"><span>the temporary will be destroyed, </span></span><span class="transcription-time-part" data-time-start="5016.259" data-time-end="5018.079"><span>so that causes the destructor. </span></span><span class="transcription-time-part" data-time-start="5018.079" data-time-end="5020.999"><span>And there we go. That's it. </span></span><span class="transcription-time-part" data-time-start="5020.999" data-time-end="5023.539"><span>That is the modern way </span></span><span class="transcription-time-part" data-time-start="5023.539" data-time-end="5025.359"><span>to write an assignment operator. </span></span><span class="transcription-time-part" data-time-start="5025.359" data-time-end="5030.219"><span>This is the so called copy and swap approach. </span></span><span class="transcription-time-part" data-time-start="5030.219" data-time-end="5033.019"><span>It's really amazing. It's beautiful. </span></span><span class="transcription-time-part" data-time-start="5033.019" data-time-end="5036.359"><span>You've always wanted to, you know, </span></span><span class="transcription-time-part" data-time-start="5036.359" data-time-end="5037.819"><span>have the assignment operator </span></span><span class="transcription-time-part" data-time-start="5037.819" data-time-end="5039.899"><span>call the copy constructor somehow. </span></span><span class="transcription-time-part" data-time-start="5039.899" data-time-end="5041.899"><span>Well, it does it by </span></span><span class="transcription-time-part" data-time-start="5041.899" data-time-end="5044.439"><span>constructing a temporary string </span></span><span class="transcription-time-part" data-time-start="5044.439" data-time-end="5045.999"><span>as a copy of the right hand size. </span></span><span class="transcription-time-part" data-time-start="5045.999" data-time-end="5047.639"><span>So that does, in fact, </span></span><span class="transcription-time-part" data-time-start="5047.639" data-time-end="5049.439"><span>get the copy constructor called. </span></span><span class="transcription-time-part" data-time-start="5049.439" data-time-end="5051.499"><span>We don't have to have the I'm sorry, </span></span><span class="transcription-time-part" data-time-start="5051.499" data-time-end="5052.979"><span>the copy constructors down here. </span></span><span class="transcription-time-part" data-time-start="5052.979" data-time-end="5054.439"><span>We don't have to have this key code </span></span><span class="transcription-time-part" data-time-start="5054.439" data-time-end="5055.819"><span>written in more than one place. </span></span><span class="transcription-time-part" data-time-start="5055.819" data-time-end="5057.599"><span>That's the code for the copy constructor, </span></span><span class="transcription-time-part" data-time-start="5057.599" data-time-end="5059.139"><span>and that's the only place we write it. </span></span><span class="transcription-time-part" data-time-start="5059.139" data-time-end="5061.739"><span>And then our assignment operator will make </span></span><span class="transcription-time-part" data-time-start="5061.739" data-time-end="5064.969"><span>use of that to create the temporary object. </span></span><span class="transcription-time-part" data-time-start="5064.969" data-time-end="5067.419"><span>And that will try to </span></span><span class="transcription-time-part" data-time-start="5067.419" data-time-end="5069.839"><span>acquire storage to make a copy. </span></span><span class="transcription-time-part" data-time-start="5069.839" data-time-end="5071.159"><span>And if it fails and throws </span></span><span class="transcription-time-part" data-time-start="5071.159" data-time-end="5073.339"><span>an exception, we haven't changed anything. </span></span><span class="transcription-time-part" data-time-start="5073.339" data-time-end="5076.239"><span>If it succeeds, then all we have to do is put </span></span><span class="transcription-time-part" data-time-start="5076.239" data-time-end="5078.319"><span>the copied right hand side in </span></span><span class="transcription-time-part" data-time-start="5078.319" data-time-end="5079.259"><span>the proper place and </span></span><span class="transcription-time-part" data-time-start="5079.259" data-time-end="5081.159"><span>we do that by swapping it. </span></span><span class="transcription-time-part" data-time-start="5081.159" data-time-end="5084.059"><span>And the swap doesn't </span></span><span class="transcription-time-part" data-time-start="5084.059" data-time-end="5085.559"><span>do anything that can throw an exception </span></span><span class="transcription-time-part" data-time-start="5085.559" data-time-end="5088.099"><span>because it's just moving integers </span></span><span class="transcription-time-part" data-time-start="5088.099" data-time-end="5089.539"><span>around and moving pointers around. </span></span><span class="transcription-time-part" data-time-start="5089.539" data-time-end="5091.359"><span>There's nothing harmful there. </span></span><span class="transcription-time-part" data-time-start="5091.359" data-time-end="5092.899"><span>So there we go. </span></span><span class="transcription-time-part" data-time-start="5092.899" data-time-end="5094.259"><span>The modern pattern for </span></span><span class="transcription-time-part" data-time-start="5094.259" data-time-end="5095.619"><span>writing an assignment operator for </span></span><span class="transcription-time-part" data-time-start="5095.619" data-time-end="5097.379"><span>any type follows </span></span><span class="transcription-time-part" data-time-start="5097.379" data-time-end="5100.039"><span>pretty much exactly this approach. </span></span><span class="transcription-time-part" data-time-start="5100.349" data-time-end="5102.609"><span>For whatever type, in this case, </span></span><span class="transcription-time-part" data-time-start="5102.609" data-time-end="5103.769"><span>it happens to be string. </span></span><span class="transcription-time-part" data-time-start="5103.769" data-time-end="5107.169"><span>The signature of your function is you take </span></span><span class="transcription-time-part" data-time-start="5107.169" data-time-end="5109.029"><span>a constant reference to the right hand side </span></span><span class="transcription-time-part" data-time-start="5109.029" data-time-end="5110.149"><span>because you promise not to </span></span><span class="transcription-time-part" data-time-start="5110.149" data-time-end="5111.629"><span>modify the right hand side, </span></span><span class="transcription-time-part" data-time-start="5111.629" data-time-end="5113.649"><span>and you're going to return a reference, </span></span><span class="transcription-time-part" data-time-start="5113.649" data-time-end="5115.429"><span>which will be the return star this, </span></span><span class="transcription-time-part" data-time-start="5115.429" data-time-end="5116.989"><span>a reference to the left hand side, </span></span><span class="transcription-time-part" data-time-start="5116.989" data-time-end="5119.769"><span>and the body pretty much looks like this. </span></span><span class="transcription-time-part" data-time-start="5119.769" data-time-end="5121.809"><span>If the objects are different objects, </span></span><span class="transcription-time-part" data-time-start="5121.809" data-time-end="5123.749"><span>then we'll copy the right hand side </span></span><span class="transcription-time-part" data-time-start="5123.749" data-time-end="5124.469"><span>to a temp and then </span></span><span class="transcription-time-part" data-time-start="5124.469" data-time-end="5125.869"><span>swap it into the right place. </span></span><span class="transcription-time-part" data-time-start="5125.869" data-time-end="5126.949"><span>And the destructor will </span></span><span class="transcription-time-part" data-time-start="5126.949" data-time-end="5127.949"><span>get rid of the old value of </span></span><span class="transcription-time-part" data-time-start="5127.949" data-time-end="5129.989"><span>the left hand side because the old value of </span></span><span class="transcription-time-part" data-time-start="5129.989" data-time-end="5131.809"><span>the left hand side is sitting in the temp at </span></span><span class="transcription-time-part" data-time-start="5131.809" data-time-end="5134.634"><span>the time we destroy TEM. </span></span><span class="transcription-time-part" data-time-start="5134.634" data-time-end="5136.699"><span>If the objects are the same type </span></span><span class="transcription-time-part" data-time-start="5136.699" data-time-end="5138.299"><span>the same object, </span></span><span class="transcription-time-part" data-time-start="5138.299" data-time-end="5139.559"><span>then we skip all that and </span></span><span class="transcription-time-part" data-time-start="5139.559" data-time-end="5141.759"><span>just return star this. </span></span><span class="transcription-time-part" data-time-start="5141.759" data-time-end="5144.019"><span>But actually, if the objects are </span></span><span class="transcription-time-part" data-time-start="5144.019" data-time-end="5146.319"><span>the same object, this would still work. </span></span><span class="transcription-time-part" data-time-start="5146.319" data-time-end="5148.939"><span>So this if test is </span></span><span class="transcription-time-part" data-time-start="5148.939" data-time-end="5151"><span>not necessary for correctness. </span></span><span class="transcription-time-part" data-time-start="5151" data-time-end="5153.8"><span>It's just a bit of an optimization. </span></span><span class="transcription-time-part" data-time-start="5153.8" data-time-end="5156.319"><span>Because if the objects are the same object, </span></span><span class="transcription-time-part" data-time-start="5156.319" data-time-end="5158.279"><span>if you work through the code, </span></span><span class="transcription-time-part" data-time-start="5158.279" data-time-end="5160.699"><span>if I have the left hand side </span></span><span class="transcription-time-part" data-time-start="5160.699" data-time-end="5162.639"><span>and the right hand side object are the same, </span></span><span class="transcription-time-part" data-time-start="5162.639" data-time-end="5166.259"><span>then I simply copy the right hand side into a </span></span><span class="transcription-time-part" data-time-start="5166.259" data-time-end="5168.849"><span>temporary and then swap </span></span><span class="transcription-time-part" data-time-start="5168.849" data-time-end="5170.649"><span>it back in with the left hand side, </span></span><span class="transcription-time-part" data-time-start="5170.649" data-time-end="5172.189"><span>which is also the right hand side. </span></span><span class="transcription-time-part" data-time-start="5172.189" data-time-end="5173.929"><span>So we basically made a copy of </span></span><span class="transcription-time-part" data-time-start="5173.929" data-time-end="5174.609"><span>the value and then </span></span><span class="transcription-time-part" data-time-start="5174.609" data-time-end="5176.209"><span>swapped it back into itself. </span></span><span class="transcription-time-part" data-time-start="5176.209" data-time-end="5177.829"><span>So that was, you know, </span></span><span class="transcription-time-part" data-time-start="5177.829" data-time-end="5179.969"><span>wasteful, but at least it works. </span></span><span class="transcription-time-part" data-time-start="5179.969" data-time-end="5183.389"><span>So the test for </span></span><span class="transcription-time-part" data-time-start="5183.389" data-time-end="5185.909"><span>self assignments not </span></span><span class="transcription-time-part" data-time-start="5185.909" data-time-end="5187.489"><span>so necessary in this case. </span></span><span class="transcription-time-part" data-time-start="5187.489" data-time-end="5189.289"><span>But this is the pattern that people </span></span><span class="transcription-time-part" data-time-start="5189.289" data-time-end="5192.009"><span>these days now write assignment operators. </span></span><span class="transcription-time-part" data-time-start="5192.009" data-time-end="5195.384"><span>It requires having a swap function, </span></span><span class="transcription-time-part" data-time-start="5195.384" data-time-end="5199.339"><span>that itself does not well, </span></span><span class="transcription-time-part" data-time-start="5199.339" data-time-end="5201.339"><span>the swap function for string should not </span></span><span class="transcription-time-part" data-time-start="5201.339" data-time-end="5203.779"><span>call the assignment operator for string, </span></span><span class="transcription-time-part" data-time-start="5203.779" data-time-end="5205.459"><span>should not call the </span></span><span class="transcription-time-part" data-time-start="5205.459" data-time-end="5207.059"><span>copy constructor for string. </span></span><span class="transcription-time-part" data-time-start="5207.059" data-time-end="5208.799"><span>Swap should simply work </span></span><span class="transcription-time-part" data-time-start="5208.799" data-time-end="5211.679"><span>itself on the data members itself. </span></span><span class="transcription-time-part" data-time-start="5211.679" data-time-end="5214.039"><span>It defeats the purpose if </span></span><span class="transcription-time-part" data-time-start="5214.039" data-time-end="5216.259"><span>SWAP calls assignment for string </span></span><span class="transcription-time-part" data-time-start="5216.259" data-time-end="5216.919"><span>because string </span></span><span class="transcription-time-part" data-time-start="5216.919" data-time-end="5218.279"><span>is the assignment for strings is </span></span><span class="transcription-time-part" data-time-start="5218.279" data-time-end="5219.279"><span>going to be calling Swap. </span></span><span class="transcription-time-part" data-time-start="5219.279" data-time-end="5221.059"><span>So that's kind of silly. </span></span><span class="transcription-time-part" data-time-start="5221.059" data-time-end="5223.299"><span>And it defeats the purpose </span></span><span class="transcription-time-part" data-time-start="5223.299" data-time-end="5224.979"><span>of SWAP calls the copy constructor for </span></span><span class="transcription-time-part" data-time-start="5224.979" data-time-end="5226.659"><span>string because that's going to try to </span></span><span class="transcription-time-part" data-time-start="5226.659" data-time-end="5228.759"><span>dynamically allocate stuff that might fail, </span></span><span class="transcription-time-part" data-time-start="5228.759" data-time-end="5230.779"><span>and the whole point is we don't </span></span><span class="transcription-time-part" data-time-start="5230.779" data-time-end="5232.499"><span>want we don't want </span></span><span class="transcription-time-part" data-time-start="5232.499" data-time-end="5233.419"><span>the SWAP function to </span></span><span class="transcription-time-part" data-time-start="5233.419" data-time-end="5235.094"><span>do anything that might fail. </span></span><span class="transcription-time-part" data-time-start="5235.094" data-time-end="5238.229"><span>So the swap function should be written </span></span><span class="transcription-time-part" data-time-start="5238.229" data-time-end="5243.089"><span>to simply do the swaps on the data members. </span></span><span class="transcription-time-part" data-time-start="5245.73" data-time-end="5247.809"><span>And then we've got a pattern </span></span><span class="transcription-time-part" data-time-start="5247.809" data-time-end="5249.089"><span>that works very nicely for writing </span></span><span class="transcription-time-part" data-time-start="5249.089" data-time-end="5251.409"><span>an assignment operator that leverages </span></span><span class="transcription-time-part" data-time-start="5251.409" data-time-end="5252.609"><span>the code of the copy constructor </span></span><span class="transcription-time-part" data-time-start="5252.609" data-time-end="5253.109"><span>without having to </span></span><span class="transcription-time-part" data-time-start="5253.109" data-time-end="5254.529"><span>actually duplicate that code. </span></span><span class="transcription-time-part" data-time-start="5254.529" data-time-end="5258.969"><span>Okay, so that is </span></span><span class="transcription-time-part" data-time-start="5258.969" data-time-end="5261.209"><span>the last bit of the resource </span></span><span class="transcription-time-part" data-time-start="5261.209" data-time-end="5262.989"><span>management stuff I wanted to get into. </span></span><span class="transcription-time-part" data-time-start="5262.989" data-time-end="5264.829"><span>You know, the basic ideas </span></span><span class="transcription-time-part" data-time-start="5264.829" data-time-end="5266.909"><span>here carry over for lots of other types. </span></span><span class="transcription-time-part" data-time-start="5266.909" data-time-end="5269.209"><span>As I said, for our purposes, </span></span><span class="transcription-time-part" data-time-start="5269.209" data-time-end="5270.649"><span>the main resource we're going to be </span></span><span class="transcription-time-part" data-time-start="5270.649" data-time-end="5272.509"><span>managing when we write our own types, </span></span><span class="transcription-time-part" data-time-start="5272.509" data-time-end="5274.169"><span>it tends to be memory, </span></span><span class="transcription-time-part" data-time-start="5274.169" data-time-end="5276.829"><span>but it could be all kinds of other things </span></span><span class="transcription-time-part" data-time-start="5276.829" data-time-end="5279.369"><span>like open file descriptors or locks on </span></span><span class="transcription-time-part" data-time-start="5279.369" data-time-end="5282.629"><span>database records or any other sort </span></span><span class="transcription-time-part" data-time-start="5282.629" data-time-end="5284.009"><span>of resource that you might have </span></span><span class="transcription-time-part" data-time-start="5284.009" data-time-end="5286.37"><span>to allocate and deallocate, </span></span><span class="transcription-time-part" data-time-start="5286.37" data-time-end="5288.889"><span>which means you'd have to write a destructor. </span></span><span class="transcription-time-part" data-time-start="5288.889" data-time-end="5290.129"><span>And if you need to write </span></span><span class="transcription-time-part" data-time-start="5290.129" data-time-end="5292.189"><span>a destructor for a type, </span></span><span class="transcription-time-part" data-time-start="5292.189" data-time-end="5294.069"><span>you quite often will have to write </span></span><span class="transcription-time-part" data-time-start="5294.069" data-time-end="5295.189"><span>a copy constructor and an </span></span><span class="transcription-time-part" data-time-start="5295.189" data-time-end="5297.429"><span>assignment operator to get correct behavior. </span></span><span class="transcription-time-part" data-time-start="5297.429" data-time-end="5299.689"><span>Because the reason to write a destructor is </span></span><span class="transcription-time-part" data-time-start="5299.689" data-time-end="5302.474"><span>usually there's a resource I want to release. </span></span><span class="transcription-time-part" data-time-start="5302.474" data-time-end="5304.279"><span>But then that also means, well, </span></span><span class="transcription-time-part" data-time-start="5304.279" data-time-end="5305.939"><span>then how do I copy the </span></span><span class="transcription-time-part" data-time-start="5305.939" data-time-end="5307.939"><span>object if it holds a resource? </span></span><span class="transcription-time-part" data-time-start="5307.939" data-time-end="5311.499"><span>Do I want the compiler just to do a member by </span></span><span class="transcription-time-part" data-time-start="5311.499" data-time-end="5313.419"><span>member copy of the data members </span></span><span class="transcription-time-part" data-time-start="5313.419" data-time-end="5315.999"><span>or do I need to take control myself? </span></span><span class="transcription-time-part" data-time-start="5315.999" data-time-end="5317.679"><span>So generally, </span></span><span class="transcription-time-part" data-time-start="5317.679" data-time-end="5321.38"><span>these three functions, the destructor, </span></span><span class="transcription-time-part" data-time-start="5321.38" data-time-end="5323.099"><span>the assignment operator, </span></span><span class="transcription-time-part" data-time-start="5323.099" data-time-end="5324.859"><span>destructor, the copy constructor, </span></span><span class="transcription-time-part" data-time-start="5324.859" data-time-end="5327.279"><span>and the assignment operator tend </span></span><span class="transcription-time-part" data-time-start="5327.279" data-time-end="5328.439"><span>to all travel together. </span></span><span class="transcription-time-part" data-time-start="5328.439" data-time-end="5329.899"><span>If you need one, you're </span></span><span class="transcription-time-part" data-time-start="5329.899" data-time-end="5331.779"><span>generally going to need the other two. </span></span><span class="transcription-time-part" data-time-start="5331.779" data-time-end="5333.339"><span>There are some exceptions, but </span></span><span class="transcription-time-part" data-time-start="5333.339" data-time-end="5334.339"><span>that's generally going to </span></span><span class="transcription-time-part" data-time-start="5334.339" data-time-end="5335.404"><span>be the way it works. </span></span><span class="transcription-time-part" data-time-start="5335.404" data-time-end="5338.169"><span>Now, what that tells you, for example, </span></span><span class="transcription-time-part" data-time-start="5338.169" data-time-end="5339.989"><span>although I think we mentioned it </span></span><span class="transcription-time-part" data-time-start="5339.989" data-time-end="5342.689"><span>in a footnote in the Project one spec, </span></span><span class="transcription-time-part" data-time-start="5342.689" data-time-end="5345.209"><span>is that project one is kind of </span></span><span class="transcription-time-part" data-time-start="5345.209" data-time-end="5348.849"><span>deficient in this regard, because after all, </span></span><span class="transcription-time-part" data-time-start="5348.849" data-time-end="5351.389"><span>if you have a room object </span></span><span class="transcription-time-part" data-time-start="5351.389" data-time-end="5353.049"><span>and this room object has </span></span><span class="transcription-time-part" data-time-start="5353.049" data-time-end="5357.719"><span>an array of pointers to Bs Okay. </span></span><span class="transcription-time-part" data-time-start="5357.719" data-time-end="5359.659"><span>Now, we have a destructor that </span></span><span class="transcription-time-part" data-time-start="5359.659" data-time-end="5361.679"><span>says when a room object is going away, </span></span><span class="transcription-time-part" data-time-start="5361.679" data-time-end="5363.319"><span>we have to loop through the array of </span></span><span class="transcription-time-part" data-time-start="5363.319" data-time-end="5364.979"><span>pointers to bees for as many as </span></span><span class="transcription-time-part" data-time-start="5364.979" data-time-end="5366.759"><span>there are and call delete </span></span><span class="transcription-time-part" data-time-start="5366.759" data-time-end="5367.859"><span>on each of these pointers </span></span><span class="transcription-time-part" data-time-start="5367.859" data-time-end="5369.039"><span>to get rid of the bees. </span></span><span class="transcription-time-part" data-time-start="5369.039" data-time-end="5371.079"><span>That's fine. That deletions fine. </span></span><span class="transcription-time-part" data-time-start="5371.079" data-time-end="5373.079"><span>But we never wrote a copy constructor. </span></span><span class="transcription-time-part" data-time-start="5373.079" data-time-end="5374.839"><span>We never wrote an assignment operator. </span></span><span class="transcription-time-part" data-time-start="5374.839" data-time-end="5376.859"><span>We didn't need to copy or assign rooms. </span></span><span class="transcription-time-part" data-time-start="5376.859" data-time-end="5378.959"><span>But maybe this class can be used as part of </span></span><span class="transcription-time-part" data-time-start="5378.959" data-time-end="5380.219"><span>some fancier game where </span></span><span class="transcription-time-part" data-time-start="5380.219" data-time-end="5382.479"><span>we do need to say copy rooms. </span></span><span class="transcription-time-part" data-time-start="5382.479" data-time-end="5383.979"><span>If you want to be </span></span><span class="transcription-time-part" data-time-start="5383.979" data-time-end="5385.779"><span>careful because look what happens. </span></span><span class="transcription-time-part" data-time-start="5385.779" data-time-end="5388.279"><span>If we create another </span></span><span class="transcription-time-part" data-time-start="5388.279" data-time-end="5390.099"><span>room as a copy of this one, </span></span><span class="transcription-time-part" data-time-start="5390.099" data-time-end="5391.719"><span>then here's another room </span></span><span class="transcription-time-part" data-time-start="5391.719" data-time-end="5393.999"><span>and it has this array. </span></span><span class="transcription-time-part" data-time-start="5394.12" data-time-end="5397.48"><span>If we don't write a copy constructor, </span></span><span class="transcription-time-part" data-time-start="5397.48" data-time-end="5399.159"><span>the compiler writes one for </span></span><span class="transcription-time-part" data-time-start="5399.159" data-time-end="5402.139"><span>us that simply copies each member. </span></span><span class="transcription-time-part" data-time-start="5402.139" data-time-end="5407.459"><span>If this is a ten by 15 room, </span></span><span class="transcription-time-part" data-time-start="5407.459" data-time-end="5409.879"><span>say one member has the number of rows, </span></span><span class="transcription-time-part" data-time-start="5409.879" data-time-end="5411.299"><span>one member has the number of columns, </span></span><span class="transcription-time-part" data-time-start="5411.299" data-time-end="5413.039"><span>and there are other data members as well. </span></span><span class="transcription-time-part" data-time-start="5413.039" data-time-end="5414.799"><span>So if you don't write a copy constructor, </span></span><span class="transcription-time-part" data-time-start="5414.799" data-time-end="5416.119"><span>here's what will happen. </span></span><span class="transcription-time-part" data-time-start="5416.119" data-time-end="5418.679"><span>The one the compiler writes for us will copy </span></span><span class="transcription-time-part" data-time-start="5418.679" data-time-end="5422.479"><span>the integer, copy the integer, </span></span><span class="transcription-time-part" data-time-start="5422.6" data-time-end="5427.079"><span>and then it's got a copy the array, </span></span><span class="transcription-time-part" data-time-start="5427.079" data-time-end="5428.699"><span>which it does by copying each member, </span></span><span class="transcription-time-part" data-time-start="5428.699" data-time-end="5430.279"><span>copy the pointer, copy </span></span><span class="transcription-time-part" data-time-start="5430.279" data-time-end="5433.109"><span>the pointer, copy the pointer. </span></span><span class="transcription-time-part" data-time-start="5433.109" data-time-end="5435.699"><span>So the problem is the new room shares </span></span><span class="transcription-time-part" data-time-start="5435.699" data-time-end="5438.399"><span>the same bees as the old room. </span></span><span class="transcription-time-part" data-time-start="5438.399" data-time-end="5439.399"><span>That's going to be </span></span><span class="transcription-time-part" data-time-start="5439.399" data-time-end="5440.419"><span>a problem because, of course, </span></span><span class="transcription-time-part" data-time-start="5440.419" data-time-end="5442.079"><span>when we're done with that copied room and </span></span><span class="transcription-time-part" data-time-start="5442.079" data-time-end="5445.179"><span>that copied room is about to go away, </span></span><span class="transcription-time-part" data-time-start="5445.179" data-time-end="5446.659"><span>the destructor is going to </span></span><span class="transcription-time-part" data-time-start="5446.659" data-time-end="5447.719"><span>go through the array and </span></span><span class="transcription-time-part" data-time-start="5447.719" data-time-end="5449.979"><span>call delete on each of the pointers here, </span></span><span class="transcription-time-part" data-time-start="5449.979" data-time-end="5451.239"><span>and then this can go right now. </span></span><span class="transcription-time-part" data-time-start="5451.239" data-time-end="5453.779"><span>This can go right now. This go away now. </span></span><span class="transcription-time-part" data-time-start="5453.779" data-time-end="5455.639"><span>But the original room now </span></span><span class="transcription-time-part" data-time-start="5455.639" data-time-end="5456.919"><span>has a bunch of dangling pointers, </span></span><span class="transcription-time-part" data-time-start="5456.919" data-time-end="5457.839"><span>and when the destructor </span></span><span class="transcription-time-part" data-time-start="5457.839" data-time-end="5459.139"><span>is called in this room, </span></span><span class="transcription-time-part" data-time-start="5459.139" data-time-end="5460.999"><span>delete is going to be called on all these </span></span><span class="transcription-time-part" data-time-start="5460.999" data-time-end="5464.079"><span>dangling pointers, undefined behavior. </span></span><span class="transcription-time-part" data-time-start="5464.079" data-time-end="5466.079"><span>So if a room contains pointers </span></span><span class="transcription-time-part" data-time-start="5466.079" data-time-end="5467.619"><span>to dynamically allocated bees, </span></span><span class="transcription-time-part" data-time-start="5467.619" data-time-end="5468.959"><span>then we have to think carefully about </span></span><span class="transcription-time-part" data-time-start="5468.959" data-time-end="5470.299"><span>the copying and assignment behavior </span></span><span class="transcription-time-part" data-time-start="5470.299" data-time-end="5471.299"><span>of the room type. </span></span><span class="transcription-time-part" data-time-start="5471.299" data-time-end="5472.979"><span>So we didn't clutter </span></span><span class="transcription-time-part" data-time-start="5472.979" data-time-end="5474.779"><span>your mind with that in Project one, </span></span><span class="transcription-time-part" data-time-start="5474.779" data-time-end="5476.059"><span>and certainly we didn't clutter </span></span><span class="transcription-time-part" data-time-start="5476.059" data-time-end="5477.759"><span>people in CS 31 with that. </span></span><span class="transcription-time-part" data-time-start="5477.759" data-time-end="5479.28"><span>But realistically, </span></span><span class="transcription-time-part" data-time-start="5479.28" data-time-end="5481.319"><span>that's what you would want to do. </span></span><span class="transcription-time-part" data-time-start="5481.319" data-time-end="5483.44"><span>Right. So if you need a destructor, </span></span><span class="transcription-time-part" data-time-start="5483.44" data-time-end="5484.819"><span>you probably need to think </span></span><span class="transcription-time-part" data-time-start="5484.819" data-time-end="5487.079"><span>about copying an assignment as well. </span></span><span class="transcription-time-part" data-time-start="5487.079" data-time-end="5489.679"><span>Okay? So, finally, I want to </span></span><span class="transcription-time-part" data-time-start="5489.679" data-time-end="5490.839"><span>hit an issue that comes up when </span></span><span class="transcription-time-part" data-time-start="5490.839" data-time-end="5492.059"><span>you're dealing with assignment, </span></span><span class="transcription-time-part" data-time-start="5492.059" data-time-end="5494.129"><span>but it's actually much more general. </span></span><span class="transcription-time-part" data-time-start="5494.129" data-time-end="5497.139"><span>So looking back at assignment of </span></span><span class="transcription-time-part" data-time-start="5497.139" data-time-end="5498.439"><span>strings with the </span></span><span class="transcription-time-part" data-time-start="5498.439" data-time-end="5500.16"><span>old fashioned implementation, </span></span><span class="transcription-time-part" data-time-start="5500.16" data-time-end="5501.719"><span>remember that if I write </span></span><span class="transcription-time-part" data-time-start="5501.719" data-time-end="5503.259"><span>an expression U gets </span></span><span class="transcription-time-part" data-time-start="5503.259" data-time-end="5504.899"><span>S using the assignment operator, </span></span><span class="transcription-time-part" data-time-start="5504.899" data-time-end="5507.239"><span>that really means call the member function. </span></span><span class="transcription-time-part" data-time-start="5507.239" data-time-end="5508.819"><span>And here was </span></span><span class="transcription-time-part" data-time-start="5508.819" data-time-end="5510.599"><span>an implementation of the member function, </span></span><span class="transcription-time-part" data-time-start="5510.599" data-time-end="5512.4"><span>the old fashioned implementation, </span></span><span class="transcription-time-part" data-time-start="5512.4" data-time-end="5513.319"><span>look like this. </span></span><span class="transcription-time-part" data-time-start="5513.319" data-time-end="5515.219"><span>We clean up the left hand side, </span></span><span class="transcription-time-part" data-time-start="5515.219" data-time-end="5516.739"><span>and we copy over the right </span></span><span class="transcription-time-part" data-time-start="5516.739" data-time-end="5518.379"><span>hand side, that'll work. </span></span><span class="transcription-time-part" data-time-start="5518.379" data-time-end="5520.079"><span>Now, it's not going to </span></span><span class="transcription-time-part" data-time-start="5520.079" data-time-end="5522.019"><span>work correctly in the face of exceptions. </span></span><span class="transcription-time-part" data-time-start="5522.019" data-time-end="5523.599"><span>The new can't do its job, </span></span><span class="transcription-time-part" data-time-start="5523.599" data-time-end="5524.959"><span>that's why we tend to use </span></span><span class="transcription-time-part" data-time-start="5524.959" data-time-end="5526.919"><span>the modern style of copy and swap. </span></span><span class="transcription-time-part" data-time-start="5526.919" data-time-end="5528.859"><span>But the key point is, </span></span><span class="transcription-time-part" data-time-start="5528.859" data-time-end="5532.204"><span>if we don't check for self assignment here, </span></span><span class="transcription-time-part" data-time-start="5532.204" data-time-end="5535.769"><span>if we don't check that the object that </span></span><span class="transcription-time-part" data-time-start="5535.769" data-time-end="5538.309"><span>the left hand side pointer is pointing to is </span></span><span class="transcription-time-part" data-time-start="5538.309" data-time-end="5539.709"><span>different from the object that </span></span><span class="transcription-time-part" data-time-start="5539.709" data-time-end="5541.949"><span>the right hand side is a reference to, </span></span><span class="transcription-time-part" data-time-start="5541.949" data-time-end="5543.95"><span>this code was problematic. </span></span><span class="transcription-time-part" data-time-start="5543.95" data-time-end="5545.249"><span>I went through that. We'd be </span></span><span class="transcription-time-part" data-time-start="5545.249" data-time-end="5546.109"><span>deleting the text for </span></span><span class="transcription-time-part" data-time-start="5546.109" data-time-end="5547.129"><span>the left hand side value, </span></span><span class="transcription-time-part" data-time-start="5547.129" data-time-end="5548.209"><span>but if that's the same object </span></span><span class="transcription-time-part" data-time-start="5548.209" data-time-end="5549.469"><span>as the right hand side value, </span></span><span class="transcription-time-part" data-time-start="5549.469" data-time-end="5550.669"><span>we just lost that text </span></span><span class="transcription-time-part" data-time-start="5550.669" data-time-end="5552.009"><span>from the right hand side value. </span></span><span class="transcription-time-part" data-time-start="5552.009" data-time-end="5554.449"><span>So the problem comes if </span></span><span class="transcription-time-part" data-time-start="5554.449" data-time-end="5555.729"><span>the left hand side value is </span></span><span class="transcription-time-part" data-time-start="5555.729" data-time-end="5557.389"><span>the same object as the right hand side value. </span></span><span class="transcription-time-part" data-time-start="5557.389" data-time-end="5559.829"><span>For example, let's say that </span></span><span class="transcription-time-part" data-time-start="5559.829" data-time-end="5563.789"><span>we've got an array of strings and we </span></span><span class="transcription-time-part" data-time-start="5563.789" data-time-end="5565.269"><span>have some algorithm that's going through </span></span><span class="transcription-time-part" data-time-start="5565.269" data-time-end="5567.229"><span>and assigning the string </span></span><span class="transcription-time-part" data-time-start="5567.229" data-time-end="5568.649"><span>at position J of the array </span></span><span class="transcription-time-part" data-time-start="5568.649" data-time-end="5571.119"><span>to the string at position I of the array. </span></span><span class="transcription-time-part" data-time-start="5571.119" data-time-end="5574.949"><span>And what happens, of course, this means that. </span></span><span class="transcription-time-part" data-time-start="5574.949" data-time-end="5577.689"><span>But what happens if I happens </span></span><span class="transcription-time-part" data-time-start="5577.689" data-time-end="5579.729"><span>to be equal to J at some point? </span></span><span class="transcription-time-part" data-time-start="5579.729" data-time-end="5581.949"><span>Then that means that the left hand side, </span></span><span class="transcription-time-part" data-time-start="5581.949" data-time-end="5584.029"><span>SSI, well, that's what </span></span><span class="transcription-time-part" data-time-start="5584.029" data-time-end="5585.309"><span>the this pointer is going to point </span></span><span class="transcription-time-part" data-time-start="5585.309" data-time-end="5587.289"><span>to in this call here. </span></span><span class="transcription-time-part" data-time-start="5587.289" data-time-end="5589.749"><span>And the right hand side object, </span></span><span class="transcription-time-part" data-time-start="5589.749" data-time-end="5591.429"><span>SAs J, that's going to </span></span><span class="transcription-time-part" data-time-start="5591.429" data-time-end="5593.449"><span>be the same object as SA sabi. </span></span><span class="transcription-time-part" data-time-start="5593.449" data-time-end="5595.869"><span>So RHS, the parameter RHS will be </span></span><span class="transcription-time-part" data-time-start="5595.869" data-time-end="5599.109"><span>a reference to SACBI the same object. </span></span><span class="transcription-time-part" data-time-start="5599.109" data-time-end="5600.709"><span>This is called aliasing. </span></span><span class="transcription-time-part" data-time-start="5600.709" data-time-end="5603.229"><span>When you have two or more ways </span></span><span class="transcription-time-part" data-time-start="5603.229" data-time-end="5605.129"><span>of talking about the same object. </span></span><span class="transcription-time-part" data-time-start="5605.129" data-time-end="5607.869"><span>Coming from the normal use of the word alias, </span></span><span class="transcription-time-part" data-time-start="5607.869" data-time-end="5609.989"><span>typically a criminal will have an alias. </span></span><span class="transcription-time-part" data-time-start="5609.989" data-time-end="5612.229"><span>They will use they'll have their real name. </span></span><span class="transcription-time-part" data-time-start="5612.229" data-time-end="5614.949"><span>So, for example, James Bulger, </span></span><span class="transcription-time-part" data-time-start="5614.949" data-time-end="5617.089"><span>whose nickname was Whitey Bulger, </span></span><span class="transcription-time-part" data-time-start="5617.089" data-time-end="5618.909"><span>was a Boston crime boss, </span></span><span class="transcription-time-part" data-time-start="5618.909" data-time-end="5621.91"><span>active from being a kid in the 1940s. </span></span><span class="transcription-time-part" data-time-start="5621.91" data-time-end="5625.47"><span>And then he went into hiding in the 1990s </span></span><span class="transcription-time-part" data-time-start="5625.47" data-time-end="5627.389"><span>and ended living in </span></span><span class="transcription-time-part" data-time-start="5627.389" data-time-end="5628.589"><span>Santa Monica under </span></span><span class="transcription-time-part" data-time-start="5628.589" data-time-end="5630.209"><span>the alias of Charles Gasco. </span></span><span class="transcription-time-part" data-time-start="5630.209" data-time-end="5632.109"><span>So Charles Gasco is </span></span><span class="transcription-time-part" data-time-start="5632.109" data-time-end="5633.649"><span>an alias for the person </span></span><span class="transcription-time-part" data-time-start="5633.649" data-time-end="5635.389"><span>whose real name is James Bolger. </span></span><span class="transcription-time-part" data-time-start="5635.389" data-time-end="5637.129"><span>He was actually ultimately caught. </span></span><span class="transcription-time-part" data-time-start="5637.129" data-time-end="5639.649"><span>So anyway, in a computer science context, </span></span><span class="transcription-time-part" data-time-start="5639.649" data-time-end="5642.609"><span>this would mean if you've got two ways of </span></span><span class="transcription-time-part" data-time-start="5642.609" data-time-end="5643.849"><span>talking about the same object </span></span><span class="transcription-time-part" data-time-start="5643.849" data-time-end="5646.049"><span>perhaps as maybe you have a pointer, </span></span><span class="transcription-time-part" data-time-start="5646.049" data-time-end="5647.929"><span>two pointers pointing to the same object </span></span><span class="transcription-time-part" data-time-start="5647.929" data-time-end="5649.969"><span>or a pointer in reference to the same object, </span></span><span class="transcription-time-part" data-time-start="5649.969" data-time-end="5651.809"><span>then that would be an example there. </span></span><span class="transcription-time-part" data-time-start="5651.809" data-time-end="5653.789"><span>So this happens here </span></span><span class="transcription-time-part" data-time-start="5653.789" data-time-end="5655.169"><span>in this assignment operator, </span></span><span class="transcription-time-part" data-time-start="5655.169" data-time-end="5656.929"><span>and this function has </span></span><span class="transcription-time-part" data-time-start="5656.929" data-time-end="5659.244"><span>as a parameter a reference to a string. </span></span><span class="transcription-time-part" data-time-start="5659.244" data-time-end="5660.879"><span>And so whenever aliasing </span></span><span class="transcription-time-part" data-time-start="5660.879" data-time-end="5662.599"><span>occurs, you've got to ask yourself, </span></span><span class="transcription-time-part" data-time-start="5662.599" data-time-end="5664.619"><span>is my code correct if </span></span><span class="transcription-time-part" data-time-start="5664.619" data-time-end="5665.899"><span>these two ways of talking about </span></span><span class="transcription-time-part" data-time-start="5665.899" data-time-end="5666.959"><span>an object are actually </span></span><span class="transcription-time-part" data-time-start="5666.959" data-time-end="5668.139"><span>talking about the same object. </span></span><span class="transcription-time-part" data-time-start="5668.139" data-time-end="5669.159"><span>And so we found that </span></span><span class="transcription-time-part" data-time-start="5669.159" data-time-end="5670.999"><span>our original implementation was, no, </span></span><span class="transcription-time-part" data-time-start="5670.999" data-time-end="5673.479"><span>that was not correct if this pointer points </span></span><span class="transcription-time-part" data-time-start="5673.479" data-time-end="5674.259"><span>to the same object that </span></span><span class="transcription-time-part" data-time-start="5674.259" data-time-end="5676.159"><span>the RHS reference is referring to. </span></span><span class="transcription-time-part" data-time-start="5676.159" data-time-end="5677.739"><span>And that led us to realize, </span></span><span class="transcription-time-part" data-time-start="5677.739" data-time-end="5679.179"><span>Oh, we have to fix that here. </span></span><span class="transcription-time-part" data-time-start="5679.179" data-time-end="5680.859"><span>Now, this can come up in </span></span><span class="transcription-time-part" data-time-start="5680.859" data-time-end="5682.799"><span>all sorts of situations. </span></span><span class="transcription-time-part" data-time-start="5682.799" data-time-end="5684.439"><span>So let's say we have some kind </span></span><span class="transcription-time-part" data-time-start="5684.439" data-time-end="5686.339"><span>of financial application, </span></span><span class="transcription-time-part" data-time-start="5686.339" data-time-end="5689.219"><span>and we have a function </span></span><span class="transcription-time-part" data-time-start="5689.219" data-time-end="5691.239"><span>that we use to transfer </span></span><span class="transcription-time-part" data-time-start="5691.239" data-time-end="5693.069"><span>money from one account to another. </span></span><span class="transcription-time-part" data-time-start="5693.069" data-time-end="5695.299"><span>So here's this transfer function. </span></span><span class="transcription-time-part" data-time-start="5695.299" data-time-end="5696.639"><span>You give it the account </span></span><span class="transcription-time-part" data-time-start="5696.639" data-time-end="5698.019"><span>you're transferring thought from, </span></span><span class="transcription-time-part" data-time-start="5698.019" data-time-end="5699.839"><span>the account you're transferring to, </span></span><span class="transcription-time-part" data-time-start="5699.839" data-time-end="5702.089"><span>and the amount you want to transfer. </span></span><span class="transcription-time-part" data-time-start="5702.089" data-time-end="5703.839"><span>And so it seems like </span></span><span class="transcription-time-part" data-time-start="5703.839" data-time-end="5706.619"><span>the straightforward algorithm is, well, </span></span><span class="transcription-time-part" data-time-start="5706.619" data-time-end="5708.419"><span>if the amount you want to transfer is </span></span><span class="transcription-time-part" data-time-start="5708.419" data-time-end="5709.719"><span>more than the balance </span></span><span class="transcription-time-part" data-time-start="5709.719" data-time-end="5711.299"><span>of the account you're transferring from, </span></span><span class="transcription-time-part" data-time-start="5711.299" data-time-end="5712.979"><span>we should write an error message. </span></span><span class="transcription-time-part" data-time-start="5712.979" data-time-end="5715.059"><span>There's not enough money to do the transfer. </span></span><span class="transcription-time-part" data-time-start="5715.059" data-time-end="5717.279"><span>Otherwise, we'll debit </span></span><span class="transcription-time-part" data-time-start="5717.279" data-time-end="5718.739"><span>from account by that amount, </span></span><span class="transcription-time-part" data-time-start="5718.739" data-time-end="5721.859"><span>subtract the amount from the from account, </span></span><span class="transcription-time-part" data-time-start="5721.859" data-time-end="5722.679"><span>and we'll credit </span></span><span class="transcription-time-part" data-time-start="5722.679" data-time-end="5724.199"><span>the two account with that amount. </span></span><span class="transcription-time-part" data-time-start="5724.199" data-time-end="5727.219"><span>We'll add that amount to the two account. </span></span><span class="transcription-time-part" data-time-start="5727.219" data-time-end="5729.339"><span>Okay, this looks </span></span><span class="transcription-time-part" data-time-start="5729.339" data-time-end="5732.019"><span>really pretty obviously correct. </span></span><span class="transcription-time-part" data-time-start="5732.019" data-time-end="5733.954"><span>This seems to be the correct behavior. </span></span><span class="transcription-time-part" data-time-start="5733.954" data-time-end="5735.709"><span>But we have </span></span><span class="transcription-time-part" data-time-start="5735.709" data-time-end="5738.109"><span>a situation where aliasing occurs. </span></span><span class="transcription-time-part" data-time-start="5738.109" data-time-end="5739.709"><span>In this function, we </span></span><span class="transcription-time-part" data-time-start="5739.709" data-time-end="5742.309"><span>have two references to accounts. </span></span><span class="transcription-time-part" data-time-start="5742.309" data-time-end="5744.249"><span>What if they're the same account? </span></span><span class="transcription-time-part" data-time-start="5744.249" data-time-end="5746.549"><span>So you should always be asking yourself about </span></span><span class="transcription-time-part" data-time-start="5746.549" data-time-end="5749.429"><span>this when you have a function. </span></span><span class="transcription-time-part" data-time-start="5749.429" data-time-end="5751.149"><span>Be on the lookout for </span></span><span class="transcription-time-part" data-time-start="5751.149" data-time-end="5754.349"><span>two pointers or references to the same type. </span></span><span class="transcription-time-part" data-time-start="5754.349" data-time-end="5756.289"><span>That means aliasing might occur, </span></span><span class="transcription-time-part" data-time-start="5756.289" data-time-end="5757.629"><span>and you want to make sure your code is </span></span><span class="transcription-time-part" data-time-start="5757.629" data-time-end="5759.909"><span>correct in the case that aliasing can occur. </span></span><span class="transcription-time-part" data-time-start="5759.909" data-time-end="5761.769"><span>So it happens here because we have </span></span><span class="transcription-time-part" data-time-start="5761.769" data-time-end="5764.009"><span>two references to account. </span></span><span class="transcription-time-part" data-time-start="5764.009" data-time-end="5766.029"><span>It happened the assignment operator, </span></span><span class="transcription-time-part" data-time-start="5766.029" data-time-end="5767.329"><span>a little more subtly, </span></span><span class="transcription-time-part" data-time-start="5767.329" data-time-end="5769.654"><span>as a member function, </span></span><span class="transcription-time-part" data-time-start="5769.654" data-time-end="5773.519"><span>this pointer will be a pointer to a string, </span></span><span class="transcription-time-part" data-time-start="5773.519" data-time-end="5775.219"><span>and there's a parameter </span></span><span class="transcription-time-part" data-time-start="5775.219" data-time-end="5776.959"><span>that's a reference to a string. </span></span><span class="transcription-time-part" data-time-start="5776.959" data-time-end="5780.559"><span>So this function could have aliasing </span></span><span class="transcription-time-part" data-time-start="5780.559" data-time-end="5782.779"><span>occurring if the pointer </span></span><span class="transcription-time-part" data-time-start="5782.779" data-time-end="5783.839"><span>and the reference are </span></span><span class="transcription-time-part" data-time-start="5783.839" data-time-end="5785.059"><span>talking about the same object. </span></span><span class="transcription-time-part" data-time-start="5785.059" data-time-end="5786.299"><span>And, of course, we saw that </span></span><span class="transcription-time-part" data-time-start="5786.299" data-time-end="5788.449"><span>and we fixed it because it was incorrect. </span></span><span class="transcription-time-part" data-time-start="5788.449" data-time-end="5790.019"><span>So what happens here? </span></span><span class="transcription-time-part" data-time-start="5790.019" data-time-end="5791.679"><span>What happens if I try to </span></span><span class="transcription-time-part" data-time-start="5791.679" data-time-end="5794.119"><span>transfer money from an account to itself? </span></span><span class="transcription-time-part" data-time-start="5794.119" data-time-end="5796.439"><span>What if we end up calling transfer, say, </span></span><span class="transcription-time-part" data-time-start="5796.439" data-time-end="5797.559"><span>we have an array of accounts, </span></span><span class="transcription-time-part" data-time-start="5797.559" data-time-end="5798.879"><span>so we have some algorithm that's </span></span><span class="transcription-time-part" data-time-start="5798.879" data-time-end="5800.959"><span>moving money around between the arrays, </span></span><span class="transcription-time-part" data-time-start="5800.959" data-time-end="5804.999"><span>and this algorithm is at </span></span><span class="transcription-time-part" data-time-start="5804.999" data-time-end="5806.939"><span>various times transferring money </span></span><span class="transcription-time-part" data-time-start="5806.939" data-time-end="5809.319"><span>from A subi the account array, </span></span><span class="transcription-time-part" data-time-start="5809.319" data-time-end="5811.339"><span>subi to a sub J, </span></span><span class="transcription-time-part" data-time-start="5811.339" data-time-end="5814.499"><span>and we're transferring $20,000 around. </span></span><span class="transcription-time-part" data-time-start="5814.499" data-time-end="5816.019"><span>Okay, or some amount. </span></span><span class="transcription-time-part" data-time-start="5816.019" data-time-end="5818.019"><span>Well, again, if I is equal to J, </span></span><span class="transcription-time-part" data-time-start="5818.019" data-time-end="5819.659"><span>these are actually the same account, </span></span><span class="transcription-time-part" data-time-start="5819.659" data-time-end="5821.579"><span>and so we're transferring $20,000 </span></span><span class="transcription-time-part" data-time-start="5821.579" data-time-end="5822.919"><span>from an account to itself. </span></span><span class="transcription-time-part" data-time-start="5822.919" data-time-end="5824.139"><span>Now, you might say, </span></span><span class="transcription-time-part" data-time-start="5824.139" data-time-end="5826.709"><span>well, that should be harmless. </span></span><span class="transcription-time-part" data-time-start="5826.709" data-time-end="5827.789"><span>I mean, if you're just moving </span></span><span class="transcription-time-part" data-time-start="5827.789" data-time-end="5828.949"><span>money from an account to itself, </span></span><span class="transcription-time-part" data-time-start="5828.949" data-time-end="5830.709"><span>you're not really moving money at all. </span></span><span class="transcription-time-part" data-time-start="5830.709" data-time-end="5832.909"><span>So let's see what happens here. </span></span><span class="transcription-time-part" data-time-start="5832.909" data-time-end="5835.349"><span>Well, if the account has, </span></span><span class="transcription-time-part" data-time-start="5835.349" data-time-end="5837.009"><span>say, $40,000 in it, </span></span><span class="transcription-time-part" data-time-start="5837.009" data-time-end="5839.049"><span>then we're going to subtract </span></span><span class="transcription-time-part" data-time-start="5839.049" data-time-end="5840.589"><span>$20,000 from the account </span></span><span class="transcription-time-part" data-time-start="5840.589" data-time-end="5842.309"><span>and then credit it with $20,000. </span></span><span class="transcription-time-part" data-time-start="5842.309" data-time-end="5843.789"><span>So it ends up with the same amount of money, </span></span><span class="transcription-time-part" data-time-start="5843.789" data-time-end="5846.869"><span>$40,000. So it looks harmless. </span></span><span class="transcription-time-part" data-time-start="5846.869" data-time-end="5849.329"><span>Well, yes and no. </span></span><span class="transcription-time-part" data-time-start="5849.329" data-time-end="5854.519"><span>In that case, it's harmless, but maybe not. </span></span><span class="transcription-time-part" data-time-start="5854.519" data-time-end="5855.999"><span>You know, what if the account only </span></span><span class="transcription-time-part" data-time-start="5855.999" data-time-end="5857.579"><span>has $5,000 in it? </span></span><span class="transcription-time-part" data-time-start="5857.579" data-time-end="5858.279"><span>Well, then we're going to </span></span><span class="transcription-time-part" data-time-start="5858.279" data-time-end="5859.019"><span>write an error message </span></span><span class="transcription-time-part" data-time-start="5859.019" data-time-end="5860.199"><span>or is it going to say, Hey, guess what? </span></span><span class="transcription-time-part" data-time-start="5860.199" data-time-end="5861.999"><span>You can't transfer $20,000 </span></span><span class="transcription-time-part" data-time-start="5861.999" data-time-end="5863.779"><span>from this account to itself. </span></span><span class="transcription-time-part" data-time-start="5863.779" data-time-end="5867.439"><span>Well, yeah, but really, so what? </span></span><span class="transcription-time-part" data-time-start="5867.439" data-time-end="5869.079"><span>If it's only got $5,000, </span></span><span class="transcription-time-part" data-time-start="5869.079" data-time-end="5870.419"><span>that's not really a transfer. </span></span><span class="transcription-time-part" data-time-start="5870.419" data-time-end="5871.739"><span>So you might question whether </span></span><span class="transcription-time-part" data-time-start="5871.739" data-time-end="5873.779"><span>writing an error message is appropriate here. </span></span><span class="transcription-time-part" data-time-start="5873.779" data-time-end="5875.639"><span>Or there might be circumstances </span></span><span class="transcription-time-part" data-time-start="5875.639" data-time-end="5877.839"><span>where maybe debiting money </span></span><span class="transcription-time-part" data-time-start="5877.839" data-time-end="5879.949"><span>from an account maybe </span></span><span class="transcription-time-part" data-time-start="5879.949" data-time-end="5882.169"><span>the bank charges a slight fee for that. </span></span><span class="transcription-time-part" data-time-start="5882.169" data-time-end="5885.289"><span>So if you don't actually do a real transfer, </span></span><span class="transcription-time-part" data-time-start="5885.289" data-time-end="5887.309"><span>if you're actually not really transferring </span></span><span class="transcription-time-part" data-time-start="5887.309" data-time-end="5888.949"><span>money because it's the same account, </span></span><span class="transcription-time-part" data-time-start="5888.949" data-time-end="5891.169"><span>then should you be charged the fee for </span></span><span class="transcription-time-part" data-time-start="5891.169" data-time-end="5894.469"><span>a transfer when there really was for a debit, </span></span><span class="transcription-time-part" data-time-start="5894.469" data-time-end="5896.309"><span>because there really was no debit </span></span><span class="transcription-time-part" data-time-start="5896.309" data-time-end="5898.289"><span>because you just credited it right back. </span></span><span class="transcription-time-part" data-time-start="5898.289" data-time-end="5900.809"><span>And even worse, suppose </span></span><span class="transcription-time-part" data-time-start="5900.809" data-time-end="5903.849"><span>that there's a law that </span></span><span class="transcription-time-part" data-time-start="5903.849" data-time-end="5905.829"><span>says that if at least </span></span><span class="transcription-time-part" data-time-start="5905.829" data-time-end="5907.929"><span>$10,000 is being transferred </span></span><span class="transcription-time-part" data-time-start="5907.929" data-time-end="5909.509"><span>from one account to another, </span></span><span class="transcription-time-part" data-time-start="5909.509" data-time-end="5911.549"><span>a form has to be filed with the government, </span></span><span class="transcription-time-part" data-time-start="5911.549" data-time-end="5912.809"><span>maybe to help trace </span></span><span class="transcription-time-part" data-time-start="5912.809" data-time-end="5914.609"><span>money laundering or something like that. </span></span><span class="transcription-time-part" data-time-start="5914.609" data-time-end="5917.329"><span>So our code could be, Okay, we'll fix that. </span></span><span class="transcription-time-part" data-time-start="5917.329" data-time-end="5919.589"><span>We'll say if the amounts at least $10,000, </span></span><span class="transcription-time-part" data-time-start="5919.589" data-time-end="5920.429"><span>then we're going to </span></span><span class="transcription-time-part" data-time-start="5920.429" data-time-end="5921.929"><span>file some form with the government. </span></span><span class="transcription-time-part" data-time-start="5921.929" data-time-end="5924.009"><span>The problem is, again, </span></span><span class="transcription-time-part" data-time-start="5924.009" data-time-end="5925.869"><span>if you're not really transferring </span></span><span class="transcription-time-part" data-time-start="5925.869" data-time-end="5926.829"><span>money because it's from </span></span><span class="transcription-time-part" data-time-start="5926.829" data-time-end="5928.489"><span>an account to the same account, </span></span><span class="transcription-time-part" data-time-start="5928.489" data-time-end="5931.209"><span>then you really shouldn't be filing the form. </span></span><span class="transcription-time-part" data-time-start="5931.209" data-time-end="5932.509"><span>There is no transfer </span></span><span class="transcription-time-part" data-time-start="5932.509" data-time-end="5933.649"><span>of money going on, really. </span></span><span class="transcription-time-part" data-time-start="5933.649" data-time-end="5935.289"><span>It's staying in the same account. </span></span><span class="transcription-time-part" data-time-start="5935.289" data-time-end="5936.789"><span>So, you know, that's </span></span><span class="transcription-time-part" data-time-start="5936.789" data-time-end="5938.029"><span>an unnecessary form you're </span></span><span class="transcription-time-part" data-time-start="5938.029" data-time-end="5939.174"><span>filing with the government. </span></span><span class="transcription-time-part" data-time-start="5939.174" data-time-end="5941.099"><span>Now, you might say, so what? </span></span><span class="transcription-time-part" data-time-start="5941.099" data-time-end="5943.999"><span>Well, there are laws in effect that </span></span><span class="transcription-time-part" data-time-start="5943.999" data-time-end="5945.459"><span>say that filing too </span></span><span class="transcription-time-part" data-time-start="5945.459" data-time-end="5947.279"><span>many frivolous forms with the government, </span></span><span class="transcription-time-part" data-time-start="5947.279" data-time-end="5948.979"><span>you know, could earn you a fine. </span></span><span class="transcription-time-part" data-time-start="5948.979" data-time-end="5950.899"><span>For example, there's actually </span></span><span class="transcription-time-part" data-time-start="5950.899" data-time-end="5953.299"><span>a federal law that makes it a </span></span><span class="transcription-time-part" data-time-start="5953.299" data-time-end="5955.559"><span>crime subject to a fine and </span></span><span class="transcription-time-part" data-time-start="5955.559" data-time-end="5957.519"><span>possibly imprisonment to file </span></span><span class="transcription-time-part" data-time-start="5957.519" data-time-end="5958.979"><span>a frivolous tax return. </span></span><span class="transcription-time-part" data-time-start="5958.979" data-time-end="5960.659"><span>There are various tax protesters </span></span><span class="transcription-time-part" data-time-start="5960.659" data-time-end="5961.719"><span>who believe, for example, </span></span><span class="transcription-time-part" data-time-start="5961.719" data-time-end="5963.539"><span>the 16th Amendment, which authorizes </span></span><span class="transcription-time-part" data-time-start="5963.539" data-time-end="5965.899"><span>the income tax was improperly passed. </span></span><span class="transcription-time-part" data-time-start="5965.899" data-time-end="5967.239"><span>It's unconstitutional to have </span></span><span class="transcription-time-part" data-time-start="5967.239" data-time-end="5969.179"><span>an income tax, a federal income tax. </span></span><span class="transcription-time-part" data-time-start="5969.179" data-time-end="5971.079"><span>Therefore, they will protest this </span></span><span class="transcription-time-part" data-time-start="5971.079" data-time-end="5973.779"><span>by filing you know, </span></span><span class="transcription-time-part" data-time-start="5973.779" data-time-end="5975.619"><span>silly returns with the government </span></span><span class="transcription-time-part" data-time-start="5975.619" data-time-end="5976.779"><span>hoping to overload </span></span><span class="transcription-time-part" data-time-start="5976.779" data-time-end="5978.359"><span>them with all these </span></span><span class="transcription-time-part" data-time-start="5978.359" data-time-end="5980.559"><span>silly income tax returns, et cetera. </span></span><span class="transcription-time-part" data-time-start="5980.559" data-time-end="5982.139"><span>Well, the government says you can't do that. </span></span><span class="transcription-time-part" data-time-start="5982.139" data-time-end="5983.199"><span>That's a crime to file </span></span><span class="transcription-time-part" data-time-start="5983.199" data-time-end="5984.319"><span>a frivolous tax return. </span></span><span class="transcription-time-part" data-time-start="5984.319" data-time-end="5984.919"><span>So, you know, </span></span><span class="transcription-time-part" data-time-start="5984.919" data-time-end="5986.099"><span>maybe there's something that says, </span></span><span class="transcription-time-part" data-time-start="5986.099" data-time-end="5987.519"><span>if you file forms for </span></span><span class="transcription-time-part" data-time-start="5987.519" data-time-end="5989.419"><span>this money laundering tracing law, </span></span><span class="transcription-time-part" data-time-start="5989.419" data-time-end="5990.939"><span>if you file forms that aren't </span></span><span class="transcription-time-part" data-time-start="5990.939" data-time-end="5993.039"><span>really transfers, that's frivolous. </span></span><span class="transcription-time-part" data-time-start="5993.039" data-time-end="5994.699"><span>And if there's too many of those, </span></span><span class="transcription-time-part" data-time-start="5994.699" data-time-end="5996.439"><span>we will find your company. </span></span><span class="transcription-time-part" data-time-start="5996.439" data-time-end="5997.199"><span>So there could be </span></span><span class="transcription-time-part" data-time-start="5997.199" data-time-end="5999.299"><span>consequences for ignoring alias. </span></span><span class="transcription-time-part" data-time-start="5999.299" data-time-end="6000.979"><span>So at the very least, </span></span><span class="transcription-time-part" data-time-start="6000.979" data-time-end="6002.479"><span>you should consider the issue </span></span><span class="transcription-time-part" data-time-start="6002.479" data-time-end="6004.619"><span>and check your implementation and see </span></span><span class="transcription-time-part" data-time-start="6004.619" data-time-end="6006.079"><span>if your implementation does </span></span><span class="transcription-time-part" data-time-start="6006.079" data-time-end="6008.679"><span>the right thing in the event of aliasing. </span></span><span class="transcription-time-part" data-time-start="6008.679" data-time-end="6009.919"><span>And so I would argue that </span></span><span class="transcription-time-part" data-time-start="6009.919" data-time-end="6011.459"><span>while at first glance, </span></span><span class="transcription-time-part" data-time-start="6011.459" data-time-end="6012.979"><span>it seems harmless, if you </span></span><span class="transcription-time-part" data-time-start="6012.979" data-time-end="6014.179"><span>transfer money from an account </span></span><span class="transcription-time-part" data-time-start="6014.179" data-time-end="6014.939"><span>to itself, so what? </span></span><span class="transcription-time-part" data-time-start="6014.939" data-time-end="6016.919"><span>It's not a real transfer. That's fine. </span></span><span class="transcription-time-part" data-time-start="6016.919" data-time-end="6018.979"><span>Well, you might want to rule that out. </span></span><span class="transcription-time-part" data-time-start="6018.979" data-time-end="6020.419"><span>So we might just decide to </span></span><span class="transcription-time-part" data-time-start="6020.419" data-time-end="6022.299"><span>protect this whole thing with, say, </span></span><span class="transcription-time-part" data-time-start="6022.299" data-time-end="6024.704"><span>if the from account </span></span><span class="transcription-time-part" data-time-start="6024.704" data-time-end="6027.309"><span>is different from the two account. </span></span><span class="transcription-time-part" data-time-start="6027.309" data-time-end="6028.949"><span>And how do we know they're different? </span></span><span class="transcription-time-part" data-time-start="6028.949" data-time-end="6029.529"><span>Because they're in </span></span><span class="transcription-time-part" data-time-start="6029.529" data-time-end="6030.829"><span>different places in memory? </span></span><span class="transcription-time-part" data-time-start="6030.829" data-time-end="6032.489"><span>If the From account is </span></span><span class="transcription-time-part" data-time-start="6032.489" data-time-end="6033.849"><span>different from the two account, </span></span><span class="transcription-time-part" data-time-start="6033.849" data-time-end="6034.949"><span>then do all this work. </span></span><span class="transcription-time-part" data-time-start="6034.949" data-time-end="6036.829"><span>But if they're the same thing, </span></span><span class="transcription-time-part" data-time-start="6036.829" data-time-end="6038.469"><span>the same account, then do nothing. </span></span><span class="transcription-time-part" data-time-start="6038.469" data-time-end="6040.004"><span>It's not really a transfer. </span></span><span class="transcription-time-part" data-time-start="6040.004" data-time-end="6042.279"><span>Okay, so the bottom line </span></span><span class="transcription-time-part" data-time-start="6042.279" data-time-end="6043.999"><span>is you should always, </span></span><span class="transcription-time-part" data-time-start="6043.999" data-time-end="6046.519"><span>always be on the lookout for aliasing. </span></span><span class="transcription-time-part" data-time-start="6046.519" data-time-end="6047.759"><span>If a function can be </span></span><span class="transcription-time-part" data-time-start="6047.759" data-time-end="6049.339"><span>called with two pointers or </span></span><span class="transcription-time-part" data-time-start="6049.339" data-time-end="6050.919"><span>references to the same type, </span></span><span class="transcription-time-part" data-time-start="6050.919" data-time-end="6052.399"><span>aliasing might occur. </span></span><span class="transcription-time-part" data-time-start="6052.399" data-time-end="6054.279"><span>Make sure your implementation </span></span><span class="transcription-time-part" data-time-start="6054.279" data-time-end="6056.719"><span>takes care of that in an appropriate way. </span></span><span class="transcription-time-part" data-time-start="6056.719" data-time-end="6058.699"><span>There have been plenty of programs that </span></span><span class="transcription-time-part" data-time-start="6058.699" data-time-end="6061.299"><span>have been just fine until one day, </span></span><span class="transcription-time-part" data-time-start="6061.299" data-time-end="6063.039"><span>somebody did something involving </span></span><span class="transcription-time-part" data-time-start="6063.039" data-time-end="6064.419"><span>aliasing and oops, </span></span><span class="transcription-time-part" data-time-start="6064.419" data-time-end="6066.179"><span>that algorithm doesn't work correctly, </span></span><span class="transcription-time-part" data-time-start="6066.179" data-time-end="6068.179"><span>and so the program did bad. </span></span><span class="transcription-time-part" data-time-start="6068.179" data-time-end="6069.879"><span>So that wraps up what I want to </span></span><span class="transcription-time-part" data-time-start="6069.879" data-time-end="6071.339"><span>say about resource management, </span></span><span class="transcription-time-part" data-time-start="6071.339" data-time-end="6073.859"><span>and I'll end the recording here. </span></span></div>
